(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function r(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(l){if(l.ep)return;l.ep=!0;const u=r(l);fetch(l.href,u)}})();var Ao=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},du={exports:{}},Gi={},fu={exports:{}},fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dh;function Vv(){if(Dh)return fe;Dh=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),_=Symbol.iterator;function w(E){return E===null||typeof E!="object"?null:(E=_&&E[_]||E["@@iterator"],typeof E=="function"?E:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,D={};function L(E,P,oe){this.props=E,this.context=P,this.refs=D,this.updater=oe||I}L.prototype.isReactComponent={},L.prototype.setState=function(E,P){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,P,"setState")},L.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function W(){}W.prototype=L.prototype;function j(E,P,oe){this.props=E,this.context=P,this.refs=D,this.updater=oe||I}var V=j.prototype=new W;V.constructor=j,b(V,L.prototype),V.isPureReactComponent=!0;var te=Array.isArray,K=Object.prototype.hasOwnProperty,se={current:null},_e={key:!0,ref:!0,__self:!0,__source:!0};function H(E,P,oe){var ce,Ce={},ge=null,ie=null;if(P!=null)for(ce in P.ref!==void 0&&(ie=P.ref),P.key!==void 0&&(ge=""+P.key),P)K.call(P,ce)&&!_e.hasOwnProperty(ce)&&(Ce[ce]=P[ce]);var de=arguments.length-2;if(de===1)Ce.children=oe;else if(1<de){for(var Te=Array(de),lt=0;lt<de;lt++)Te[lt]=arguments[lt+2];Ce.children=Te}if(E&&E.defaultProps)for(ce in de=E.defaultProps,de)Ce[ce]===void 0&&(Ce[ce]=de[ce]);return{$$typeof:i,type:E,key:ge,ref:ie,props:Ce,_owner:se.current}}function ae(E,P){return{$$typeof:i,type:E.type,key:P,ref:E.ref,props:E.props,_owner:E._owner}}function ue(E){return typeof E=="object"&&E!==null&&E.$$typeof===i}function ve(E){var P={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(oe){return P[oe]})}var q=/\/+/g;function xe(E,P){return typeof E=="object"&&E!==null&&E.key!=null?ve(""+E.key):P.toString(36)}function ze(E,P,oe,ce,Ce){var ge=typeof E;(ge==="undefined"||ge==="boolean")&&(E=null);var ie=!1;if(E===null)ie=!0;else switch(ge){case"string":case"number":ie=!0;break;case"object":switch(E.$$typeof){case i:case e:ie=!0}}if(ie)return ie=E,Ce=Ce(ie),E=ce===""?"."+xe(ie,0):ce,te(Ce)?(oe="",E!=null&&(oe=E.replace(q,"$&/")+"/"),ze(Ce,P,oe,"",function(lt){return lt})):Ce!=null&&(ue(Ce)&&(Ce=ae(Ce,oe+(!Ce.key||ie&&ie.key===Ce.key?"":(""+Ce.key).replace(q,"$&/")+"/")+E)),P.push(Ce)),1;if(ie=0,ce=ce===""?".":ce+":",te(E))for(var de=0;de<E.length;de++){ge=E[de];var Te=ce+xe(ge,de);ie+=ze(ge,P,oe,Te,Ce)}else if(Te=w(E),typeof Te=="function")for(E=Te.call(E),de=0;!(ge=E.next()).done;)ge=ge.value,Te=ce+xe(ge,de++),ie+=ze(ge,P,oe,Te,Ce);else if(ge==="object")throw P=String(E),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.");return ie}function we(E,P,oe){if(E==null)return E;var ce=[],Ce=0;return ze(E,ce,"","",function(ge){return P.call(oe,ge,Ce++)}),ce}function Ne(E){if(E._status===-1){var P=E._result;P=P(),P.then(function(oe){(E._status===0||E._status===-1)&&(E._status=1,E._result=oe)},function(oe){(E._status===0||E._status===-1)&&(E._status=2,E._result=oe)}),E._status===-1&&(E._status=0,E._result=P)}if(E._status===1)return E._result.default;throw E._result}var me={current:null},z={transition:null},X={ReactCurrentDispatcher:me,ReactCurrentBatchConfig:z,ReactCurrentOwner:se};function B(){throw Error("act(...) is not supported in production builds of React.")}return fe.Children={map:we,forEach:function(E,P,oe){we(E,function(){P.apply(this,arguments)},oe)},count:function(E){var P=0;return we(E,function(){P++}),P},toArray:function(E){return we(E,function(P){return P})||[]},only:function(E){if(!ue(E))throw Error("React.Children.only expected to receive a single React element child.");return E}},fe.Component=L,fe.Fragment=r,fe.Profiler=l,fe.PureComponent=j,fe.StrictMode=s,fe.Suspense=m,fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X,fe.act=B,fe.cloneElement=function(E,P,oe){if(E==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+E+".");var ce=b({},E.props),Ce=E.key,ge=E.ref,ie=E._owner;if(P!=null){if(P.ref!==void 0&&(ge=P.ref,ie=se.current),P.key!==void 0&&(Ce=""+P.key),E.type&&E.type.defaultProps)var de=E.type.defaultProps;for(Te in P)K.call(P,Te)&&!_e.hasOwnProperty(Te)&&(ce[Te]=P[Te]===void 0&&de!==void 0?de[Te]:P[Te])}var Te=arguments.length-2;if(Te===1)ce.children=oe;else if(1<Te){de=Array(Te);for(var lt=0;lt<Te;lt++)de[lt]=arguments[lt+2];ce.children=de}return{$$typeof:i,type:E.type,key:Ce,ref:ge,props:ce,_owner:ie}},fe.createContext=function(E){return E={$$typeof:d,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},E.Provider={$$typeof:u,_context:E},E.Consumer=E},fe.createElement=H,fe.createFactory=function(E){var P=H.bind(null,E);return P.type=E,P},fe.createRef=function(){return{current:null}},fe.forwardRef=function(E){return{$$typeof:h,render:E}},fe.isValidElement=ue,fe.lazy=function(E){return{$$typeof:x,_payload:{_status:-1,_result:E},_init:Ne}},fe.memo=function(E,P){return{$$typeof:g,type:E,compare:P===void 0?null:P}},fe.startTransition=function(E){var P=z.transition;z.transition={};try{E()}finally{z.transition=P}},fe.unstable_act=B,fe.useCallback=function(E,P){return me.current.useCallback(E,P)},fe.useContext=function(E){return me.current.useContext(E)},fe.useDebugValue=function(){},fe.useDeferredValue=function(E){return me.current.useDeferredValue(E)},fe.useEffect=function(E,P){return me.current.useEffect(E,P)},fe.useId=function(){return me.current.useId()},fe.useImperativeHandle=function(E,P,oe){return me.current.useImperativeHandle(E,P,oe)},fe.useInsertionEffect=function(E,P){return me.current.useInsertionEffect(E,P)},fe.useLayoutEffect=function(E,P){return me.current.useLayoutEffect(E,P)},fe.useMemo=function(E,P){return me.current.useMemo(E,P)},fe.useReducer=function(E,P,oe){return me.current.useReducer(E,P,oe)},fe.useRef=function(E){return me.current.useRef(E)},fe.useState=function(E){return me.current.useState(E)},fe.useSyncExternalStore=function(E,P,oe){return me.current.useSyncExternalStore(E,P,oe)},fe.useTransition=function(){return me.current.useTransition()},fe.version="18.3.1",fe}var Oh;function rc(){return Oh||(Oh=1,fu.exports=Vv()),fu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ah;function Gv(){if(Ah)return Gi;Ah=1;var i=rc(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,l=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function d(h,m,g){var x,_={},w=null,I=null;g!==void 0&&(w=""+g),m.key!==void 0&&(w=""+m.key),m.ref!==void 0&&(I=m.ref);for(x in m)s.call(m,x)&&!u.hasOwnProperty(x)&&(_[x]=m[x]);if(h&&h.defaultProps)for(x in m=h.defaultProps,m)_[x]===void 0&&(_[x]=m[x]);return{$$typeof:e,type:h,key:w,ref:I,props:_,_owner:l.current}}return Gi.Fragment=r,Gi.jsx=d,Gi.jsxs=d,Gi}var Lh;function Yv(){return Lh||(Lh=1,du.exports=Gv()),du.exports}var y=Yv(),Lo={},hu={exports:{}},St={},pu={exports:{}},mu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fh;function Qv(){return Fh||(Fh=1,function(i){function e(z,X){var B=z.length;z.push(X);e:for(;0<B;){var E=B-1>>>1,P=z[E];if(0<l(P,X))z[E]=X,z[B]=P,B=E;else break e}}function r(z){return z.length===0?null:z[0]}function s(z){if(z.length===0)return null;var X=z[0],B=z.pop();if(B!==X){z[0]=B;e:for(var E=0,P=z.length,oe=P>>>1;E<oe;){var ce=2*(E+1)-1,Ce=z[ce],ge=ce+1,ie=z[ge];if(0>l(Ce,B))ge<P&&0>l(ie,Ce)?(z[E]=ie,z[ge]=B,E=ge):(z[E]=Ce,z[ce]=B,E=ce);else if(ge<P&&0>l(ie,B))z[E]=ie,z[ge]=B,E=ge;else break e}}return X}function l(z,X){var B=z.sortIndex-X.sortIndex;return B!==0?B:z.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var d=Date,h=d.now();i.unstable_now=function(){return d.now()-h}}var m=[],g=[],x=1,_=null,w=3,I=!1,b=!1,D=!1,L=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function V(z){for(var X=r(g);X!==null;){if(X.callback===null)s(g);else if(X.startTime<=z)s(g),X.sortIndex=X.expirationTime,e(m,X);else break;X=r(g)}}function te(z){if(D=!1,V(z),!b)if(r(m)!==null)b=!0,Ne(K);else{var X=r(g);X!==null&&me(te,X.startTime-z)}}function K(z,X){b=!1,D&&(D=!1,W(H),H=-1),I=!0;var B=w;try{for(V(X),_=r(m);_!==null&&(!(_.expirationTime>X)||z&&!ve());){var E=_.callback;if(typeof E=="function"){_.callback=null,w=_.priorityLevel;var P=E(_.expirationTime<=X);X=i.unstable_now(),typeof P=="function"?_.callback=P:_===r(m)&&s(m),V(X)}else s(m);_=r(m)}if(_!==null)var oe=!0;else{var ce=r(g);ce!==null&&me(te,ce.startTime-X),oe=!1}return oe}finally{_=null,w=B,I=!1}}var se=!1,_e=null,H=-1,ae=5,ue=-1;function ve(){return!(i.unstable_now()-ue<ae)}function q(){if(_e!==null){var z=i.unstable_now();ue=z;var X=!0;try{X=_e(!0,z)}finally{X?xe():(se=!1,_e=null)}}else se=!1}var xe;if(typeof j=="function")xe=function(){j(q)};else if(typeof MessageChannel<"u"){var ze=new MessageChannel,we=ze.port2;ze.port1.onmessage=q,xe=function(){we.postMessage(null)}}else xe=function(){L(q,0)};function Ne(z){_e=z,se||(se=!0,xe())}function me(z,X){H=L(function(){z(i.unstable_now())},X)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(z){z.callback=null},i.unstable_continueExecution=function(){b||I||(b=!0,Ne(K))},i.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ae=0<z?Math.floor(1e3/z):5},i.unstable_getCurrentPriorityLevel=function(){return w},i.unstable_getFirstCallbackNode=function(){return r(m)},i.unstable_next=function(z){switch(w){case 1:case 2:case 3:var X=3;break;default:X=w}var B=w;w=X;try{return z()}finally{w=B}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(z,X){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var B=w;w=z;try{return X()}finally{w=B}},i.unstable_scheduleCallback=function(z,X,B){var E=i.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?E+B:E):B=E,z){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=B+P,z={id:x++,callback:X,priorityLevel:z,startTime:B,expirationTime:P,sortIndex:-1},B>E?(z.sortIndex=B,e(g,z),r(m)===null&&z===r(g)&&(D?(W(H),H=-1):D=!0,me(te,B-E))):(z.sortIndex=P,e(m,z),b||I||(b=!0,Ne(K))),z},i.unstable_shouldYield=ve,i.unstable_wrapCallback=function(z){var X=w;return function(){var B=w;w=X;try{return z.apply(this,arguments)}finally{w=B}}}}(mu)),mu}var jh;function qv(){return jh||(jh=1,pu.exports=Qv()),pu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zh;function Kv(){if(zh)return St;zh=1;var i=rc(),e=qv();function r(t){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)n+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,l={};function u(t,n){d(t,n),d(t+"Capture",n)}function d(t,n){for(l[t]=n,t=0;t<n.length;t++)s.add(n[t])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},_={};function w(t){return m.call(_,t)?!0:m.call(x,t)?!1:g.test(t)?_[t]=!0:(x[t]=!0,!1)}function I(t,n,o,a){if(o!==null&&o.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return a?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function b(t,n,o,a){if(n===null||typeof n>"u"||I(t,n,o,a))return!0;if(a)return!1;if(o!==null)switch(o.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function D(t,n,o,a,c,f,p){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=o,this.propertyName=t,this.type=n,this.sanitizeURL=f,this.removeEmptyString=p}var L={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){L[t]=new D(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var n=t[0];L[n]=new D(n,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){L[t]=new D(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){L[t]=new D(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){L[t]=new D(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){L[t]=new D(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){L[t]=new D(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){L[t]=new D(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){L[t]=new D(t,5,!1,t.toLowerCase(),null,!1,!1)});var W=/[\-:]([a-z])/g;function j(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var n=t.replace(W,j);L[n]=new D(n,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var n=t.replace(W,j);L[n]=new D(n,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var n=t.replace(W,j);L[n]=new D(n,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){L[t]=new D(t,1,!1,t.toLowerCase(),null,!1,!1)}),L.xlinkHref=new D("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){L[t]=new D(t,1,!1,t.toLowerCase(),null,!0,!0)});function V(t,n,o,a){var c=L.hasOwnProperty(n)?L[n]:null;(c!==null?c.type!==0:a||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(b(n,o,c,a)&&(o=null),a||c===null?w(n)&&(o===null?t.removeAttribute(n):t.setAttribute(n,""+o)):c.mustUseProperty?t[c.propertyName]=o===null?c.type===3?!1:"":o:(n=c.attributeName,a=c.attributeNamespace,o===null?t.removeAttribute(n):(c=c.type,o=c===3||c===4&&o===!0?"":""+o,a?t.setAttributeNS(a,n,o):t.setAttribute(n,o))))}var te=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,K=Symbol.for("react.element"),se=Symbol.for("react.portal"),_e=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),ae=Symbol.for("react.profiler"),ue=Symbol.for("react.provider"),ve=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),xe=Symbol.for("react.suspense"),ze=Symbol.for("react.suspense_list"),we=Symbol.for("react.memo"),Ne=Symbol.for("react.lazy"),me=Symbol.for("react.offscreen"),z=Symbol.iterator;function X(t){return t===null||typeof t!="object"?null:(t=z&&t[z]||t["@@iterator"],typeof t=="function"?t:null)}var B=Object.assign,E;function P(t){if(E===void 0)try{throw Error()}catch(o){var n=o.stack.trim().match(/\n( *(at )?)/);E=n&&n[1]||""}return`
`+E+t}var oe=!1;function ce(t,n){if(!t||oe)return"";oe=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(T){var a=T}Reflect.construct(t,[],n)}else{try{n.call()}catch(T){a=T}t.call(n.prototype)}else{try{throw Error()}catch(T){a=T}t()}}catch(T){if(T&&a&&typeof T.stack=="string"){for(var c=T.stack.split(`
`),f=a.stack.split(`
`),p=c.length-1,v=f.length-1;1<=p&&0<=v&&c[p]!==f[v];)v--;for(;1<=p&&0<=v;p--,v--)if(c[p]!==f[v]){if(p!==1||v!==1)do if(p--,v--,0>v||c[p]!==f[v]){var C=`
`+c[p].replace(" at new "," at ");return t.displayName&&C.includes("<anonymous>")&&(C=C.replace("<anonymous>",t.displayName)),C}while(1<=p&&0<=v);break}}}finally{oe=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?P(t):""}function Ce(t){switch(t.tag){case 5:return P(t.type);case 16:return P("Lazy");case 13:return P("Suspense");case 19:return P("SuspenseList");case 0:case 2:case 15:return t=ce(t.type,!1),t;case 11:return t=ce(t.type.render,!1),t;case 1:return t=ce(t.type,!0),t;default:return""}}function ge(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case _e:return"Fragment";case se:return"Portal";case ae:return"Profiler";case H:return"StrictMode";case xe:return"Suspense";case ze:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ve:return(t.displayName||"Context")+".Consumer";case ue:return(t._context.displayName||"Context")+".Provider";case q:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case we:return n=t.displayName||null,n!==null?n:ge(t.type)||"Memo";case Ne:n=t._payload,t=t._init;try{return ge(t(n))}catch{}}return null}function ie(t){var n=t.type;switch(t.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=n.render,t=t.displayName||t.name||"",n.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ge(n);case 8:return n===H?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function de(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Te(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function lt(t){var n=Te(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),a=""+t[n];if(!t.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var c=o.get,f=o.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return c.call(this)},set:function(p){a=""+p,f.call(this,p)}}),Object.defineProperty(t,n,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(p){a=""+p},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function Es(t){t._valueTracker||(t._valueTracker=lt(t))}function jc(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var o=n.getValue(),a="";return t&&(a=Te(t)?t.checked?"true":"false":t.value),t=a,t!==o?(n.setValue(t),!0):!1}function ks(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function vl(t,n){var o=n.checked;return B({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function zc(t,n){var o=n.defaultValue==null?"":n.defaultValue,a=n.checked!=null?n.checked:n.defaultChecked;o=de(n.value!=null?n.value:o),t._wrapperState={initialChecked:a,initialValue:o,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function Wc(t,n){n=n.checked,n!=null&&V(t,"checked",n,!1)}function _l(t,n){Wc(t,n);var o=de(n.value),a=n.type;if(o!=null)a==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(a==="submit"||a==="reset"){t.removeAttribute("value");return}n.hasOwnProperty("value")?wl(t,n.type,o):n.hasOwnProperty("defaultValue")&&wl(t,n.type,de(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(t.defaultChecked=!!n.defaultChecked)}function Bc(t,n,o){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var a=n.type;if(!(a!=="submit"&&a!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+t._wrapperState.initialValue,o||n===t.value||(t.value=n),t.defaultValue=n}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function wl(t,n,o){(n!=="number"||ks(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var li=Array.isArray;function vr(t,n,o,a){if(t=t.options,n){n={};for(var c=0;c<o.length;c++)n["$"+o[c]]=!0;for(o=0;o<t.length;o++)c=n.hasOwnProperty("$"+t[o].value),t[o].selected!==c&&(t[o].selected=c),c&&a&&(t[o].defaultSelected=!0)}else{for(o=""+de(o),n=null,c=0;c<t.length;c++){if(t[c].value===o){t[c].selected=!0,a&&(t[c].defaultSelected=!0);return}n!==null||t[c].disabled||(n=t[c])}n!==null&&(n.selected=!0)}}function Cl(t,n){if(n.dangerouslySetInnerHTML!=null)throw Error(r(91));return B({},n,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Uc(t,n){var o=n.value;if(o==null){if(o=n.children,n=n.defaultValue,o!=null){if(n!=null)throw Error(r(92));if(li(o)){if(1<o.length)throw Error(r(93));o=o[0]}n=o}n==null&&(n=""),o=n}t._wrapperState={initialValue:de(o)}}function Hc(t,n){var o=de(n.value),a=de(n.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),n.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),a!=null&&(t.defaultValue=""+a)}function $c(t){var n=t.textContent;n===t._wrapperState.initialValue&&n!==""&&n!==null&&(t.value=n)}function Vc(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xl(t,n){return t==null||t==="http://www.w3.org/1999/xhtml"?Vc(n):t==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ns,Gc=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,o,a,c){MSApp.execUnsafeLocalFunction(function(){return t(n,o,a,c)})}:t}(function(t,n){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=n;else{for(Ns=Ns||document.createElement("div"),Ns.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=Ns.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;n.firstChild;)t.appendChild(n.firstChild)}});function ai(t,n){if(n){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=n;return}}t.textContent=n}var ui={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qg=["Webkit","ms","Moz","O"];Object.keys(ui).forEach(function(t){qg.forEach(function(n){n=n+t.charAt(0).toUpperCase()+t.substring(1),ui[n]=ui[t]})});function Yc(t,n,o){return n==null||typeof n=="boolean"||n===""?"":o||typeof n!="number"||n===0||ui.hasOwnProperty(t)&&ui[t]?(""+n).trim():n+"px"}function Qc(t,n){t=t.style;for(var o in n)if(n.hasOwnProperty(o)){var a=o.indexOf("--")===0,c=Yc(o,n[o],a);o==="float"&&(o="cssFloat"),a?t.setProperty(o,c):t[o]=c}}var Kg=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Sl(t,n){if(n){if(Kg[t]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(r(137,t));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(r(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(r(61))}if(n.style!=null&&typeof n.style!="object")throw Error(r(62))}}function El(t,n){if(t.indexOf("-")===-1)return typeof n.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kl=null;function Nl(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Tl=null,_r=null,wr=null;function qc(t){if(t=Ri(t)){if(typeof Tl!="function")throw Error(r(280));var n=t.stateNode;n&&(n=qs(n),Tl(t.stateNode,t.type,n))}}function Kc(t){_r?wr?wr.push(t):wr=[t]:_r=t}function Xc(){if(_r){var t=_r,n=wr;if(wr=_r=null,qc(t),n)for(t=0;t<n.length;t++)qc(n[t])}}function Jc(t,n){return t(n)}function Zc(){}var Il=!1;function ed(t,n,o){if(Il)return t(n,o);Il=!0;try{return Jc(t,n,o)}finally{Il=!1,(_r!==null||wr!==null)&&(Zc(),Xc())}}function ci(t,n){var o=t.stateNode;if(o===null)return null;var a=qs(o);if(a===null)return null;o=a[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(t=t.type,a=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!a;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(r(231,n,typeof o));return o}var bl=!1;if(h)try{var di={};Object.defineProperty(di,"passive",{get:function(){bl=!0}}),window.addEventListener("test",di,di),window.removeEventListener("test",di,di)}catch{bl=!1}function Xg(t,n,o,a,c,f,p,v,C){var T=Array.prototype.slice.call(arguments,3);try{n.apply(o,T)}catch(M){this.onError(M)}}var fi=!1,Ts=null,Is=!1,Pl=null,Jg={onError:function(t){fi=!0,Ts=t}};function Zg(t,n,o,a,c,f,p,v,C){fi=!1,Ts=null,Xg.apply(Jg,arguments)}function ey(t,n,o,a,c,f,p,v,C){if(Zg.apply(this,arguments),fi){if(fi){var T=Ts;fi=!1,Ts=null}else throw Error(r(198));Is||(Is=!0,Pl=T)}}function Kn(t){var n=t,o=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,n.flags&4098&&(o=n.return),t=n.return;while(t)}return n.tag===3?o:null}function td(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function nd(t){if(Kn(t)!==t)throw Error(r(188))}function ty(t){var n=t.alternate;if(!n){if(n=Kn(t),n===null)throw Error(r(188));return n!==t?null:t}for(var o=t,a=n;;){var c=o.return;if(c===null)break;var f=c.alternate;if(f===null){if(a=c.return,a!==null){o=a;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===o)return nd(c),t;if(f===a)return nd(c),n;f=f.sibling}throw Error(r(188))}if(o.return!==a.return)o=c,a=f;else{for(var p=!1,v=c.child;v;){if(v===o){p=!0,o=c,a=f;break}if(v===a){p=!0,a=c,o=f;break}v=v.sibling}if(!p){for(v=f.child;v;){if(v===o){p=!0,o=f,a=c;break}if(v===a){p=!0,a=f,o=c;break}v=v.sibling}if(!p)throw Error(r(189))}}if(o.alternate!==a)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?t:n}function rd(t){return t=ty(t),t!==null?id(t):null}function id(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var n=id(t);if(n!==null)return n;t=t.sibling}return null}var sd=e.unstable_scheduleCallback,od=e.unstable_cancelCallback,ny=e.unstable_shouldYield,ry=e.unstable_requestPaint,Ve=e.unstable_now,iy=e.unstable_getCurrentPriorityLevel,Rl=e.unstable_ImmediatePriority,ld=e.unstable_UserBlockingPriority,bs=e.unstable_NormalPriority,sy=e.unstable_LowPriority,ad=e.unstable_IdlePriority,Ps=null,Kt=null;function oy(t){if(Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(Ps,t,void 0,(t.current.flags&128)===128)}catch{}}var jt=Math.clz32?Math.clz32:uy,ly=Math.log,ay=Math.LN2;function uy(t){return t>>>=0,t===0?32:31-(ly(t)/ay|0)|0}var Rs=64,Ms=4194304;function hi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ds(t,n){var o=t.pendingLanes;if(o===0)return 0;var a=0,c=t.suspendedLanes,f=t.pingedLanes,p=o&268435455;if(p!==0){var v=p&~c;v!==0?a=hi(v):(f&=p,f!==0&&(a=hi(f)))}else p=o&~c,p!==0?a=hi(p):f!==0&&(a=hi(f));if(a===0)return 0;if(n!==0&&n!==a&&!(n&c)&&(c=a&-a,f=n&-n,c>=f||c===16&&(f&4194240)!==0))return n;if(a&4&&(a|=o&16),n=t.entangledLanes,n!==0)for(t=t.entanglements,n&=a;0<n;)o=31-jt(n),c=1<<o,a|=t[o],n&=~c;return a}function cy(t,n){switch(t){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dy(t,n){for(var o=t.suspendedLanes,a=t.pingedLanes,c=t.expirationTimes,f=t.pendingLanes;0<f;){var p=31-jt(f),v=1<<p,C=c[p];C===-1?(!(v&o)||v&a)&&(c[p]=cy(v,n)):C<=n&&(t.expiredLanes|=v),f&=~v}}function Ml(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ud(){var t=Rs;return Rs<<=1,!(Rs&4194240)&&(Rs=64),t}function Dl(t){for(var n=[],o=0;31>o;o++)n.push(t);return n}function pi(t,n,o){t.pendingLanes|=n,n!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,n=31-jt(n),t[n]=o}function fy(t,n){var o=t.pendingLanes&~n;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=n,t.mutableReadLanes&=n,t.entangledLanes&=n,n=t.entanglements;var a=t.eventTimes;for(t=t.expirationTimes;0<o;){var c=31-jt(o),f=1<<c;n[c]=0,a[c]=-1,t[c]=-1,o&=~f}}function Ol(t,n){var o=t.entangledLanes|=n;for(t=t.entanglements;o;){var a=31-jt(o),c=1<<a;c&n|t[a]&n&&(t[a]|=n),o&=~c}}var Ie=0;function cd(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var dd,Al,fd,hd,pd,Ll=!1,Os=[],wn=null,Cn=null,xn=null,mi=new Map,gi=new Map,Sn=[],hy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function md(t,n){switch(t){case"focusin":case"focusout":wn=null;break;case"dragenter":case"dragleave":Cn=null;break;case"mouseover":case"mouseout":xn=null;break;case"pointerover":case"pointerout":mi.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":gi.delete(n.pointerId)}}function yi(t,n,o,a,c,f){return t===null||t.nativeEvent!==f?(t={blockedOn:n,domEventName:o,eventSystemFlags:a,nativeEvent:f,targetContainers:[c]},n!==null&&(n=Ri(n),n!==null&&Al(n)),t):(t.eventSystemFlags|=a,n=t.targetContainers,c!==null&&n.indexOf(c)===-1&&n.push(c),t)}function py(t,n,o,a,c){switch(n){case"focusin":return wn=yi(wn,t,n,o,a,c),!0;case"dragenter":return Cn=yi(Cn,t,n,o,a,c),!0;case"mouseover":return xn=yi(xn,t,n,o,a,c),!0;case"pointerover":var f=c.pointerId;return mi.set(f,yi(mi.get(f)||null,t,n,o,a,c)),!0;case"gotpointercapture":return f=c.pointerId,gi.set(f,yi(gi.get(f)||null,t,n,o,a,c)),!0}return!1}function gd(t){var n=Xn(t.target);if(n!==null){var o=Kn(n);if(o!==null){if(n=o.tag,n===13){if(n=td(o),n!==null){t.blockedOn=n,pd(t.priority,function(){fd(o)});return}}else if(n===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function As(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var o=jl(t.domEventName,t.eventSystemFlags,n[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var a=new o.constructor(o.type,o);kl=a,o.target.dispatchEvent(a),kl=null}else return n=Ri(o),n!==null&&Al(n),t.blockedOn=o,!1;n.shift()}return!0}function yd(t,n,o){As(t)&&o.delete(n)}function my(){Ll=!1,wn!==null&&As(wn)&&(wn=null),Cn!==null&&As(Cn)&&(Cn=null),xn!==null&&As(xn)&&(xn=null),mi.forEach(yd),gi.forEach(yd)}function vi(t,n){t.blockedOn===n&&(t.blockedOn=null,Ll||(Ll=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,my)))}function _i(t){function n(c){return vi(c,t)}if(0<Os.length){vi(Os[0],t);for(var o=1;o<Os.length;o++){var a=Os[o];a.blockedOn===t&&(a.blockedOn=null)}}for(wn!==null&&vi(wn,t),Cn!==null&&vi(Cn,t),xn!==null&&vi(xn,t),mi.forEach(n),gi.forEach(n),o=0;o<Sn.length;o++)a=Sn[o],a.blockedOn===t&&(a.blockedOn=null);for(;0<Sn.length&&(o=Sn[0],o.blockedOn===null);)gd(o),o.blockedOn===null&&Sn.shift()}var Cr=te.ReactCurrentBatchConfig,Ls=!0;function gy(t,n,o,a){var c=Ie,f=Cr.transition;Cr.transition=null;try{Ie=1,Fl(t,n,o,a)}finally{Ie=c,Cr.transition=f}}function yy(t,n,o,a){var c=Ie,f=Cr.transition;Cr.transition=null;try{Ie=4,Fl(t,n,o,a)}finally{Ie=c,Cr.transition=f}}function Fl(t,n,o,a){if(Ls){var c=jl(t,n,o,a);if(c===null)ta(t,n,a,Fs,o),md(t,a);else if(py(c,t,n,o,a))a.stopPropagation();else if(md(t,a),n&4&&-1<hy.indexOf(t)){for(;c!==null;){var f=Ri(c);if(f!==null&&dd(f),f=jl(t,n,o,a),f===null&&ta(t,n,a,Fs,o),f===c)break;c=f}c!==null&&a.stopPropagation()}else ta(t,n,a,null,o)}}var Fs=null;function jl(t,n,o,a){if(Fs=null,t=Nl(a),t=Xn(t),t!==null)if(n=Kn(t),n===null)t=null;else if(o=n.tag,o===13){if(t=td(n),t!==null)return t;t=null}else if(o===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null);return Fs=t,null}function vd(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(iy()){case Rl:return 1;case ld:return 4;case bs:case sy:return 16;case ad:return 536870912;default:return 16}default:return 16}}var En=null,zl=null,js=null;function _d(){if(js)return js;var t,n=zl,o=n.length,a,c="value"in En?En.value:En.textContent,f=c.length;for(t=0;t<o&&n[t]===c[t];t++);var p=o-t;for(a=1;a<=p&&n[o-a]===c[f-a];a++);return js=c.slice(t,1<a?1-a:void 0)}function zs(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function Ws(){return!0}function wd(){return!1}function It(t){function n(o,a,c,f,p){this._reactName=o,this._targetInst=c,this.type=a,this.nativeEvent=f,this.target=p,this.currentTarget=null;for(var v in t)t.hasOwnProperty(v)&&(o=t[v],this[v]=o?o(f):f[v]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Ws:wd,this.isPropagationStopped=wd,this}return B(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ws)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ws)},persist:function(){},isPersistent:Ws}),n}var xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wl=It(xr),wi=B({},xr,{view:0,detail:0}),vy=It(wi),Bl,Ul,Ci,Bs=B({},wi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$l,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ci&&(Ci&&t.type==="mousemove"?(Bl=t.screenX-Ci.screenX,Ul=t.screenY-Ci.screenY):Ul=Bl=0,Ci=t),Bl)},movementY:function(t){return"movementY"in t?t.movementY:Ul}}),Cd=It(Bs),_y=B({},Bs,{dataTransfer:0}),wy=It(_y),Cy=B({},wi,{relatedTarget:0}),Hl=It(Cy),xy=B({},xr,{animationName:0,elapsedTime:0,pseudoElement:0}),Sy=It(xy),Ey=B({},xr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ky=It(Ey),Ny=B({},xr,{data:0}),xd=It(Ny),Ty={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Iy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},by={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Py(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=by[t])?!!n[t]:!1}function $l(){return Py}var Ry=B({},wi,{key:function(t){if(t.key){var n=Ty[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=zs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Iy[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$l,charCode:function(t){return t.type==="keypress"?zs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?zs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),My=It(Ry),Dy=B({},Bs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sd=It(Dy),Oy=B({},wi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$l}),Ay=It(Oy),Ly=B({},xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fy=It(Ly),jy=B({},Bs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),zy=It(jy),Wy=[9,13,27,32],Vl=h&&"CompositionEvent"in window,xi=null;h&&"documentMode"in document&&(xi=document.documentMode);var By=h&&"TextEvent"in window&&!xi,Ed=h&&(!Vl||xi&&8<xi&&11>=xi),kd=" ",Nd=!1;function Td(t,n){switch(t){case"keyup":return Wy.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Id(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Sr=!1;function Uy(t,n){switch(t){case"compositionend":return Id(n);case"keypress":return n.which!==32?null:(Nd=!0,kd);case"textInput":return t=n.data,t===kd&&Nd?null:t;default:return null}}function Hy(t,n){if(Sr)return t==="compositionend"||!Vl&&Td(t,n)?(t=_d(),js=zl=En=null,Sr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Ed&&n.locale!=="ko"?null:n.data;default:return null}}var $y={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bd(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!$y[t.type]:n==="textarea"}function Pd(t,n,o,a){Kc(a),n=Gs(n,"onChange"),0<n.length&&(o=new Wl("onChange","change",null,o,a),t.push({event:o,listeners:n}))}var Si=null,Ei=null;function Vy(t){Qd(t,0)}function Us(t){var n=Ir(t);if(jc(n))return t}function Gy(t,n){if(t==="change")return n}var Rd=!1;if(h){var Gl;if(h){var Yl="oninput"in document;if(!Yl){var Md=document.createElement("div");Md.setAttribute("oninput","return;"),Yl=typeof Md.oninput=="function"}Gl=Yl}else Gl=!1;Rd=Gl&&(!document.documentMode||9<document.documentMode)}function Dd(){Si&&(Si.detachEvent("onpropertychange",Od),Ei=Si=null)}function Od(t){if(t.propertyName==="value"&&Us(Ei)){var n=[];Pd(n,Ei,t,Nl(t)),ed(Vy,n)}}function Yy(t,n,o){t==="focusin"?(Dd(),Si=n,Ei=o,Si.attachEvent("onpropertychange",Od)):t==="focusout"&&Dd()}function Qy(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Us(Ei)}function qy(t,n){if(t==="click")return Us(n)}function Ky(t,n){if(t==="input"||t==="change")return Us(n)}function Xy(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var zt=typeof Object.is=="function"?Object.is:Xy;function ki(t,n){if(zt(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var o=Object.keys(t),a=Object.keys(n);if(o.length!==a.length)return!1;for(a=0;a<o.length;a++){var c=o[a];if(!m.call(n,c)||!zt(t[c],n[c]))return!1}return!0}function Ad(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ld(t,n){var o=Ad(t);t=0;for(var a;o;){if(o.nodeType===3){if(a=t+o.textContent.length,t<=n&&a>=n)return{node:o,offset:n-t};t=a}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Ad(o)}}function Fd(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?Fd(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function jd(){for(var t=window,n=ks();n instanceof t.HTMLIFrameElement;){try{var o=typeof n.contentWindow.location.href=="string"}catch{o=!1}if(o)t=n.contentWindow;else break;n=ks(t.document)}return n}function Ql(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}function Jy(t){var n=jd(),o=t.focusedElem,a=t.selectionRange;if(n!==o&&o&&o.ownerDocument&&Fd(o.ownerDocument.documentElement,o)){if(a!==null&&Ql(o)){if(n=a.start,t=a.end,t===void 0&&(t=n),"selectionStart"in o)o.selectionStart=n,o.selectionEnd=Math.min(t,o.value.length);else if(t=(n=o.ownerDocument||document)&&n.defaultView||window,t.getSelection){t=t.getSelection();var c=o.textContent.length,f=Math.min(a.start,c);a=a.end===void 0?f:Math.min(a.end,c),!t.extend&&f>a&&(c=a,a=f,f=c),c=Ld(o,f);var p=Ld(o,a);c&&p&&(t.rangeCount!==1||t.anchorNode!==c.node||t.anchorOffset!==c.offset||t.focusNode!==p.node||t.focusOffset!==p.offset)&&(n=n.createRange(),n.setStart(c.node,c.offset),t.removeAllRanges(),f>a?(t.addRange(n),t.extend(p.node,p.offset)):(n.setEnd(p.node,p.offset),t.addRange(n)))}}for(n=[],t=o;t=t.parentNode;)t.nodeType===1&&n.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<n.length;o++)t=n[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Zy=h&&"documentMode"in document&&11>=document.documentMode,Er=null,ql=null,Ni=null,Kl=!1;function zd(t,n,o){var a=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Kl||Er==null||Er!==ks(a)||(a=Er,"selectionStart"in a&&Ql(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Ni&&ki(Ni,a)||(Ni=a,a=Gs(ql,"onSelect"),0<a.length&&(n=new Wl("onSelect","select",null,n,o),t.push({event:n,listeners:a}),n.target=Er)))}function Hs(t,n){var o={};return o[t.toLowerCase()]=n.toLowerCase(),o["Webkit"+t]="webkit"+n,o["Moz"+t]="moz"+n,o}var kr={animationend:Hs("Animation","AnimationEnd"),animationiteration:Hs("Animation","AnimationIteration"),animationstart:Hs("Animation","AnimationStart"),transitionend:Hs("Transition","TransitionEnd")},Xl={},Wd={};h&&(Wd=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);function $s(t){if(Xl[t])return Xl[t];if(!kr[t])return t;var n=kr[t],o;for(o in n)if(n.hasOwnProperty(o)&&o in Wd)return Xl[t]=n[o];return t}var Bd=$s("animationend"),Ud=$s("animationiteration"),Hd=$s("animationstart"),$d=$s("transitionend"),Vd=new Map,Gd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kn(t,n){Vd.set(t,n),u(n,[t])}for(var Jl=0;Jl<Gd.length;Jl++){var Zl=Gd[Jl],ev=Zl.toLowerCase(),tv=Zl[0].toUpperCase()+Zl.slice(1);kn(ev,"on"+tv)}kn(Bd,"onAnimationEnd"),kn(Ud,"onAnimationIteration"),kn(Hd,"onAnimationStart"),kn("dblclick","onDoubleClick"),kn("focusin","onFocus"),kn("focusout","onBlur"),kn($d,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ti="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nv=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ti));function Yd(t,n,o){var a=t.type||"unknown-event";t.currentTarget=o,ey(a,n,void 0,t),t.currentTarget=null}function Qd(t,n){n=(n&4)!==0;for(var o=0;o<t.length;o++){var a=t[o],c=a.event;a=a.listeners;e:{var f=void 0;if(n)for(var p=a.length-1;0<=p;p--){var v=a[p],C=v.instance,T=v.currentTarget;if(v=v.listener,C!==f&&c.isPropagationStopped())break e;Yd(c,v,T),f=C}else for(p=0;p<a.length;p++){if(v=a[p],C=v.instance,T=v.currentTarget,v=v.listener,C!==f&&c.isPropagationStopped())break e;Yd(c,v,T),f=C}}}if(Is)throw t=Pl,Is=!1,Pl=null,t}function Ae(t,n){var o=n[la];o===void 0&&(o=n[la]=new Set);var a=t+"__bubble";o.has(a)||(qd(n,t,2,!1),o.add(a))}function ea(t,n,o){var a=0;n&&(a|=4),qd(o,t,a,n)}var Vs="_reactListening"+Math.random().toString(36).slice(2);function Ii(t){if(!t[Vs]){t[Vs]=!0,s.forEach(function(o){o!=="selectionchange"&&(nv.has(o)||ea(o,!1,t),ea(o,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Vs]||(n[Vs]=!0,ea("selectionchange",!1,n))}}function qd(t,n,o,a){switch(vd(n)){case 1:var c=gy;break;case 4:c=yy;break;default:c=Fl}o=c.bind(null,n,o,t),c=void 0,!bl||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(c=!0),a?c!==void 0?t.addEventListener(n,o,{capture:!0,passive:c}):t.addEventListener(n,o,!0):c!==void 0?t.addEventListener(n,o,{passive:c}):t.addEventListener(n,o,!1)}function ta(t,n,o,a,c){var f=a;if(!(n&1)&&!(n&2)&&a!==null)e:for(;;){if(a===null)return;var p=a.tag;if(p===3||p===4){var v=a.stateNode.containerInfo;if(v===c||v.nodeType===8&&v.parentNode===c)break;if(p===4)for(p=a.return;p!==null;){var C=p.tag;if((C===3||C===4)&&(C=p.stateNode.containerInfo,C===c||C.nodeType===8&&C.parentNode===c))return;p=p.return}for(;v!==null;){if(p=Xn(v),p===null)return;if(C=p.tag,C===5||C===6){a=f=p;continue e}v=v.parentNode}}a=a.return}ed(function(){var T=f,M=Nl(o),O=[];e:{var R=Vd.get(t);if(R!==void 0){var U=Wl,G=t;switch(t){case"keypress":if(zs(o)===0)break e;case"keydown":case"keyup":U=My;break;case"focusin":G="focus",U=Hl;break;case"focusout":G="blur",U=Hl;break;case"beforeblur":case"afterblur":U=Hl;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":U=Cd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":U=wy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":U=Ay;break;case Bd:case Ud:case Hd:U=Sy;break;case $d:U=Fy;break;case"scroll":U=vy;break;case"wheel":U=zy;break;case"copy":case"cut":case"paste":U=ky;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":U=Sd}var Y=(n&4)!==0,Ge=!Y&&t==="scroll",k=Y?R!==null?R+"Capture":null:R;Y=[];for(var S=T,N;S!==null;){N=S;var A=N.stateNode;if(N.tag===5&&A!==null&&(N=A,k!==null&&(A=ci(S,k),A!=null&&Y.push(bi(S,A,N)))),Ge)break;S=S.return}0<Y.length&&(R=new U(R,G,null,o,M),O.push({event:R,listeners:Y}))}}if(!(n&7)){e:{if(R=t==="mouseover"||t==="pointerover",U=t==="mouseout"||t==="pointerout",R&&o!==kl&&(G=o.relatedTarget||o.fromElement)&&(Xn(G)||G[sn]))break e;if((U||R)&&(R=M.window===M?M:(R=M.ownerDocument)?R.defaultView||R.parentWindow:window,U?(G=o.relatedTarget||o.toElement,U=T,G=G?Xn(G):null,G!==null&&(Ge=Kn(G),G!==Ge||G.tag!==5&&G.tag!==6)&&(G=null)):(U=null,G=T),U!==G)){if(Y=Cd,A="onMouseLeave",k="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(Y=Sd,A="onPointerLeave",k="onPointerEnter",S="pointer"),Ge=U==null?R:Ir(U),N=G==null?R:Ir(G),R=new Y(A,S+"leave",U,o,M),R.target=Ge,R.relatedTarget=N,A=null,Xn(M)===T&&(Y=new Y(k,S+"enter",G,o,M),Y.target=N,Y.relatedTarget=Ge,A=Y),Ge=A,U&&G)t:{for(Y=U,k=G,S=0,N=Y;N;N=Nr(N))S++;for(N=0,A=k;A;A=Nr(A))N++;for(;0<S-N;)Y=Nr(Y),S--;for(;0<N-S;)k=Nr(k),N--;for(;S--;){if(Y===k||k!==null&&Y===k.alternate)break t;Y=Nr(Y),k=Nr(k)}Y=null}else Y=null;U!==null&&Kd(O,R,U,Y,!1),G!==null&&Ge!==null&&Kd(O,Ge,G,Y,!0)}}e:{if(R=T?Ir(T):window,U=R.nodeName&&R.nodeName.toLowerCase(),U==="select"||U==="input"&&R.type==="file")var Q=Gy;else if(bd(R))if(Rd)Q=Ky;else{Q=Qy;var Z=Yy}else(U=R.nodeName)&&U.toLowerCase()==="input"&&(R.type==="checkbox"||R.type==="radio")&&(Q=qy);if(Q&&(Q=Q(t,T))){Pd(O,Q,o,M);break e}Z&&Z(t,R,T),t==="focusout"&&(Z=R._wrapperState)&&Z.controlled&&R.type==="number"&&wl(R,"number",R.value)}switch(Z=T?Ir(T):window,t){case"focusin":(bd(Z)||Z.contentEditable==="true")&&(Er=Z,ql=T,Ni=null);break;case"focusout":Ni=ql=Er=null;break;case"mousedown":Kl=!0;break;case"contextmenu":case"mouseup":case"dragend":Kl=!1,zd(O,o,M);break;case"selectionchange":if(Zy)break;case"keydown":case"keyup":zd(O,o,M)}var ee;if(Vl)e:{switch(t){case"compositionstart":var re="onCompositionStart";break e;case"compositionend":re="onCompositionEnd";break e;case"compositionupdate":re="onCompositionUpdate";break e}re=void 0}else Sr?Td(t,o)&&(re="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(re="onCompositionStart");re&&(Ed&&o.locale!=="ko"&&(Sr||re!=="onCompositionStart"?re==="onCompositionEnd"&&Sr&&(ee=_d()):(En=M,zl="value"in En?En.value:En.textContent,Sr=!0)),Z=Gs(T,re),0<Z.length&&(re=new xd(re,t,null,o,M),O.push({event:re,listeners:Z}),ee?re.data=ee:(ee=Id(o),ee!==null&&(re.data=ee)))),(ee=By?Uy(t,o):Hy(t,o))&&(T=Gs(T,"onBeforeInput"),0<T.length&&(M=new xd("onBeforeInput","beforeinput",null,o,M),O.push({event:M,listeners:T}),M.data=ee))}Qd(O,n)})}function bi(t,n,o){return{instance:t,listener:n,currentTarget:o}}function Gs(t,n){for(var o=n+"Capture",a=[];t!==null;){var c=t,f=c.stateNode;c.tag===5&&f!==null&&(c=f,f=ci(t,o),f!=null&&a.unshift(bi(t,f,c)),f=ci(t,n),f!=null&&a.push(bi(t,f,c))),t=t.return}return a}function Nr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Kd(t,n,o,a,c){for(var f=n._reactName,p=[];o!==null&&o!==a;){var v=o,C=v.alternate,T=v.stateNode;if(C!==null&&C===a)break;v.tag===5&&T!==null&&(v=T,c?(C=ci(o,f),C!=null&&p.unshift(bi(o,C,v))):c||(C=ci(o,f),C!=null&&p.push(bi(o,C,v)))),o=o.return}p.length!==0&&t.push({event:n,listeners:p})}var rv=/\r\n?/g,iv=/\u0000|\uFFFD/g;function Xd(t){return(typeof t=="string"?t:""+t).replace(rv,`
`).replace(iv,"")}function Ys(t,n,o){if(n=Xd(n),Xd(t)!==n&&o)throw Error(r(425))}function Qs(){}var na=null,ra=null;function ia(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var sa=typeof setTimeout=="function"?setTimeout:void 0,sv=typeof clearTimeout=="function"?clearTimeout:void 0,Jd=typeof Promise=="function"?Promise:void 0,ov=typeof queueMicrotask=="function"?queueMicrotask:typeof Jd<"u"?function(t){return Jd.resolve(null).then(t).catch(lv)}:sa;function lv(t){setTimeout(function(){throw t})}function oa(t,n){var o=n,a=0;do{var c=o.nextSibling;if(t.removeChild(o),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(a===0){t.removeChild(c),_i(n);return}a--}else o!=="$"&&o!=="$?"&&o!=="$!"||a++;o=c}while(o);_i(n)}function Nn(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return t}function Zd(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(n===0)return t;n--}else o==="/$"&&n++}t=t.previousSibling}return null}var Tr=Math.random().toString(36).slice(2),Xt="__reactFiber$"+Tr,Pi="__reactProps$"+Tr,sn="__reactContainer$"+Tr,la="__reactEvents$"+Tr,av="__reactListeners$"+Tr,uv="__reactHandles$"+Tr;function Xn(t){var n=t[Xt];if(n)return n;for(var o=t.parentNode;o;){if(n=o[sn]||o[Xt]){if(o=n.alternate,n.child!==null||o!==null&&o.child!==null)for(t=Zd(t);t!==null;){if(o=t[Xt])return o;t=Zd(t)}return n}t=o,o=t.parentNode}return null}function Ri(t){return t=t[Xt]||t[sn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ir(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(r(33))}function qs(t){return t[Pi]||null}var aa=[],br=-1;function Tn(t){return{current:t}}function Le(t){0>br||(t.current=aa[br],aa[br]=null,br--)}function Me(t,n){br++,aa[br]=t.current,t.current=n}var In={},at=Tn(In),vt=Tn(!1),Jn=In;function Pr(t,n){var o=t.type.contextTypes;if(!o)return In;var a=t.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===n)return a.__reactInternalMemoizedMaskedChildContext;var c={},f;for(f in o)c[f]=n[f];return a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=c),c}function _t(t){return t=t.childContextTypes,t!=null}function Ks(){Le(vt),Le(at)}function ef(t,n,o){if(at.current!==In)throw Error(r(168));Me(at,n),Me(vt,o)}function tf(t,n,o){var a=t.stateNode;if(n=n.childContextTypes,typeof a.getChildContext!="function")return o;a=a.getChildContext();for(var c in a)if(!(c in n))throw Error(r(108,ie(t)||"Unknown",c));return B({},o,a)}function Xs(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||In,Jn=at.current,Me(at,t),Me(vt,vt.current),!0}function nf(t,n,o){var a=t.stateNode;if(!a)throw Error(r(169));o?(t=tf(t,n,Jn),a.__reactInternalMemoizedMergedChildContext=t,Le(vt),Le(at),Me(at,t)):Le(vt),Me(vt,o)}var on=null,Js=!1,ua=!1;function rf(t){on===null?on=[t]:on.push(t)}function cv(t){Js=!0,rf(t)}function bn(){if(!ua&&on!==null){ua=!0;var t=0,n=Ie;try{var o=on;for(Ie=1;t<o.length;t++){var a=o[t];do a=a(!0);while(a!==null)}on=null,Js=!1}catch(c){throw on!==null&&(on=on.slice(t+1)),sd(Rl,bn),c}finally{Ie=n,ua=!1}}return null}var Rr=[],Mr=0,Zs=null,eo=0,Mt=[],Dt=0,Zn=null,ln=1,an="";function er(t,n){Rr[Mr++]=eo,Rr[Mr++]=Zs,Zs=t,eo=n}function sf(t,n,o){Mt[Dt++]=ln,Mt[Dt++]=an,Mt[Dt++]=Zn,Zn=t;var a=ln;t=an;var c=32-jt(a)-1;a&=~(1<<c),o+=1;var f=32-jt(n)+c;if(30<f){var p=c-c%5;f=(a&(1<<p)-1).toString(32),a>>=p,c-=p,ln=1<<32-jt(n)+c|o<<c|a,an=f+t}else ln=1<<f|o<<c|a,an=t}function ca(t){t.return!==null&&(er(t,1),sf(t,1,0))}function da(t){for(;t===Zs;)Zs=Rr[--Mr],Rr[Mr]=null,eo=Rr[--Mr],Rr[Mr]=null;for(;t===Zn;)Zn=Mt[--Dt],Mt[Dt]=null,an=Mt[--Dt],Mt[Dt]=null,ln=Mt[--Dt],Mt[Dt]=null}var bt=null,Pt=null,We=!1,Wt=null;function of(t,n){var o=Ft(5,null,null,0);o.elementType="DELETED",o.stateNode=n,o.return=t,n=t.deletions,n===null?(t.deletions=[o],t.flags|=16):n.push(o)}function lf(t,n){switch(t.tag){case 5:var o=t.type;return n=n.nodeType!==1||o.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(t.stateNode=n,bt=t,Pt=Nn(n.firstChild),!0):!1;case 6:return n=t.pendingProps===""||n.nodeType!==3?null:n,n!==null?(t.stateNode=n,bt=t,Pt=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(o=Zn!==null?{id:ln,overflow:an}:null,t.memoizedState={dehydrated:n,treeContext:o,retryLane:1073741824},o=Ft(18,null,null,0),o.stateNode=n,o.return=t,t.child=o,bt=t,Pt=null,!0):!1;default:return!1}}function fa(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ha(t){if(We){var n=Pt;if(n){var o=n;if(!lf(t,n)){if(fa(t))throw Error(r(418));n=Nn(o.nextSibling);var a=bt;n&&lf(t,n)?of(a,o):(t.flags=t.flags&-4097|2,We=!1,bt=t)}}else{if(fa(t))throw Error(r(418));t.flags=t.flags&-4097|2,We=!1,bt=t}}}function af(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;bt=t}function to(t){if(t!==bt)return!1;if(!We)return af(t),We=!0,!1;var n;if((n=t.tag!==3)&&!(n=t.tag!==5)&&(n=t.type,n=n!=="head"&&n!=="body"&&!ia(t.type,t.memoizedProps)),n&&(n=Pt)){if(fa(t))throw uf(),Error(r(418));for(;n;)of(t,n),n=Nn(n.nextSibling)}if(af(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(n===0){Pt=Nn(t.nextSibling);break e}n--}else o!=="$"&&o!=="$!"&&o!=="$?"||n++}t=t.nextSibling}Pt=null}}else Pt=bt?Nn(t.stateNode.nextSibling):null;return!0}function uf(){for(var t=Pt;t;)t=Nn(t.nextSibling)}function Dr(){Pt=bt=null,We=!1}function pa(t){Wt===null?Wt=[t]:Wt.push(t)}var dv=te.ReactCurrentBatchConfig;function Mi(t,n,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(r(309));var a=o.stateNode}if(!a)throw Error(r(147,t));var c=a,f=""+t;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===f?n.ref:(n=function(p){var v=c.refs;p===null?delete v[f]:v[f]=p},n._stringRef=f,n)}if(typeof t!="string")throw Error(r(284));if(!o._owner)throw Error(r(290,t))}return t}function no(t,n){throw t=Object.prototype.toString.call(n),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}function cf(t){var n=t._init;return n(t._payload)}function df(t){function n(k,S){if(t){var N=k.deletions;N===null?(k.deletions=[S],k.flags|=16):N.push(S)}}function o(k,S){if(!t)return null;for(;S!==null;)n(k,S),S=S.sibling;return null}function a(k,S){for(k=new Map;S!==null;)S.key!==null?k.set(S.key,S):k.set(S.index,S),S=S.sibling;return k}function c(k,S){return k=Fn(k,S),k.index=0,k.sibling=null,k}function f(k,S,N){return k.index=N,t?(N=k.alternate,N!==null?(N=N.index,N<S?(k.flags|=2,S):N):(k.flags|=2,S)):(k.flags|=1048576,S)}function p(k){return t&&k.alternate===null&&(k.flags|=2),k}function v(k,S,N,A){return S===null||S.tag!==6?(S=su(N,k.mode,A),S.return=k,S):(S=c(S,N),S.return=k,S)}function C(k,S,N,A){var Q=N.type;return Q===_e?M(k,S,N.props.children,A,N.key):S!==null&&(S.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===Ne&&cf(Q)===S.type)?(A=c(S,N.props),A.ref=Mi(k,S,N),A.return=k,A):(A=To(N.type,N.key,N.props,null,k.mode,A),A.ref=Mi(k,S,N),A.return=k,A)}function T(k,S,N,A){return S===null||S.tag!==4||S.stateNode.containerInfo!==N.containerInfo||S.stateNode.implementation!==N.implementation?(S=ou(N,k.mode,A),S.return=k,S):(S=c(S,N.children||[]),S.return=k,S)}function M(k,S,N,A,Q){return S===null||S.tag!==7?(S=ar(N,k.mode,A,Q),S.return=k,S):(S=c(S,N),S.return=k,S)}function O(k,S,N){if(typeof S=="string"&&S!==""||typeof S=="number")return S=su(""+S,k.mode,N),S.return=k,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case K:return N=To(S.type,S.key,S.props,null,k.mode,N),N.ref=Mi(k,null,S),N.return=k,N;case se:return S=ou(S,k.mode,N),S.return=k,S;case Ne:var A=S._init;return O(k,A(S._payload),N)}if(li(S)||X(S))return S=ar(S,k.mode,N,null),S.return=k,S;no(k,S)}return null}function R(k,S,N,A){var Q=S!==null?S.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return Q!==null?null:v(k,S,""+N,A);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case K:return N.key===Q?C(k,S,N,A):null;case se:return N.key===Q?T(k,S,N,A):null;case Ne:return Q=N._init,R(k,S,Q(N._payload),A)}if(li(N)||X(N))return Q!==null?null:M(k,S,N,A,null);no(k,N)}return null}function U(k,S,N,A,Q){if(typeof A=="string"&&A!==""||typeof A=="number")return k=k.get(N)||null,v(S,k,""+A,Q);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case K:return k=k.get(A.key===null?N:A.key)||null,C(S,k,A,Q);case se:return k=k.get(A.key===null?N:A.key)||null,T(S,k,A,Q);case Ne:var Z=A._init;return U(k,S,N,Z(A._payload),Q)}if(li(A)||X(A))return k=k.get(N)||null,M(S,k,A,Q,null);no(S,A)}return null}function G(k,S,N,A){for(var Q=null,Z=null,ee=S,re=S=0,et=null;ee!==null&&re<N.length;re++){ee.index>re?(et=ee,ee=null):et=ee.sibling;var Ee=R(k,ee,N[re],A);if(Ee===null){ee===null&&(ee=et);break}t&&ee&&Ee.alternate===null&&n(k,ee),S=f(Ee,S,re),Z===null?Q=Ee:Z.sibling=Ee,Z=Ee,ee=et}if(re===N.length)return o(k,ee),We&&er(k,re),Q;if(ee===null){for(;re<N.length;re++)ee=O(k,N[re],A),ee!==null&&(S=f(ee,S,re),Z===null?Q=ee:Z.sibling=ee,Z=ee);return We&&er(k,re),Q}for(ee=a(k,ee);re<N.length;re++)et=U(ee,k,re,N[re],A),et!==null&&(t&&et.alternate!==null&&ee.delete(et.key===null?re:et.key),S=f(et,S,re),Z===null?Q=et:Z.sibling=et,Z=et);return t&&ee.forEach(function(jn){return n(k,jn)}),We&&er(k,re),Q}function Y(k,S,N,A){var Q=X(N);if(typeof Q!="function")throw Error(r(150));if(N=Q.call(N),N==null)throw Error(r(151));for(var Z=Q=null,ee=S,re=S=0,et=null,Ee=N.next();ee!==null&&!Ee.done;re++,Ee=N.next()){ee.index>re?(et=ee,ee=null):et=ee.sibling;var jn=R(k,ee,Ee.value,A);if(jn===null){ee===null&&(ee=et);break}t&&ee&&jn.alternate===null&&n(k,ee),S=f(jn,S,re),Z===null?Q=jn:Z.sibling=jn,Z=jn,ee=et}if(Ee.done)return o(k,ee),We&&er(k,re),Q;if(ee===null){for(;!Ee.done;re++,Ee=N.next())Ee=O(k,Ee.value,A),Ee!==null&&(S=f(Ee,S,re),Z===null?Q=Ee:Z.sibling=Ee,Z=Ee);return We&&er(k,re),Q}for(ee=a(k,ee);!Ee.done;re++,Ee=N.next())Ee=U(ee,k,re,Ee.value,A),Ee!==null&&(t&&Ee.alternate!==null&&ee.delete(Ee.key===null?re:Ee.key),S=f(Ee,S,re),Z===null?Q=Ee:Z.sibling=Ee,Z=Ee);return t&&ee.forEach(function($v){return n(k,$v)}),We&&er(k,re),Q}function Ge(k,S,N,A){if(typeof N=="object"&&N!==null&&N.type===_e&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case K:e:{for(var Q=N.key,Z=S;Z!==null;){if(Z.key===Q){if(Q=N.type,Q===_e){if(Z.tag===7){o(k,Z.sibling),S=c(Z,N.props.children),S.return=k,k=S;break e}}else if(Z.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===Ne&&cf(Q)===Z.type){o(k,Z.sibling),S=c(Z,N.props),S.ref=Mi(k,Z,N),S.return=k,k=S;break e}o(k,Z);break}else n(k,Z);Z=Z.sibling}N.type===_e?(S=ar(N.props.children,k.mode,A,N.key),S.return=k,k=S):(A=To(N.type,N.key,N.props,null,k.mode,A),A.ref=Mi(k,S,N),A.return=k,k=A)}return p(k);case se:e:{for(Z=N.key;S!==null;){if(S.key===Z)if(S.tag===4&&S.stateNode.containerInfo===N.containerInfo&&S.stateNode.implementation===N.implementation){o(k,S.sibling),S=c(S,N.children||[]),S.return=k,k=S;break e}else{o(k,S);break}else n(k,S);S=S.sibling}S=ou(N,k.mode,A),S.return=k,k=S}return p(k);case Ne:return Z=N._init,Ge(k,S,Z(N._payload),A)}if(li(N))return G(k,S,N,A);if(X(N))return Y(k,S,N,A);no(k,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,S!==null&&S.tag===6?(o(k,S.sibling),S=c(S,N),S.return=k,k=S):(o(k,S),S=su(N,k.mode,A),S.return=k,k=S),p(k)):o(k,S)}return Ge}var Or=df(!0),ff=df(!1),ro=Tn(null),io=null,Ar=null,ma=null;function ga(){ma=Ar=io=null}function ya(t){var n=ro.current;Le(ro),t._currentValue=n}function va(t,n,o){for(;t!==null;){var a=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,a!==null&&(a.childLanes|=n)):a!==null&&(a.childLanes&n)!==n&&(a.childLanes|=n),t===o)break;t=t.return}}function Lr(t,n){io=t,ma=Ar=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&n&&(wt=!0),t.firstContext=null)}function Ot(t){var n=t._currentValue;if(ma!==t)if(t={context:t,memoizedValue:n,next:null},Ar===null){if(io===null)throw Error(r(308));Ar=t,io.dependencies={lanes:0,firstContext:t}}else Ar=Ar.next=t;return n}var tr=null;function _a(t){tr===null?tr=[t]:tr.push(t)}function hf(t,n,o,a){var c=n.interleaved;return c===null?(o.next=o,_a(n)):(o.next=c.next,c.next=o),n.interleaved=o,un(t,a)}function un(t,n){t.lanes|=n;var o=t.alternate;for(o!==null&&(o.lanes|=n),o=t,t=t.return;t!==null;)t.childLanes|=n,o=t.alternate,o!==null&&(o.childLanes|=n),o=t,t=t.return;return o.tag===3?o.stateNode:null}var Pn=!1;function wa(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pf(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function cn(t,n){return{eventTime:t,lane:n,tag:0,payload:null,callback:null,next:null}}function Rn(t,n,o){var a=t.updateQueue;if(a===null)return null;if(a=a.shared,Se&2){var c=a.pending;return c===null?n.next=n:(n.next=c.next,c.next=n),a.pending=n,un(t,o)}return c=a.interleaved,c===null?(n.next=n,_a(a)):(n.next=c.next,c.next=n),a.interleaved=n,un(t,o)}function so(t,n,o){if(n=n.updateQueue,n!==null&&(n=n.shared,(o&4194240)!==0)){var a=n.lanes;a&=t.pendingLanes,o|=a,n.lanes=o,Ol(t,o)}}function mf(t,n){var o=t.updateQueue,a=t.alternate;if(a!==null&&(a=a.updateQueue,o===a)){var c=null,f=null;if(o=o.firstBaseUpdate,o!==null){do{var p={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};f===null?c=f=p:f=f.next=p,o=o.next}while(o!==null);f===null?c=f=n:f=f.next=n}else c=f=n;o={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:a.shared,effects:a.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=n:t.next=n,o.lastBaseUpdate=n}function oo(t,n,o,a){var c=t.updateQueue;Pn=!1;var f=c.firstBaseUpdate,p=c.lastBaseUpdate,v=c.shared.pending;if(v!==null){c.shared.pending=null;var C=v,T=C.next;C.next=null,p===null?f=T:p.next=T,p=C;var M=t.alternate;M!==null&&(M=M.updateQueue,v=M.lastBaseUpdate,v!==p&&(v===null?M.firstBaseUpdate=T:v.next=T,M.lastBaseUpdate=C))}if(f!==null){var O=c.baseState;p=0,M=T=C=null,v=f;do{var R=v.lane,U=v.eventTime;if((a&R)===R){M!==null&&(M=M.next={eventTime:U,lane:0,tag:v.tag,payload:v.payload,callback:v.callback,next:null});e:{var G=t,Y=v;switch(R=n,U=o,Y.tag){case 1:if(G=Y.payload,typeof G=="function"){O=G.call(U,O,R);break e}O=G;break e;case 3:G.flags=G.flags&-65537|128;case 0:if(G=Y.payload,R=typeof G=="function"?G.call(U,O,R):G,R==null)break e;O=B({},O,R);break e;case 2:Pn=!0}}v.callback!==null&&v.lane!==0&&(t.flags|=64,R=c.effects,R===null?c.effects=[v]:R.push(v))}else U={eventTime:U,lane:R,tag:v.tag,payload:v.payload,callback:v.callback,next:null},M===null?(T=M=U,C=O):M=M.next=U,p|=R;if(v=v.next,v===null){if(v=c.shared.pending,v===null)break;R=v,v=R.next,R.next=null,c.lastBaseUpdate=R,c.shared.pending=null}}while(!0);if(M===null&&(C=O),c.baseState=C,c.firstBaseUpdate=T,c.lastBaseUpdate=M,n=c.shared.interleaved,n!==null){c=n;do p|=c.lane,c=c.next;while(c!==n)}else f===null&&(c.shared.lanes=0);ir|=p,t.lanes=p,t.memoizedState=O}}function gf(t,n,o){if(t=n.effects,n.effects=null,t!==null)for(n=0;n<t.length;n++){var a=t[n],c=a.callback;if(c!==null){if(a.callback=null,a=o,typeof c!="function")throw Error(r(191,c));c.call(a)}}}var Di={},Jt=Tn(Di),Oi=Tn(Di),Ai=Tn(Di);function nr(t){if(t===Di)throw Error(r(174));return t}function Ca(t,n){switch(Me(Ai,n),Me(Oi,t),Me(Jt,Di),t=n.nodeType,t){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:xl(null,"");break;default:t=t===8?n.parentNode:n,n=t.namespaceURI||null,t=t.tagName,n=xl(n,t)}Le(Jt),Me(Jt,n)}function Fr(){Le(Jt),Le(Oi),Le(Ai)}function yf(t){nr(Ai.current);var n=nr(Jt.current),o=xl(n,t.type);n!==o&&(Me(Oi,t),Me(Jt,o))}function xa(t){Oi.current===t&&(Le(Jt),Le(Oi))}var Be=Tn(0);function lo(t){for(var n=t;n!==null;){if(n.tag===13){var o=n.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Sa=[];function Ea(){for(var t=0;t<Sa.length;t++)Sa[t]._workInProgressVersionPrimary=null;Sa.length=0}var ao=te.ReactCurrentDispatcher,ka=te.ReactCurrentBatchConfig,rr=0,Ue=null,Qe=null,Je=null,uo=!1,Li=!1,Fi=0,fv=0;function ut(){throw Error(r(321))}function Na(t,n){if(n===null)return!1;for(var o=0;o<n.length&&o<t.length;o++)if(!zt(t[o],n[o]))return!1;return!0}function Ta(t,n,o,a,c,f){if(rr=f,Ue=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,ao.current=t===null||t.memoizedState===null?gv:yv,t=o(a,c),Li){f=0;do{if(Li=!1,Fi=0,25<=f)throw Error(r(301));f+=1,Je=Qe=null,n.updateQueue=null,ao.current=vv,t=o(a,c)}while(Li)}if(ao.current=ho,n=Qe!==null&&Qe.next!==null,rr=0,Je=Qe=Ue=null,uo=!1,n)throw Error(r(300));return t}function Ia(){var t=Fi!==0;return Fi=0,t}function Zt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?Ue.memoizedState=Je=t:Je=Je.next=t,Je}function At(){if(Qe===null){var t=Ue.alternate;t=t!==null?t.memoizedState:null}else t=Qe.next;var n=Je===null?Ue.memoizedState:Je.next;if(n!==null)Je=n,Qe=t;else{if(t===null)throw Error(r(310));Qe=t,t={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},Je===null?Ue.memoizedState=Je=t:Je=Je.next=t}return Je}function ji(t,n){return typeof n=="function"?n(t):n}function ba(t){var n=At(),o=n.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=t;var a=Qe,c=a.baseQueue,f=o.pending;if(f!==null){if(c!==null){var p=c.next;c.next=f.next,f.next=p}a.baseQueue=c=f,o.pending=null}if(c!==null){f=c.next,a=a.baseState;var v=p=null,C=null,T=f;do{var M=T.lane;if((rr&M)===M)C!==null&&(C=C.next={lane:0,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null}),a=T.hasEagerState?T.eagerState:t(a,T.action);else{var O={lane:M,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null};C===null?(v=C=O,p=a):C=C.next=O,Ue.lanes|=M,ir|=M}T=T.next}while(T!==null&&T!==f);C===null?p=a:C.next=v,zt(a,n.memoizedState)||(wt=!0),n.memoizedState=a,n.baseState=p,n.baseQueue=C,o.lastRenderedState=a}if(t=o.interleaved,t!==null){c=t;do f=c.lane,Ue.lanes|=f,ir|=f,c=c.next;while(c!==t)}else c===null&&(o.lanes=0);return[n.memoizedState,o.dispatch]}function Pa(t){var n=At(),o=n.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=t;var a=o.dispatch,c=o.pending,f=n.memoizedState;if(c!==null){o.pending=null;var p=c=c.next;do f=t(f,p.action),p=p.next;while(p!==c);zt(f,n.memoizedState)||(wt=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),o.lastRenderedState=f}return[f,a]}function vf(){}function _f(t,n){var o=Ue,a=At(),c=n(),f=!zt(a.memoizedState,c);if(f&&(a.memoizedState=c,wt=!0),a=a.queue,Ra(xf.bind(null,o,a,t),[t]),a.getSnapshot!==n||f||Je!==null&&Je.memoizedState.tag&1){if(o.flags|=2048,zi(9,Cf.bind(null,o,a,c,n),void 0,null),Ze===null)throw Error(r(349));rr&30||wf(o,n,c)}return c}function wf(t,n,o){t.flags|=16384,t={getSnapshot:n,value:o},n=Ue.updateQueue,n===null?(n={lastEffect:null,stores:null},Ue.updateQueue=n,n.stores=[t]):(o=n.stores,o===null?n.stores=[t]:o.push(t))}function Cf(t,n,o,a){n.value=o,n.getSnapshot=a,Sf(n)&&Ef(t)}function xf(t,n,o){return o(function(){Sf(n)&&Ef(t)})}function Sf(t){var n=t.getSnapshot;t=t.value;try{var o=n();return!zt(t,o)}catch{return!0}}function Ef(t){var n=un(t,1);n!==null&&$t(n,t,1,-1)}function kf(t){var n=Zt();return typeof t=="function"&&(t=t()),n.memoizedState=n.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:t},n.queue=t,t=t.dispatch=mv.bind(null,Ue,t),[n.memoizedState,t]}function zi(t,n,o,a){return t={tag:t,create:n,destroy:o,deps:a,next:null},n=Ue.updateQueue,n===null?(n={lastEffect:null,stores:null},Ue.updateQueue=n,n.lastEffect=t.next=t):(o=n.lastEffect,o===null?n.lastEffect=t.next=t:(a=o.next,o.next=t,t.next=a,n.lastEffect=t)),t}function Nf(){return At().memoizedState}function co(t,n,o,a){var c=Zt();Ue.flags|=t,c.memoizedState=zi(1|n,o,void 0,a===void 0?null:a)}function fo(t,n,o,a){var c=At();a=a===void 0?null:a;var f=void 0;if(Qe!==null){var p=Qe.memoizedState;if(f=p.destroy,a!==null&&Na(a,p.deps)){c.memoizedState=zi(n,o,f,a);return}}Ue.flags|=t,c.memoizedState=zi(1|n,o,f,a)}function Tf(t,n){return co(8390656,8,t,n)}function Ra(t,n){return fo(2048,8,t,n)}function If(t,n){return fo(4,2,t,n)}function bf(t,n){return fo(4,4,t,n)}function Pf(t,n){if(typeof n=="function")return t=t(),n(t),function(){n(null)};if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function Rf(t,n,o){return o=o!=null?o.concat([t]):null,fo(4,4,Pf.bind(null,n,t),o)}function Ma(){}function Mf(t,n){var o=At();n=n===void 0?null:n;var a=o.memoizedState;return a!==null&&n!==null&&Na(n,a[1])?a[0]:(o.memoizedState=[t,n],t)}function Df(t,n){var o=At();n=n===void 0?null:n;var a=o.memoizedState;return a!==null&&n!==null&&Na(n,a[1])?a[0]:(t=t(),o.memoizedState=[t,n],t)}function Of(t,n,o){return rr&21?(zt(o,n)||(o=ud(),Ue.lanes|=o,ir|=o,t.baseState=!0),n):(t.baseState&&(t.baseState=!1,wt=!0),t.memoizedState=o)}function hv(t,n){var o=Ie;Ie=o!==0&&4>o?o:4,t(!0);var a=ka.transition;ka.transition={};try{t(!1),n()}finally{Ie=o,ka.transition=a}}function Af(){return At().memoizedState}function pv(t,n,o){var a=An(t);if(o={lane:a,action:o,hasEagerState:!1,eagerState:null,next:null},Lf(t))Ff(n,o);else if(o=hf(t,n,o,a),o!==null){var c=mt();$t(o,t,a,c),jf(o,n,a)}}function mv(t,n,o){var a=An(t),c={lane:a,action:o,hasEagerState:!1,eagerState:null,next:null};if(Lf(t))Ff(n,c);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var p=n.lastRenderedState,v=f(p,o);if(c.hasEagerState=!0,c.eagerState=v,zt(v,p)){var C=n.interleaved;C===null?(c.next=c,_a(n)):(c.next=C.next,C.next=c),n.interleaved=c;return}}catch{}finally{}o=hf(t,n,c,a),o!==null&&(c=mt(),$t(o,t,a,c),jf(o,n,a))}}function Lf(t){var n=t.alternate;return t===Ue||n!==null&&n===Ue}function Ff(t,n){Li=uo=!0;var o=t.pending;o===null?n.next=n:(n.next=o.next,o.next=n),t.pending=n}function jf(t,n,o){if(o&4194240){var a=n.lanes;a&=t.pendingLanes,o|=a,n.lanes=o,Ol(t,o)}}var ho={readContext:Ot,useCallback:ut,useContext:ut,useEffect:ut,useImperativeHandle:ut,useInsertionEffect:ut,useLayoutEffect:ut,useMemo:ut,useReducer:ut,useRef:ut,useState:ut,useDebugValue:ut,useDeferredValue:ut,useTransition:ut,useMutableSource:ut,useSyncExternalStore:ut,useId:ut,unstable_isNewReconciler:!1},gv={readContext:Ot,useCallback:function(t,n){return Zt().memoizedState=[t,n===void 0?null:n],t},useContext:Ot,useEffect:Tf,useImperativeHandle:function(t,n,o){return o=o!=null?o.concat([t]):null,co(4194308,4,Pf.bind(null,n,t),o)},useLayoutEffect:function(t,n){return co(4194308,4,t,n)},useInsertionEffect:function(t,n){return co(4,2,t,n)},useMemo:function(t,n){var o=Zt();return n=n===void 0?null:n,t=t(),o.memoizedState=[t,n],t},useReducer:function(t,n,o){var a=Zt();return n=o!==void 0?o(n):n,a.memoizedState=a.baseState=n,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:n},a.queue=t,t=t.dispatch=pv.bind(null,Ue,t),[a.memoizedState,t]},useRef:function(t){var n=Zt();return t={current:t},n.memoizedState=t},useState:kf,useDebugValue:Ma,useDeferredValue:function(t){return Zt().memoizedState=t},useTransition:function(){var t=kf(!1),n=t[0];return t=hv.bind(null,t[1]),Zt().memoizedState=t,[n,t]},useMutableSource:function(){},useSyncExternalStore:function(t,n,o){var a=Ue,c=Zt();if(We){if(o===void 0)throw Error(r(407));o=o()}else{if(o=n(),Ze===null)throw Error(r(349));rr&30||wf(a,n,o)}c.memoizedState=o;var f={value:o,getSnapshot:n};return c.queue=f,Tf(xf.bind(null,a,f,t),[t]),a.flags|=2048,zi(9,Cf.bind(null,a,f,o,n),void 0,null),o},useId:function(){var t=Zt(),n=Ze.identifierPrefix;if(We){var o=an,a=ln;o=(a&~(1<<32-jt(a)-1)).toString(32)+o,n=":"+n+"R"+o,o=Fi++,0<o&&(n+="H"+o.toString(32)),n+=":"}else o=fv++,n=":"+n+"r"+o.toString(32)+":";return t.memoizedState=n},unstable_isNewReconciler:!1},yv={readContext:Ot,useCallback:Mf,useContext:Ot,useEffect:Ra,useImperativeHandle:Rf,useInsertionEffect:If,useLayoutEffect:bf,useMemo:Df,useReducer:ba,useRef:Nf,useState:function(){return ba(ji)},useDebugValue:Ma,useDeferredValue:function(t){var n=At();return Of(n,Qe.memoizedState,t)},useTransition:function(){var t=ba(ji)[0],n=At().memoizedState;return[t,n]},useMutableSource:vf,useSyncExternalStore:_f,useId:Af,unstable_isNewReconciler:!1},vv={readContext:Ot,useCallback:Mf,useContext:Ot,useEffect:Ra,useImperativeHandle:Rf,useInsertionEffect:If,useLayoutEffect:bf,useMemo:Df,useReducer:Pa,useRef:Nf,useState:function(){return Pa(ji)},useDebugValue:Ma,useDeferredValue:function(t){var n=At();return Qe===null?n.memoizedState=t:Of(n,Qe.memoizedState,t)},useTransition:function(){var t=Pa(ji)[0],n=At().memoizedState;return[t,n]},useMutableSource:vf,useSyncExternalStore:_f,useId:Af,unstable_isNewReconciler:!1};function Bt(t,n){if(t&&t.defaultProps){n=B({},n),t=t.defaultProps;for(var o in t)n[o]===void 0&&(n[o]=t[o]);return n}return n}function Da(t,n,o,a){n=t.memoizedState,o=o(a,n),o=o==null?n:B({},n,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var po={isMounted:function(t){return(t=t._reactInternals)?Kn(t)===t:!1},enqueueSetState:function(t,n,o){t=t._reactInternals;var a=mt(),c=An(t),f=cn(a,c);f.payload=n,o!=null&&(f.callback=o),n=Rn(t,f,c),n!==null&&($t(n,t,c,a),so(n,t,c))},enqueueReplaceState:function(t,n,o){t=t._reactInternals;var a=mt(),c=An(t),f=cn(a,c);f.tag=1,f.payload=n,o!=null&&(f.callback=o),n=Rn(t,f,c),n!==null&&($t(n,t,c,a),so(n,t,c))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var o=mt(),a=An(t),c=cn(o,a);c.tag=2,n!=null&&(c.callback=n),n=Rn(t,c,a),n!==null&&($t(n,t,a,o),so(n,t,a))}};function zf(t,n,o,a,c,f,p){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(a,f,p):n.prototype&&n.prototype.isPureReactComponent?!ki(o,a)||!ki(c,f):!0}function Wf(t,n,o){var a=!1,c=In,f=n.contextType;return typeof f=="object"&&f!==null?f=Ot(f):(c=_t(n)?Jn:at.current,a=n.contextTypes,f=(a=a!=null)?Pr(t,c):In),n=new n(o,f),t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=po,t.stateNode=n,n._reactInternals=t,a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=c,t.__reactInternalMemoizedMaskedChildContext=f),n}function Bf(t,n,o,a){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(o,a),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(o,a),n.state!==t&&po.enqueueReplaceState(n,n.state,null)}function Oa(t,n,o,a){var c=t.stateNode;c.props=o,c.state=t.memoizedState,c.refs={},wa(t);var f=n.contextType;typeof f=="object"&&f!==null?c.context=Ot(f):(f=_t(n)?Jn:at.current,c.context=Pr(t,f)),c.state=t.memoizedState,f=n.getDerivedStateFromProps,typeof f=="function"&&(Da(t,n,f,o),c.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(n=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),n!==c.state&&po.enqueueReplaceState(c,c.state,null),oo(t,o,c,a),c.state=t.memoizedState),typeof c.componentDidMount=="function"&&(t.flags|=4194308)}function jr(t,n){try{var o="",a=n;do o+=Ce(a),a=a.return;while(a);var c=o}catch(f){c=`
Error generating stack: `+f.message+`
`+f.stack}return{value:t,source:n,stack:c,digest:null}}function Aa(t,n,o){return{value:t,source:null,stack:o??null,digest:n??null}}function La(t,n){try{console.error(n.value)}catch(o){setTimeout(function(){throw o})}}var _v=typeof WeakMap=="function"?WeakMap:Map;function Uf(t,n,o){o=cn(-1,o),o.tag=3,o.payload={element:null};var a=n.value;return o.callback=function(){Co||(Co=!0,Xa=a),La(t,n)},o}function Hf(t,n,o){o=cn(-1,o),o.tag=3;var a=t.type.getDerivedStateFromError;if(typeof a=="function"){var c=n.value;o.payload=function(){return a(c)},o.callback=function(){La(t,n)}}var f=t.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(o.callback=function(){La(t,n),typeof a!="function"&&(Dn===null?Dn=new Set([this]):Dn.add(this));var p=n.stack;this.componentDidCatch(n.value,{componentStack:p!==null?p:""})}),o}function $f(t,n,o){var a=t.pingCache;if(a===null){a=t.pingCache=new _v;var c=new Set;a.set(n,c)}else c=a.get(n),c===void 0&&(c=new Set,a.set(n,c));c.has(o)||(c.add(o),t=Dv.bind(null,t,n,o),n.then(t,t))}function Vf(t){do{var n;if((n=t.tag===13)&&(n=t.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return t;t=t.return}while(t!==null);return null}function Gf(t,n,o,a,c){return t.mode&1?(t.flags|=65536,t.lanes=c,t):(t===n?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(n=cn(-1,1),n.tag=2,Rn(o,n,1))),o.lanes|=1),t)}var wv=te.ReactCurrentOwner,wt=!1;function pt(t,n,o,a){n.child=t===null?ff(n,null,o,a):Or(n,t.child,o,a)}function Yf(t,n,o,a,c){o=o.render;var f=n.ref;return Lr(n,c),a=Ta(t,n,o,a,f,c),o=Ia(),t!==null&&!wt?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~c,dn(t,n,c)):(We&&o&&ca(n),n.flags|=1,pt(t,n,a,c),n.child)}function Qf(t,n,o,a,c){if(t===null){var f=o.type;return typeof f=="function"&&!iu(f)&&f.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(n.tag=15,n.type=f,qf(t,n,f,a,c)):(t=To(o.type,null,a,n,n.mode,c),t.ref=n.ref,t.return=n,n.child=t)}if(f=t.child,!(t.lanes&c)){var p=f.memoizedProps;if(o=o.compare,o=o!==null?o:ki,o(p,a)&&t.ref===n.ref)return dn(t,n,c)}return n.flags|=1,t=Fn(f,a),t.ref=n.ref,t.return=n,n.child=t}function qf(t,n,o,a,c){if(t!==null){var f=t.memoizedProps;if(ki(f,a)&&t.ref===n.ref)if(wt=!1,n.pendingProps=a=f,(t.lanes&c)!==0)t.flags&131072&&(wt=!0);else return n.lanes=t.lanes,dn(t,n,c)}return Fa(t,n,o,a,c)}function Kf(t,n,o){var a=n.pendingProps,c=a.children,f=t!==null?t.memoizedState:null;if(a.mode==="hidden")if(!(n.mode&1))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Me(Wr,Rt),Rt|=o;else{if(!(o&1073741824))return t=f!==null?f.baseLanes|o:o,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:t,cachePool:null,transitions:null},n.updateQueue=null,Me(Wr,Rt),Rt|=t,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=f!==null?f.baseLanes:o,Me(Wr,Rt),Rt|=a}else f!==null?(a=f.baseLanes|o,n.memoizedState=null):a=o,Me(Wr,Rt),Rt|=a;return pt(t,n,c,o),n.child}function Xf(t,n){var o=n.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(n.flags|=512,n.flags|=2097152)}function Fa(t,n,o,a,c){var f=_t(o)?Jn:at.current;return f=Pr(n,f),Lr(n,c),o=Ta(t,n,o,a,f,c),a=Ia(),t!==null&&!wt?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~c,dn(t,n,c)):(We&&a&&ca(n),n.flags|=1,pt(t,n,o,c),n.child)}function Jf(t,n,o,a,c){if(_t(o)){var f=!0;Xs(n)}else f=!1;if(Lr(n,c),n.stateNode===null)go(t,n),Wf(n,o,a),Oa(n,o,a,c),a=!0;else if(t===null){var p=n.stateNode,v=n.memoizedProps;p.props=v;var C=p.context,T=o.contextType;typeof T=="object"&&T!==null?T=Ot(T):(T=_t(o)?Jn:at.current,T=Pr(n,T));var M=o.getDerivedStateFromProps,O=typeof M=="function"||typeof p.getSnapshotBeforeUpdate=="function";O||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(v!==a||C!==T)&&Bf(n,p,a,T),Pn=!1;var R=n.memoizedState;p.state=R,oo(n,a,p,c),C=n.memoizedState,v!==a||R!==C||vt.current||Pn?(typeof M=="function"&&(Da(n,o,M,a),C=n.memoizedState),(v=Pn||zf(n,o,v,a,R,C,T))?(O||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(n.flags|=4194308)):(typeof p.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=a,n.memoizedState=C),p.props=a,p.state=C,p.context=T,a=v):(typeof p.componentDidMount=="function"&&(n.flags|=4194308),a=!1)}else{p=n.stateNode,pf(t,n),v=n.memoizedProps,T=n.type===n.elementType?v:Bt(n.type,v),p.props=T,O=n.pendingProps,R=p.context,C=o.contextType,typeof C=="object"&&C!==null?C=Ot(C):(C=_t(o)?Jn:at.current,C=Pr(n,C));var U=o.getDerivedStateFromProps;(M=typeof U=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(v!==O||R!==C)&&Bf(n,p,a,C),Pn=!1,R=n.memoizedState,p.state=R,oo(n,a,p,c);var G=n.memoizedState;v!==O||R!==G||vt.current||Pn?(typeof U=="function"&&(Da(n,o,U,a),G=n.memoizedState),(T=Pn||zf(n,o,T,a,R,G,C)||!1)?(M||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(a,G,C),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(a,G,C)),typeof p.componentDidUpdate=="function"&&(n.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof p.componentDidUpdate!="function"||v===t.memoizedProps&&R===t.memoizedState||(n.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&R===t.memoizedState||(n.flags|=1024),n.memoizedProps=a,n.memoizedState=G),p.props=a,p.state=G,p.context=C,a=T):(typeof p.componentDidUpdate!="function"||v===t.memoizedProps&&R===t.memoizedState||(n.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&R===t.memoizedState||(n.flags|=1024),a=!1)}return ja(t,n,o,a,f,c)}function ja(t,n,o,a,c,f){Xf(t,n);var p=(n.flags&128)!==0;if(!a&&!p)return c&&nf(n,o,!1),dn(t,n,f);a=n.stateNode,wv.current=n;var v=p&&typeof o.getDerivedStateFromError!="function"?null:a.render();return n.flags|=1,t!==null&&p?(n.child=Or(n,t.child,null,f),n.child=Or(n,null,v,f)):pt(t,n,v,f),n.memoizedState=a.state,c&&nf(n,o,!0),n.child}function Zf(t){var n=t.stateNode;n.pendingContext?ef(t,n.pendingContext,n.pendingContext!==n.context):n.context&&ef(t,n.context,!1),Ca(t,n.containerInfo)}function eh(t,n,o,a,c){return Dr(),pa(c),n.flags|=256,pt(t,n,o,a),n.child}var za={dehydrated:null,treeContext:null,retryLane:0};function Wa(t){return{baseLanes:t,cachePool:null,transitions:null}}function th(t,n,o){var a=n.pendingProps,c=Be.current,f=!1,p=(n.flags&128)!==0,v;if((v=p)||(v=t!==null&&t.memoizedState===null?!1:(c&2)!==0),v?(f=!0,n.flags&=-129):(t===null||t.memoizedState!==null)&&(c|=1),Me(Be,c&1),t===null)return ha(n),t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(n.mode&1?t.data==="$!"?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(p=a.children,t=a.fallback,f?(a=n.mode,f=n.child,p={mode:"hidden",children:p},!(a&1)&&f!==null?(f.childLanes=0,f.pendingProps=p):f=Io(p,a,0,null),t=ar(t,a,o,null),f.return=n,t.return=n,f.sibling=t,n.child=f,n.child.memoizedState=Wa(o),n.memoizedState=za,t):Ba(n,p));if(c=t.memoizedState,c!==null&&(v=c.dehydrated,v!==null))return Cv(t,n,p,a,v,c,o);if(f){f=a.fallback,p=n.mode,c=t.child,v=c.sibling;var C={mode:"hidden",children:a.children};return!(p&1)&&n.child!==c?(a=n.child,a.childLanes=0,a.pendingProps=C,n.deletions=null):(a=Fn(c,C),a.subtreeFlags=c.subtreeFlags&14680064),v!==null?f=Fn(v,f):(f=ar(f,p,o,null),f.flags|=2),f.return=n,a.return=n,a.sibling=f,n.child=a,a=f,f=n.child,p=t.child.memoizedState,p=p===null?Wa(o):{baseLanes:p.baseLanes|o,cachePool:null,transitions:p.transitions},f.memoizedState=p,f.childLanes=t.childLanes&~o,n.memoizedState=za,a}return f=t.child,t=f.sibling,a=Fn(f,{mode:"visible",children:a.children}),!(n.mode&1)&&(a.lanes=o),a.return=n,a.sibling=null,t!==null&&(o=n.deletions,o===null?(n.deletions=[t],n.flags|=16):o.push(t)),n.child=a,n.memoizedState=null,a}function Ba(t,n){return n=Io({mode:"visible",children:n},t.mode,0,null),n.return=t,t.child=n}function mo(t,n,o,a){return a!==null&&pa(a),Or(n,t.child,null,o),t=Ba(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function Cv(t,n,o,a,c,f,p){if(o)return n.flags&256?(n.flags&=-257,a=Aa(Error(r(422))),mo(t,n,p,a)):n.memoizedState!==null?(n.child=t.child,n.flags|=128,null):(f=a.fallback,c=n.mode,a=Io({mode:"visible",children:a.children},c,0,null),f=ar(f,c,p,null),f.flags|=2,a.return=n,f.return=n,a.sibling=f,n.child=a,n.mode&1&&Or(n,t.child,null,p),n.child.memoizedState=Wa(p),n.memoizedState=za,f);if(!(n.mode&1))return mo(t,n,p,null);if(c.data==="$!"){if(a=c.nextSibling&&c.nextSibling.dataset,a)var v=a.dgst;return a=v,f=Error(r(419)),a=Aa(f,a,void 0),mo(t,n,p,a)}if(v=(p&t.childLanes)!==0,wt||v){if(a=Ze,a!==null){switch(p&-p){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(a.suspendedLanes|p)?0:c,c!==0&&c!==f.retryLane&&(f.retryLane=c,un(t,c),$t(a,t,c,-1))}return ru(),a=Aa(Error(r(421))),mo(t,n,p,a)}return c.data==="$?"?(n.flags|=128,n.child=t.child,n=Ov.bind(null,t),c._reactRetry=n,null):(t=f.treeContext,Pt=Nn(c.nextSibling),bt=n,We=!0,Wt=null,t!==null&&(Mt[Dt++]=ln,Mt[Dt++]=an,Mt[Dt++]=Zn,ln=t.id,an=t.overflow,Zn=n),n=Ba(n,a.children),n.flags|=4096,n)}function nh(t,n,o){t.lanes|=n;var a=t.alternate;a!==null&&(a.lanes|=n),va(t.return,n,o)}function Ua(t,n,o,a,c){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:a,tail:o,tailMode:c}:(f.isBackwards=n,f.rendering=null,f.renderingStartTime=0,f.last=a,f.tail=o,f.tailMode=c)}function rh(t,n,o){var a=n.pendingProps,c=a.revealOrder,f=a.tail;if(pt(t,n,a.children,o),a=Be.current,a&2)a=a&1|2,n.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&nh(t,o,n);else if(t.tag===19)nh(t,o,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}a&=1}if(Me(Be,a),!(n.mode&1))n.memoizedState=null;else switch(c){case"forwards":for(o=n.child,c=null;o!==null;)t=o.alternate,t!==null&&lo(t)===null&&(c=o),o=o.sibling;o=c,o===null?(c=n.child,n.child=null):(c=o.sibling,o.sibling=null),Ua(n,!1,c,o,f);break;case"backwards":for(o=null,c=n.child,n.child=null;c!==null;){if(t=c.alternate,t!==null&&lo(t)===null){n.child=c;break}t=c.sibling,c.sibling=o,o=c,c=t}Ua(n,!0,o,null,f);break;case"together":Ua(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function go(t,n){!(n.mode&1)&&t!==null&&(t.alternate=null,n.alternate=null,n.flags|=2)}function dn(t,n,o){if(t!==null&&(n.dependencies=t.dependencies),ir|=n.lanes,!(o&n.childLanes))return null;if(t!==null&&n.child!==t.child)throw Error(r(153));if(n.child!==null){for(t=n.child,o=Fn(t,t.pendingProps),n.child=o,o.return=n;t.sibling!==null;)t=t.sibling,o=o.sibling=Fn(t,t.pendingProps),o.return=n;o.sibling=null}return n.child}function xv(t,n,o){switch(n.tag){case 3:Zf(n),Dr();break;case 5:yf(n);break;case 1:_t(n.type)&&Xs(n);break;case 4:Ca(n,n.stateNode.containerInfo);break;case 10:var a=n.type._context,c=n.memoizedProps.value;Me(ro,a._currentValue),a._currentValue=c;break;case 13:if(a=n.memoizedState,a!==null)return a.dehydrated!==null?(Me(Be,Be.current&1),n.flags|=128,null):o&n.child.childLanes?th(t,n,o):(Me(Be,Be.current&1),t=dn(t,n,o),t!==null?t.sibling:null);Me(Be,Be.current&1);break;case 19:if(a=(o&n.childLanes)!==0,t.flags&128){if(a)return rh(t,n,o);n.flags|=128}if(c=n.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Me(Be,Be.current),a)break;return null;case 22:case 23:return n.lanes=0,Kf(t,n,o)}return dn(t,n,o)}var ih,Ha,sh,oh;ih=function(t,n){for(var o=n.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},Ha=function(){},sh=function(t,n,o,a){var c=t.memoizedProps;if(c!==a){t=n.stateNode,nr(Jt.current);var f=null;switch(o){case"input":c=vl(t,c),a=vl(t,a),f=[];break;case"select":c=B({},c,{value:void 0}),a=B({},a,{value:void 0}),f=[];break;case"textarea":c=Cl(t,c),a=Cl(t,a),f=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(t.onclick=Qs)}Sl(o,a);var p;o=null;for(T in c)if(!a.hasOwnProperty(T)&&c.hasOwnProperty(T)&&c[T]!=null)if(T==="style"){var v=c[T];for(p in v)v.hasOwnProperty(p)&&(o||(o={}),o[p]="")}else T!=="dangerouslySetInnerHTML"&&T!=="children"&&T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(l.hasOwnProperty(T)?f||(f=[]):(f=f||[]).push(T,null));for(T in a){var C=a[T];if(v=c!=null?c[T]:void 0,a.hasOwnProperty(T)&&C!==v&&(C!=null||v!=null))if(T==="style")if(v){for(p in v)!v.hasOwnProperty(p)||C&&C.hasOwnProperty(p)||(o||(o={}),o[p]="");for(p in C)C.hasOwnProperty(p)&&v[p]!==C[p]&&(o||(o={}),o[p]=C[p])}else o||(f||(f=[]),f.push(T,o)),o=C;else T==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,v=v?v.__html:void 0,C!=null&&v!==C&&(f=f||[]).push(T,C)):T==="children"?typeof C!="string"&&typeof C!="number"||(f=f||[]).push(T,""+C):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&(l.hasOwnProperty(T)?(C!=null&&T==="onScroll"&&Ae("scroll",t),f||v===C||(f=[])):(f=f||[]).push(T,C))}o&&(f=f||[]).push("style",o);var T=f;(n.updateQueue=T)&&(n.flags|=4)}},oh=function(t,n,o,a){o!==a&&(n.flags|=4)};function Wi(t,n){if(!We)switch(t.tailMode){case"hidden":n=t.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:a.sibling=null}}function ct(t){var n=t.alternate!==null&&t.alternate.child===t.child,o=0,a=0;if(n)for(var c=t.child;c!==null;)o|=c.lanes|c.childLanes,a|=c.subtreeFlags&14680064,a|=c.flags&14680064,c.return=t,c=c.sibling;else for(c=t.child;c!==null;)o|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=t,c=c.sibling;return t.subtreeFlags|=a,t.childLanes=o,n}function Sv(t,n,o){var a=n.pendingProps;switch(da(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(n),null;case 1:return _t(n.type)&&Ks(),ct(n),null;case 3:return a=n.stateNode,Fr(),Le(vt),Le(at),Ea(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(to(n)?n.flags|=4:t===null||t.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,Wt!==null&&(eu(Wt),Wt=null))),Ha(t,n),ct(n),null;case 5:xa(n);var c=nr(Ai.current);if(o=n.type,t!==null&&n.stateNode!=null)sh(t,n,o,a,c),t.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!a){if(n.stateNode===null)throw Error(r(166));return ct(n),null}if(t=nr(Jt.current),to(n)){a=n.stateNode,o=n.type;var f=n.memoizedProps;switch(a[Xt]=n,a[Pi]=f,t=(n.mode&1)!==0,o){case"dialog":Ae("cancel",a),Ae("close",a);break;case"iframe":case"object":case"embed":Ae("load",a);break;case"video":case"audio":for(c=0;c<Ti.length;c++)Ae(Ti[c],a);break;case"source":Ae("error",a);break;case"img":case"image":case"link":Ae("error",a),Ae("load",a);break;case"details":Ae("toggle",a);break;case"input":zc(a,f),Ae("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!f.multiple},Ae("invalid",a);break;case"textarea":Uc(a,f),Ae("invalid",a)}Sl(o,f),c=null;for(var p in f)if(f.hasOwnProperty(p)){var v=f[p];p==="children"?typeof v=="string"?a.textContent!==v&&(f.suppressHydrationWarning!==!0&&Ys(a.textContent,v,t),c=["children",v]):typeof v=="number"&&a.textContent!==""+v&&(f.suppressHydrationWarning!==!0&&Ys(a.textContent,v,t),c=["children",""+v]):l.hasOwnProperty(p)&&v!=null&&p==="onScroll"&&Ae("scroll",a)}switch(o){case"input":Es(a),Bc(a,f,!0);break;case"textarea":Es(a),$c(a);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(a.onclick=Qs)}a=c,n.updateQueue=a,a!==null&&(n.flags|=4)}else{p=c.nodeType===9?c:c.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Vc(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=p.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof a.is=="string"?t=p.createElement(o,{is:a.is}):(t=p.createElement(o),o==="select"&&(p=t,a.multiple?p.multiple=!0:a.size&&(p.size=a.size))):t=p.createElementNS(t,o),t[Xt]=n,t[Pi]=a,ih(t,n,!1,!1),n.stateNode=t;e:{switch(p=El(o,a),o){case"dialog":Ae("cancel",t),Ae("close",t),c=a;break;case"iframe":case"object":case"embed":Ae("load",t),c=a;break;case"video":case"audio":for(c=0;c<Ti.length;c++)Ae(Ti[c],t);c=a;break;case"source":Ae("error",t),c=a;break;case"img":case"image":case"link":Ae("error",t),Ae("load",t),c=a;break;case"details":Ae("toggle",t),c=a;break;case"input":zc(t,a),c=vl(t,a),Ae("invalid",t);break;case"option":c=a;break;case"select":t._wrapperState={wasMultiple:!!a.multiple},c=B({},a,{value:void 0}),Ae("invalid",t);break;case"textarea":Uc(t,a),c=Cl(t,a),Ae("invalid",t);break;default:c=a}Sl(o,c),v=c;for(f in v)if(v.hasOwnProperty(f)){var C=v[f];f==="style"?Qc(t,C):f==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,C!=null&&Gc(t,C)):f==="children"?typeof C=="string"?(o!=="textarea"||C!=="")&&ai(t,C):typeof C=="number"&&ai(t,""+C):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(l.hasOwnProperty(f)?C!=null&&f==="onScroll"&&Ae("scroll",t):C!=null&&V(t,f,C,p))}switch(o){case"input":Es(t),Bc(t,a,!1);break;case"textarea":Es(t),$c(t);break;case"option":a.value!=null&&t.setAttribute("value",""+de(a.value));break;case"select":t.multiple=!!a.multiple,f=a.value,f!=null?vr(t,!!a.multiple,f,!1):a.defaultValue!=null&&vr(t,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(t.onclick=Qs)}switch(o){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return ct(n),null;case 6:if(t&&n.stateNode!=null)oh(t,n,t.memoizedProps,a);else{if(typeof a!="string"&&n.stateNode===null)throw Error(r(166));if(o=nr(Ai.current),nr(Jt.current),to(n)){if(a=n.stateNode,o=n.memoizedProps,a[Xt]=n,(f=a.nodeValue!==o)&&(t=bt,t!==null))switch(t.tag){case 3:Ys(a.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ys(a.nodeValue,o,(t.mode&1)!==0)}f&&(n.flags|=4)}else a=(o.nodeType===9?o:o.ownerDocument).createTextNode(a),a[Xt]=n,n.stateNode=a}return ct(n),null;case 13:if(Le(Be),a=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(We&&Pt!==null&&n.mode&1&&!(n.flags&128))uf(),Dr(),n.flags|=98560,f=!1;else if(f=to(n),a!==null&&a.dehydrated!==null){if(t===null){if(!f)throw Error(r(318));if(f=n.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Xt]=n}else Dr(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;ct(n),f=!1}else Wt!==null&&(eu(Wt),Wt=null),f=!0;if(!f)return n.flags&65536?n:null}return n.flags&128?(n.lanes=o,n):(a=a!==null,a!==(t!==null&&t.memoizedState!==null)&&a&&(n.child.flags|=8192,n.mode&1&&(t===null||Be.current&1?qe===0&&(qe=3):ru())),n.updateQueue!==null&&(n.flags|=4),ct(n),null);case 4:return Fr(),Ha(t,n),t===null&&Ii(n.stateNode.containerInfo),ct(n),null;case 10:return ya(n.type._context),ct(n),null;case 17:return _t(n.type)&&Ks(),ct(n),null;case 19:if(Le(Be),f=n.memoizedState,f===null)return ct(n),null;if(a=(n.flags&128)!==0,p=f.rendering,p===null)if(a)Wi(f,!1);else{if(qe!==0||t!==null&&t.flags&128)for(t=n.child;t!==null;){if(p=lo(t),p!==null){for(n.flags|=128,Wi(f,!1),a=p.updateQueue,a!==null&&(n.updateQueue=a,n.flags|=4),n.subtreeFlags=0,a=o,o=n.child;o!==null;)f=o,t=a,f.flags&=14680066,p=f.alternate,p===null?(f.childLanes=0,f.lanes=t,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=p.childLanes,f.lanes=p.lanes,f.child=p.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=p.memoizedProps,f.memoizedState=p.memoizedState,f.updateQueue=p.updateQueue,f.type=p.type,t=p.dependencies,f.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return Me(Be,Be.current&1|2),n.child}t=t.sibling}f.tail!==null&&Ve()>Br&&(n.flags|=128,a=!0,Wi(f,!1),n.lanes=4194304)}else{if(!a)if(t=lo(p),t!==null){if(n.flags|=128,a=!0,o=t.updateQueue,o!==null&&(n.updateQueue=o,n.flags|=4),Wi(f,!0),f.tail===null&&f.tailMode==="hidden"&&!p.alternate&&!We)return ct(n),null}else 2*Ve()-f.renderingStartTime>Br&&o!==1073741824&&(n.flags|=128,a=!0,Wi(f,!1),n.lanes=4194304);f.isBackwards?(p.sibling=n.child,n.child=p):(o=f.last,o!==null?o.sibling=p:n.child=p,f.last=p)}return f.tail!==null?(n=f.tail,f.rendering=n,f.tail=n.sibling,f.renderingStartTime=Ve(),n.sibling=null,o=Be.current,Me(Be,a?o&1|2:o&1),n):(ct(n),null);case 22:case 23:return nu(),a=n.memoizedState!==null,t!==null&&t.memoizedState!==null!==a&&(n.flags|=8192),a&&n.mode&1?Rt&1073741824&&(ct(n),n.subtreeFlags&6&&(n.flags|=8192)):ct(n),null;case 24:return null;case 25:return null}throw Error(r(156,n.tag))}function Ev(t,n){switch(da(n),n.tag){case 1:return _t(n.type)&&Ks(),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return Fr(),Le(vt),Le(at),Ea(),t=n.flags,t&65536&&!(t&128)?(n.flags=t&-65537|128,n):null;case 5:return xa(n),null;case 13:if(Le(Be),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(r(340));Dr()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return Le(Be),null;case 4:return Fr(),null;case 10:return ya(n.type._context),null;case 22:case 23:return nu(),null;case 24:return null;default:return null}}var yo=!1,dt=!1,kv=typeof WeakSet=="function"?WeakSet:Set,$=null;function zr(t,n){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(a){He(t,n,a)}else o.current=null}function $a(t,n,o){try{o()}catch(a){He(t,n,a)}}var lh=!1;function Nv(t,n){if(na=Ls,t=jd(),Ql(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var a=o.getSelection&&o.getSelection();if(a&&a.rangeCount!==0){o=a.anchorNode;var c=a.anchorOffset,f=a.focusNode;a=a.focusOffset;try{o.nodeType,f.nodeType}catch{o=null;break e}var p=0,v=-1,C=-1,T=0,M=0,O=t,R=null;t:for(;;){for(var U;O!==o||c!==0&&O.nodeType!==3||(v=p+c),O!==f||a!==0&&O.nodeType!==3||(C=p+a),O.nodeType===3&&(p+=O.nodeValue.length),(U=O.firstChild)!==null;)R=O,O=U;for(;;){if(O===t)break t;if(R===o&&++T===c&&(v=p),R===f&&++M===a&&(C=p),(U=O.nextSibling)!==null)break;O=R,R=O.parentNode}O=U}o=v===-1||C===-1?null:{start:v,end:C}}else o=null}o=o||{start:0,end:0}}else o=null;for(ra={focusedElem:t,selectionRange:o},Ls=!1,$=n;$!==null;)if(n=$,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,$=t;else for(;$!==null;){n=$;try{var G=n.alternate;if(n.flags&1024)switch(n.tag){case 0:case 11:case 15:break;case 1:if(G!==null){var Y=G.memoizedProps,Ge=G.memoizedState,k=n.stateNode,S=k.getSnapshotBeforeUpdate(n.elementType===n.type?Y:Bt(n.type,Y),Ge);k.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var N=n.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(A){He(n,n.return,A)}if(t=n.sibling,t!==null){t.return=n.return,$=t;break}$=n.return}return G=lh,lh=!1,G}function Bi(t,n,o){var a=n.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&t)===t){var f=c.destroy;c.destroy=void 0,f!==void 0&&$a(n,o,f)}c=c.next}while(c!==a)}}function vo(t,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var o=n=n.next;do{if((o.tag&t)===t){var a=o.create;o.destroy=a()}o=o.next}while(o!==n)}}function Va(t){var n=t.ref;if(n!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof n=="function"?n(t):n.current=t}}function ah(t){var n=t.alternate;n!==null&&(t.alternate=null,ah(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&(delete n[Xt],delete n[Pi],delete n[la],delete n[av],delete n[uv])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function uh(t){return t.tag===5||t.tag===3||t.tag===4}function ch(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||uh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ga(t,n,o){var a=t.tag;if(a===5||a===6)t=t.stateNode,n?o.nodeType===8?o.parentNode.insertBefore(t,n):o.insertBefore(t,n):(o.nodeType===8?(n=o.parentNode,n.insertBefore(t,o)):(n=o,n.appendChild(t)),o=o._reactRootContainer,o!=null||n.onclick!==null||(n.onclick=Qs));else if(a!==4&&(t=t.child,t!==null))for(Ga(t,n,o),t=t.sibling;t!==null;)Ga(t,n,o),t=t.sibling}function Ya(t,n,o){var a=t.tag;if(a===5||a===6)t=t.stateNode,n?o.insertBefore(t,n):o.appendChild(t);else if(a!==4&&(t=t.child,t!==null))for(Ya(t,n,o),t=t.sibling;t!==null;)Ya(t,n,o),t=t.sibling}var it=null,Ut=!1;function Mn(t,n,o){for(o=o.child;o!==null;)dh(t,n,o),o=o.sibling}function dh(t,n,o){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(Ps,o)}catch{}switch(o.tag){case 5:dt||zr(o,n);case 6:var a=it,c=Ut;it=null,Mn(t,n,o),it=a,Ut=c,it!==null&&(Ut?(t=it,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):it.removeChild(o.stateNode));break;case 18:it!==null&&(Ut?(t=it,o=o.stateNode,t.nodeType===8?oa(t.parentNode,o):t.nodeType===1&&oa(t,o),_i(t)):oa(it,o.stateNode));break;case 4:a=it,c=Ut,it=o.stateNode.containerInfo,Ut=!0,Mn(t,n,o),it=a,Ut=c;break;case 0:case 11:case 14:case 15:if(!dt&&(a=o.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){c=a=a.next;do{var f=c,p=f.destroy;f=f.tag,p!==void 0&&(f&2||f&4)&&$a(o,n,p),c=c.next}while(c!==a)}Mn(t,n,o);break;case 1:if(!dt&&(zr(o,n),a=o.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=o.memoizedProps,a.state=o.memoizedState,a.componentWillUnmount()}catch(v){He(o,n,v)}Mn(t,n,o);break;case 21:Mn(t,n,o);break;case 22:o.mode&1?(dt=(a=dt)||o.memoizedState!==null,Mn(t,n,o),dt=a):Mn(t,n,o);break;default:Mn(t,n,o)}}function fh(t){var n=t.updateQueue;if(n!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new kv),n.forEach(function(a){var c=Av.bind(null,t,a);o.has(a)||(o.add(a),a.then(c,c))})}}function Ht(t,n){var o=n.deletions;if(o!==null)for(var a=0;a<o.length;a++){var c=o[a];try{var f=t,p=n,v=p;e:for(;v!==null;){switch(v.tag){case 5:it=v.stateNode,Ut=!1;break e;case 3:it=v.stateNode.containerInfo,Ut=!0;break e;case 4:it=v.stateNode.containerInfo,Ut=!0;break e}v=v.return}if(it===null)throw Error(r(160));dh(f,p,c),it=null,Ut=!1;var C=c.alternate;C!==null&&(C.return=null),c.return=null}catch(T){He(c,n,T)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)hh(n,t),n=n.sibling}function hh(t,n){var o=t.alternate,a=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ht(n,t),en(t),a&4){try{Bi(3,t,t.return),vo(3,t)}catch(Y){He(t,t.return,Y)}try{Bi(5,t,t.return)}catch(Y){He(t,t.return,Y)}}break;case 1:Ht(n,t),en(t),a&512&&o!==null&&zr(o,o.return);break;case 5:if(Ht(n,t),en(t),a&512&&o!==null&&zr(o,o.return),t.flags&32){var c=t.stateNode;try{ai(c,"")}catch(Y){He(t,t.return,Y)}}if(a&4&&(c=t.stateNode,c!=null)){var f=t.memoizedProps,p=o!==null?o.memoizedProps:f,v=t.type,C=t.updateQueue;if(t.updateQueue=null,C!==null)try{v==="input"&&f.type==="radio"&&f.name!=null&&Wc(c,f),El(v,p);var T=El(v,f);for(p=0;p<C.length;p+=2){var M=C[p],O=C[p+1];M==="style"?Qc(c,O):M==="dangerouslySetInnerHTML"?Gc(c,O):M==="children"?ai(c,O):V(c,M,O,T)}switch(v){case"input":_l(c,f);break;case"textarea":Hc(c,f);break;case"select":var R=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!f.multiple;var U=f.value;U!=null?vr(c,!!f.multiple,U,!1):R!==!!f.multiple&&(f.defaultValue!=null?vr(c,!!f.multiple,f.defaultValue,!0):vr(c,!!f.multiple,f.multiple?[]:"",!1))}c[Pi]=f}catch(Y){He(t,t.return,Y)}}break;case 6:if(Ht(n,t),en(t),a&4){if(t.stateNode===null)throw Error(r(162));c=t.stateNode,f=t.memoizedProps;try{c.nodeValue=f}catch(Y){He(t,t.return,Y)}}break;case 3:if(Ht(n,t),en(t),a&4&&o!==null&&o.memoizedState.isDehydrated)try{_i(n.containerInfo)}catch(Y){He(t,t.return,Y)}break;case 4:Ht(n,t),en(t);break;case 13:Ht(n,t),en(t),c=t.child,c.flags&8192&&(f=c.memoizedState!==null,c.stateNode.isHidden=f,!f||c.alternate!==null&&c.alternate.memoizedState!==null||(Ka=Ve())),a&4&&fh(t);break;case 22:if(M=o!==null&&o.memoizedState!==null,t.mode&1?(dt=(T=dt)||M,Ht(n,t),dt=T):Ht(n,t),en(t),a&8192){if(T=t.memoizedState!==null,(t.stateNode.isHidden=T)&&!M&&t.mode&1)for($=t,M=t.child;M!==null;){for(O=$=M;$!==null;){switch(R=$,U=R.child,R.tag){case 0:case 11:case 14:case 15:Bi(4,R,R.return);break;case 1:zr(R,R.return);var G=R.stateNode;if(typeof G.componentWillUnmount=="function"){a=R,o=R.return;try{n=a,G.props=n.memoizedProps,G.state=n.memoizedState,G.componentWillUnmount()}catch(Y){He(a,o,Y)}}break;case 5:zr(R,R.return);break;case 22:if(R.memoizedState!==null){gh(O);continue}}U!==null?(U.return=R,$=U):gh(O)}M=M.sibling}e:for(M=null,O=t;;){if(O.tag===5){if(M===null){M=O;try{c=O.stateNode,T?(f=c.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(v=O.stateNode,C=O.memoizedProps.style,p=C!=null&&C.hasOwnProperty("display")?C.display:null,v.style.display=Yc("display",p))}catch(Y){He(t,t.return,Y)}}}else if(O.tag===6){if(M===null)try{O.stateNode.nodeValue=T?"":O.memoizedProps}catch(Y){He(t,t.return,Y)}}else if((O.tag!==22&&O.tag!==23||O.memoizedState===null||O===t)&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===t)break e;for(;O.sibling===null;){if(O.return===null||O.return===t)break e;M===O&&(M=null),O=O.return}M===O&&(M=null),O.sibling.return=O.return,O=O.sibling}}break;case 19:Ht(n,t),en(t),a&4&&fh(t);break;case 21:break;default:Ht(n,t),en(t)}}function en(t){var n=t.flags;if(n&2){try{e:{for(var o=t.return;o!==null;){if(uh(o)){var a=o;break e}o=o.return}throw Error(r(160))}switch(a.tag){case 5:var c=a.stateNode;a.flags&32&&(ai(c,""),a.flags&=-33);var f=ch(t);Ya(t,f,c);break;case 3:case 4:var p=a.stateNode.containerInfo,v=ch(t);Ga(t,v,p);break;default:throw Error(r(161))}}catch(C){He(t,t.return,C)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Tv(t,n,o){$=t,ph(t)}function ph(t,n,o){for(var a=(t.mode&1)!==0;$!==null;){var c=$,f=c.child;if(c.tag===22&&a){var p=c.memoizedState!==null||yo;if(!p){var v=c.alternate,C=v!==null&&v.memoizedState!==null||dt;v=yo;var T=dt;if(yo=p,(dt=C)&&!T)for($=c;$!==null;)p=$,C=p.child,p.tag===22&&p.memoizedState!==null?yh(c):C!==null?(C.return=p,$=C):yh(c);for(;f!==null;)$=f,ph(f),f=f.sibling;$=c,yo=v,dt=T}mh(t)}else c.subtreeFlags&8772&&f!==null?(f.return=c,$=f):mh(t)}}function mh(t){for(;$!==null;){var n=$;if(n.flags&8772){var o=n.alternate;try{if(n.flags&8772)switch(n.tag){case 0:case 11:case 15:dt||vo(5,n);break;case 1:var a=n.stateNode;if(n.flags&4&&!dt)if(o===null)a.componentDidMount();else{var c=n.elementType===n.type?o.memoizedProps:Bt(n.type,o.memoizedProps);a.componentDidUpdate(c,o.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var f=n.updateQueue;f!==null&&gf(n,f,a);break;case 3:var p=n.updateQueue;if(p!==null){if(o=null,n.child!==null)switch(n.child.tag){case 5:o=n.child.stateNode;break;case 1:o=n.child.stateNode}gf(n,p,o)}break;case 5:var v=n.stateNode;if(o===null&&n.flags&4){o=v;var C=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":C.autoFocus&&o.focus();break;case"img":C.src&&(o.src=C.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var T=n.alternate;if(T!==null){var M=T.memoizedState;if(M!==null){var O=M.dehydrated;O!==null&&_i(O)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}dt||n.flags&512&&Va(n)}catch(R){He(n,n.return,R)}}if(n===t){$=null;break}if(o=n.sibling,o!==null){o.return=n.return,$=o;break}$=n.return}}function gh(t){for(;$!==null;){var n=$;if(n===t){$=null;break}var o=n.sibling;if(o!==null){o.return=n.return,$=o;break}$=n.return}}function yh(t){for(;$!==null;){var n=$;try{switch(n.tag){case 0:case 11:case 15:var o=n.return;try{vo(4,n)}catch(C){He(n,o,C)}break;case 1:var a=n.stateNode;if(typeof a.componentDidMount=="function"){var c=n.return;try{a.componentDidMount()}catch(C){He(n,c,C)}}var f=n.return;try{Va(n)}catch(C){He(n,f,C)}break;case 5:var p=n.return;try{Va(n)}catch(C){He(n,p,C)}}}catch(C){He(n,n.return,C)}if(n===t){$=null;break}var v=n.sibling;if(v!==null){v.return=n.return,$=v;break}$=n.return}}var Iv=Math.ceil,_o=te.ReactCurrentDispatcher,Qa=te.ReactCurrentOwner,Lt=te.ReactCurrentBatchConfig,Se=0,Ze=null,Ye=null,st=0,Rt=0,Wr=Tn(0),qe=0,Ui=null,ir=0,wo=0,qa=0,Hi=null,Ct=null,Ka=0,Br=1/0,fn=null,Co=!1,Xa=null,Dn=null,xo=!1,On=null,So=0,$i=0,Ja=null,Eo=-1,ko=0;function mt(){return Se&6?Ve():Eo!==-1?Eo:Eo=Ve()}function An(t){return t.mode&1?Se&2&&st!==0?st&-st:dv.transition!==null?(ko===0&&(ko=ud()),ko):(t=Ie,t!==0||(t=window.event,t=t===void 0?16:vd(t.type)),t):1}function $t(t,n,o,a){if(50<$i)throw $i=0,Ja=null,Error(r(185));pi(t,o,a),(!(Se&2)||t!==Ze)&&(t===Ze&&(!(Se&2)&&(wo|=o),qe===4&&Ln(t,st)),xt(t,a),o===1&&Se===0&&!(n.mode&1)&&(Br=Ve()+500,Js&&bn()))}function xt(t,n){var o=t.callbackNode;dy(t,n);var a=Ds(t,t===Ze?st:0);if(a===0)o!==null&&od(o),t.callbackNode=null,t.callbackPriority=0;else if(n=a&-a,t.callbackPriority!==n){if(o!=null&&od(o),n===1)t.tag===0?cv(_h.bind(null,t)):rf(_h.bind(null,t)),ov(function(){!(Se&6)&&bn()}),o=null;else{switch(cd(a)){case 1:o=Rl;break;case 4:o=ld;break;case 16:o=bs;break;case 536870912:o=ad;break;default:o=bs}o=Th(o,vh.bind(null,t))}t.callbackPriority=n,t.callbackNode=o}}function vh(t,n){if(Eo=-1,ko=0,Se&6)throw Error(r(327));var o=t.callbackNode;if(Ur()&&t.callbackNode!==o)return null;var a=Ds(t,t===Ze?st:0);if(a===0)return null;if(a&30||a&t.expiredLanes||n)n=No(t,a);else{n=a;var c=Se;Se|=2;var f=Ch();(Ze!==t||st!==n)&&(fn=null,Br=Ve()+500,or(t,n));do try{Rv();break}catch(v){wh(t,v)}while(!0);ga(),_o.current=f,Se=c,Ye!==null?n=0:(Ze=null,st=0,n=qe)}if(n!==0){if(n===2&&(c=Ml(t),c!==0&&(a=c,n=Za(t,c))),n===1)throw o=Ui,or(t,0),Ln(t,a),xt(t,Ve()),o;if(n===6)Ln(t,a);else{if(c=t.current.alternate,!(a&30)&&!bv(c)&&(n=No(t,a),n===2&&(f=Ml(t),f!==0&&(a=f,n=Za(t,f))),n===1))throw o=Ui,or(t,0),Ln(t,a),xt(t,Ve()),o;switch(t.finishedWork=c,t.finishedLanes=a,n){case 0:case 1:throw Error(r(345));case 2:lr(t,Ct,fn);break;case 3:if(Ln(t,a),(a&130023424)===a&&(n=Ka+500-Ve(),10<n)){if(Ds(t,0)!==0)break;if(c=t.suspendedLanes,(c&a)!==a){mt(),t.pingedLanes|=t.suspendedLanes&c;break}t.timeoutHandle=sa(lr.bind(null,t,Ct,fn),n);break}lr(t,Ct,fn);break;case 4:if(Ln(t,a),(a&4194240)===a)break;for(n=t.eventTimes,c=-1;0<a;){var p=31-jt(a);f=1<<p,p=n[p],p>c&&(c=p),a&=~f}if(a=c,a=Ve()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Iv(a/1960))-a,10<a){t.timeoutHandle=sa(lr.bind(null,t,Ct,fn),a);break}lr(t,Ct,fn);break;case 5:lr(t,Ct,fn);break;default:throw Error(r(329))}}}return xt(t,Ve()),t.callbackNode===o?vh.bind(null,t):null}function Za(t,n){var o=Hi;return t.current.memoizedState.isDehydrated&&(or(t,n).flags|=256),t=No(t,n),t!==2&&(n=Ct,Ct=o,n!==null&&eu(n)),t}function eu(t){Ct===null?Ct=t:Ct.push.apply(Ct,t)}function bv(t){for(var n=t;;){if(n.flags&16384){var o=n.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var a=0;a<o.length;a++){var c=o[a],f=c.getSnapshot;c=c.value;try{if(!zt(f(),c))return!1}catch{return!1}}}if(o=n.child,n.subtreeFlags&16384&&o!==null)o.return=n,n=o;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ln(t,n){for(n&=~qa,n&=~wo,t.suspendedLanes|=n,t.pingedLanes&=~n,t=t.expirationTimes;0<n;){var o=31-jt(n),a=1<<o;t[o]=-1,n&=~a}}function _h(t){if(Se&6)throw Error(r(327));Ur();var n=Ds(t,0);if(!(n&1))return xt(t,Ve()),null;var o=No(t,n);if(t.tag!==0&&o===2){var a=Ml(t);a!==0&&(n=a,o=Za(t,a))}if(o===1)throw o=Ui,or(t,0),Ln(t,n),xt(t,Ve()),o;if(o===6)throw Error(r(345));return t.finishedWork=t.current.alternate,t.finishedLanes=n,lr(t,Ct,fn),xt(t,Ve()),null}function tu(t,n){var o=Se;Se|=1;try{return t(n)}finally{Se=o,Se===0&&(Br=Ve()+500,Js&&bn())}}function sr(t){On!==null&&On.tag===0&&!(Se&6)&&Ur();var n=Se;Se|=1;var o=Lt.transition,a=Ie;try{if(Lt.transition=null,Ie=1,t)return t()}finally{Ie=a,Lt.transition=o,Se=n,!(Se&6)&&bn()}}function nu(){Rt=Wr.current,Le(Wr)}function or(t,n){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,sv(o)),Ye!==null)for(o=Ye.return;o!==null;){var a=o;switch(da(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Ks();break;case 3:Fr(),Le(vt),Le(at),Ea();break;case 5:xa(a);break;case 4:Fr();break;case 13:Le(Be);break;case 19:Le(Be);break;case 10:ya(a.type._context);break;case 22:case 23:nu()}o=o.return}if(Ze=t,Ye=t=Fn(t.current,null),st=Rt=n,qe=0,Ui=null,qa=wo=ir=0,Ct=Hi=null,tr!==null){for(n=0;n<tr.length;n++)if(o=tr[n],a=o.interleaved,a!==null){o.interleaved=null;var c=a.next,f=o.pending;if(f!==null){var p=f.next;f.next=c,a.next=p}o.pending=a}tr=null}return t}function wh(t,n){do{var o=Ye;try{if(ga(),ao.current=ho,uo){for(var a=Ue.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}uo=!1}if(rr=0,Je=Qe=Ue=null,Li=!1,Fi=0,Qa.current=null,o===null||o.return===null){qe=1,Ui=n,Ye=null;break}e:{var f=t,p=o.return,v=o,C=n;if(n=st,v.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){var T=C,M=v,O=M.tag;if(!(M.mode&1)&&(O===0||O===11||O===15)){var R=M.alternate;R?(M.updateQueue=R.updateQueue,M.memoizedState=R.memoizedState,M.lanes=R.lanes):(M.updateQueue=null,M.memoizedState=null)}var U=Vf(p);if(U!==null){U.flags&=-257,Gf(U,p,v,f,n),U.mode&1&&$f(f,T,n),n=U,C=T;var G=n.updateQueue;if(G===null){var Y=new Set;Y.add(C),n.updateQueue=Y}else G.add(C);break e}else{if(!(n&1)){$f(f,T,n),ru();break e}C=Error(r(426))}}else if(We&&v.mode&1){var Ge=Vf(p);if(Ge!==null){!(Ge.flags&65536)&&(Ge.flags|=256),Gf(Ge,p,v,f,n),pa(jr(C,v));break e}}f=C=jr(C,v),qe!==4&&(qe=2),Hi===null?Hi=[f]:Hi.push(f),f=p;do{switch(f.tag){case 3:f.flags|=65536,n&=-n,f.lanes|=n;var k=Uf(f,C,n);mf(f,k);break e;case 1:v=C;var S=f.type,N=f.stateNode;if(!(f.flags&128)&&(typeof S.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Dn===null||!Dn.has(N)))){f.flags|=65536,n&=-n,f.lanes|=n;var A=Hf(f,v,n);mf(f,A);break e}}f=f.return}while(f!==null)}Sh(o)}catch(Q){n=Q,Ye===o&&o!==null&&(Ye=o=o.return);continue}break}while(!0)}function Ch(){var t=_o.current;return _o.current=ho,t===null?ho:t}function ru(){(qe===0||qe===3||qe===2)&&(qe=4),Ze===null||!(ir&268435455)&&!(wo&268435455)||Ln(Ze,st)}function No(t,n){var o=Se;Se|=2;var a=Ch();(Ze!==t||st!==n)&&(fn=null,or(t,n));do try{Pv();break}catch(c){wh(t,c)}while(!0);if(ga(),Se=o,_o.current=a,Ye!==null)throw Error(r(261));return Ze=null,st=0,qe}function Pv(){for(;Ye!==null;)xh(Ye)}function Rv(){for(;Ye!==null&&!ny();)xh(Ye)}function xh(t){var n=Nh(t.alternate,t,Rt);t.memoizedProps=t.pendingProps,n===null?Sh(t):Ye=n,Qa.current=null}function Sh(t){var n=t;do{var o=n.alternate;if(t=n.return,n.flags&32768){if(o=Ev(o,n),o!==null){o.flags&=32767,Ye=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{qe=6,Ye=null;return}}else if(o=Sv(o,n,Rt),o!==null){Ye=o;return}if(n=n.sibling,n!==null){Ye=n;return}Ye=n=t}while(n!==null);qe===0&&(qe=5)}function lr(t,n,o){var a=Ie,c=Lt.transition;try{Lt.transition=null,Ie=1,Mv(t,n,o,a)}finally{Lt.transition=c,Ie=a}return null}function Mv(t,n,o,a){do Ur();while(On!==null);if(Se&6)throw Error(r(327));o=t.finishedWork;var c=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(r(177));t.callbackNode=null,t.callbackPriority=0;var f=o.lanes|o.childLanes;if(fy(t,f),t===Ze&&(Ye=Ze=null,st=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||xo||(xo=!0,Th(bs,function(){return Ur(),null})),f=(o.flags&15990)!==0,o.subtreeFlags&15990||f){f=Lt.transition,Lt.transition=null;var p=Ie;Ie=1;var v=Se;Se|=4,Qa.current=null,Nv(t,o),hh(o,t),Jy(ra),Ls=!!na,ra=na=null,t.current=o,Tv(o),ry(),Se=v,Ie=p,Lt.transition=f}else t.current=o;if(xo&&(xo=!1,On=t,So=c),f=t.pendingLanes,f===0&&(Dn=null),oy(o.stateNode),xt(t,Ve()),n!==null)for(a=t.onRecoverableError,o=0;o<n.length;o++)c=n[o],a(c.value,{componentStack:c.stack,digest:c.digest});if(Co)throw Co=!1,t=Xa,Xa=null,t;return So&1&&t.tag!==0&&Ur(),f=t.pendingLanes,f&1?t===Ja?$i++:($i=0,Ja=t):$i=0,bn(),null}function Ur(){if(On!==null){var t=cd(So),n=Lt.transition,o=Ie;try{if(Lt.transition=null,Ie=16>t?16:t,On===null)var a=!1;else{if(t=On,On=null,So=0,Se&6)throw Error(r(331));var c=Se;for(Se|=4,$=t.current;$!==null;){var f=$,p=f.child;if($.flags&16){var v=f.deletions;if(v!==null){for(var C=0;C<v.length;C++){var T=v[C];for($=T;$!==null;){var M=$;switch(M.tag){case 0:case 11:case 15:Bi(8,M,f)}var O=M.child;if(O!==null)O.return=M,$=O;else for(;$!==null;){M=$;var R=M.sibling,U=M.return;if(ah(M),M===T){$=null;break}if(R!==null){R.return=U,$=R;break}$=U}}}var G=f.alternate;if(G!==null){var Y=G.child;if(Y!==null){G.child=null;do{var Ge=Y.sibling;Y.sibling=null,Y=Ge}while(Y!==null)}}$=f}}if(f.subtreeFlags&2064&&p!==null)p.return=f,$=p;else e:for(;$!==null;){if(f=$,f.flags&2048)switch(f.tag){case 0:case 11:case 15:Bi(9,f,f.return)}var k=f.sibling;if(k!==null){k.return=f.return,$=k;break e}$=f.return}}var S=t.current;for($=S;$!==null;){p=$;var N=p.child;if(p.subtreeFlags&2064&&N!==null)N.return=p,$=N;else e:for(p=S;$!==null;){if(v=$,v.flags&2048)try{switch(v.tag){case 0:case 11:case 15:vo(9,v)}}catch(Q){He(v,v.return,Q)}if(v===p){$=null;break e}var A=v.sibling;if(A!==null){A.return=v.return,$=A;break e}$=v.return}}if(Se=c,bn(),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(Ps,t)}catch{}a=!0}return a}finally{Ie=o,Lt.transition=n}}return!1}function Eh(t,n,o){n=jr(o,n),n=Uf(t,n,1),t=Rn(t,n,1),n=mt(),t!==null&&(pi(t,1,n),xt(t,n))}function He(t,n,o){if(t.tag===3)Eh(t,t,o);else for(;n!==null;){if(n.tag===3){Eh(n,t,o);break}else if(n.tag===1){var a=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Dn===null||!Dn.has(a))){t=jr(o,t),t=Hf(n,t,1),n=Rn(n,t,1),t=mt(),n!==null&&(pi(n,1,t),xt(n,t));break}}n=n.return}}function Dv(t,n,o){var a=t.pingCache;a!==null&&a.delete(n),n=mt(),t.pingedLanes|=t.suspendedLanes&o,Ze===t&&(st&o)===o&&(qe===4||qe===3&&(st&130023424)===st&&500>Ve()-Ka?or(t,0):qa|=o),xt(t,n)}function kh(t,n){n===0&&(t.mode&1?(n=Ms,Ms<<=1,!(Ms&130023424)&&(Ms=4194304)):n=1);var o=mt();t=un(t,n),t!==null&&(pi(t,n,o),xt(t,o))}function Ov(t){var n=t.memoizedState,o=0;n!==null&&(o=n.retryLane),kh(t,o)}function Av(t,n){var o=0;switch(t.tag){case 13:var a=t.stateNode,c=t.memoizedState;c!==null&&(o=c.retryLane);break;case 19:a=t.stateNode;break;default:throw Error(r(314))}a!==null&&a.delete(n),kh(t,o)}var Nh;Nh=function(t,n,o){if(t!==null)if(t.memoizedProps!==n.pendingProps||vt.current)wt=!0;else{if(!(t.lanes&o)&&!(n.flags&128))return wt=!1,xv(t,n,o);wt=!!(t.flags&131072)}else wt=!1,We&&n.flags&1048576&&sf(n,eo,n.index);switch(n.lanes=0,n.tag){case 2:var a=n.type;go(t,n),t=n.pendingProps;var c=Pr(n,at.current);Lr(n,o),c=Ta(null,n,a,t,c,o);var f=Ia();return n.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,_t(a)?(f=!0,Xs(n)):f=!1,n.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,wa(n),c.updater=po,n.stateNode=c,c._reactInternals=n,Oa(n,a,t,o),n=ja(null,n,a,!0,f,o)):(n.tag=0,We&&f&&ca(n),pt(null,n,c,o),n=n.child),n;case 16:a=n.elementType;e:{switch(go(t,n),t=n.pendingProps,c=a._init,a=c(a._payload),n.type=a,c=n.tag=Fv(a),t=Bt(a,t),c){case 0:n=Fa(null,n,a,t,o);break e;case 1:n=Jf(null,n,a,t,o);break e;case 11:n=Yf(null,n,a,t,o);break e;case 14:n=Qf(null,n,a,Bt(a.type,t),o);break e}throw Error(r(306,a,""))}return n;case 0:return a=n.type,c=n.pendingProps,c=n.elementType===a?c:Bt(a,c),Fa(t,n,a,c,o);case 1:return a=n.type,c=n.pendingProps,c=n.elementType===a?c:Bt(a,c),Jf(t,n,a,c,o);case 3:e:{if(Zf(n),t===null)throw Error(r(387));a=n.pendingProps,f=n.memoizedState,c=f.element,pf(t,n),oo(n,a,null,o);var p=n.memoizedState;if(a=p.element,f.isDehydrated)if(f={element:a,isDehydrated:!1,cache:p.cache,pendingSuspenseBoundaries:p.pendingSuspenseBoundaries,transitions:p.transitions},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){c=jr(Error(r(423)),n),n=eh(t,n,a,o,c);break e}else if(a!==c){c=jr(Error(r(424)),n),n=eh(t,n,a,o,c);break e}else for(Pt=Nn(n.stateNode.containerInfo.firstChild),bt=n,We=!0,Wt=null,o=ff(n,null,a,o),n.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Dr(),a===c){n=dn(t,n,o);break e}pt(t,n,a,o)}n=n.child}return n;case 5:return yf(n),t===null&&ha(n),a=n.type,c=n.pendingProps,f=t!==null?t.memoizedProps:null,p=c.children,ia(a,c)?p=null:f!==null&&ia(a,f)&&(n.flags|=32),Xf(t,n),pt(t,n,p,o),n.child;case 6:return t===null&&ha(n),null;case 13:return th(t,n,o);case 4:return Ca(n,n.stateNode.containerInfo),a=n.pendingProps,t===null?n.child=Or(n,null,a,o):pt(t,n,a,o),n.child;case 11:return a=n.type,c=n.pendingProps,c=n.elementType===a?c:Bt(a,c),Yf(t,n,a,c,o);case 7:return pt(t,n,n.pendingProps,o),n.child;case 8:return pt(t,n,n.pendingProps.children,o),n.child;case 12:return pt(t,n,n.pendingProps.children,o),n.child;case 10:e:{if(a=n.type._context,c=n.pendingProps,f=n.memoizedProps,p=c.value,Me(ro,a._currentValue),a._currentValue=p,f!==null)if(zt(f.value,p)){if(f.children===c.children&&!vt.current){n=dn(t,n,o);break e}}else for(f=n.child,f!==null&&(f.return=n);f!==null;){var v=f.dependencies;if(v!==null){p=f.child;for(var C=v.firstContext;C!==null;){if(C.context===a){if(f.tag===1){C=cn(-1,o&-o),C.tag=2;var T=f.updateQueue;if(T!==null){T=T.shared;var M=T.pending;M===null?C.next=C:(C.next=M.next,M.next=C),T.pending=C}}f.lanes|=o,C=f.alternate,C!==null&&(C.lanes|=o),va(f.return,o,n),v.lanes|=o;break}C=C.next}}else if(f.tag===10)p=f.type===n.type?null:f.child;else if(f.tag===18){if(p=f.return,p===null)throw Error(r(341));p.lanes|=o,v=p.alternate,v!==null&&(v.lanes|=o),va(p,o,n),p=f.sibling}else p=f.child;if(p!==null)p.return=f;else for(p=f;p!==null;){if(p===n){p=null;break}if(f=p.sibling,f!==null){f.return=p.return,p=f;break}p=p.return}f=p}pt(t,n,c.children,o),n=n.child}return n;case 9:return c=n.type,a=n.pendingProps.children,Lr(n,o),c=Ot(c),a=a(c),n.flags|=1,pt(t,n,a,o),n.child;case 14:return a=n.type,c=Bt(a,n.pendingProps),c=Bt(a.type,c),Qf(t,n,a,c,o);case 15:return qf(t,n,n.type,n.pendingProps,o);case 17:return a=n.type,c=n.pendingProps,c=n.elementType===a?c:Bt(a,c),go(t,n),n.tag=1,_t(a)?(t=!0,Xs(n)):t=!1,Lr(n,o),Wf(n,a,c),Oa(n,a,c,o),ja(null,n,a,!0,t,o);case 19:return rh(t,n,o);case 22:return Kf(t,n,o)}throw Error(r(156,n.tag))};function Th(t,n){return sd(t,n)}function Lv(t,n,o,a){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ft(t,n,o,a){return new Lv(t,n,o,a)}function iu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Fv(t){if(typeof t=="function")return iu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===q)return 11;if(t===we)return 14}return 2}function Fn(t,n){var o=t.alternate;return o===null?(o=Ft(t.tag,n,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=n,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,n=t.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function To(t,n,o,a,c,f){var p=2;if(a=t,typeof t=="function")iu(t)&&(p=1);else if(typeof t=="string")p=5;else e:switch(t){case _e:return ar(o.children,c,f,n);case H:p=8,c|=8;break;case ae:return t=Ft(12,o,n,c|2),t.elementType=ae,t.lanes=f,t;case xe:return t=Ft(13,o,n,c),t.elementType=xe,t.lanes=f,t;case ze:return t=Ft(19,o,n,c),t.elementType=ze,t.lanes=f,t;case me:return Io(o,c,f,n);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ue:p=10;break e;case ve:p=9;break e;case q:p=11;break e;case we:p=14;break e;case Ne:p=16,a=null;break e}throw Error(r(130,t==null?t:typeof t,""))}return n=Ft(p,o,n,c),n.elementType=t,n.type=a,n.lanes=f,n}function ar(t,n,o,a){return t=Ft(7,t,a,n),t.lanes=o,t}function Io(t,n,o,a){return t=Ft(22,t,a,n),t.elementType=me,t.lanes=o,t.stateNode={isHidden:!1},t}function su(t,n,o){return t=Ft(6,t,null,n),t.lanes=o,t}function ou(t,n,o){return n=Ft(4,t.children!==null?t.children:[],t.key,n),n.lanes=o,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}function jv(t,n,o,a,c){this.tag=n,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Dl(0),this.expirationTimes=Dl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dl(0),this.identifierPrefix=a,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function lu(t,n,o,a,c,f,p,v,C){return t=new jv(t,n,o,v,C),n===1?(n=1,f===!0&&(n|=8)):n=0,f=Ft(3,null,null,n),t.current=f,f.stateNode=t,f.memoizedState={element:a,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},wa(f),t}function zv(t,n,o){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:se,key:a==null?null:""+a,children:t,containerInfo:n,implementation:o}}function Ih(t){if(!t)return In;t=t._reactInternals;e:{if(Kn(t)!==t||t.tag!==1)throw Error(r(170));var n=t;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(_t(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(r(171))}if(t.tag===1){var o=t.type;if(_t(o))return tf(t,o,n)}return n}function bh(t,n,o,a,c,f,p,v,C){return t=lu(o,a,!0,t,c,f,p,v,C),t.context=Ih(null),o=t.current,a=mt(),c=An(o),f=cn(a,c),f.callback=n??null,Rn(o,f,c),t.current.lanes=c,pi(t,c,a),xt(t,a),t}function bo(t,n,o,a){var c=n.current,f=mt(),p=An(c);return o=Ih(o),n.context===null?n.context=o:n.pendingContext=o,n=cn(f,p),n.payload={element:t},a=a===void 0?null:a,a!==null&&(n.callback=a),t=Rn(c,n,p),t!==null&&($t(t,c,p,f),so(t,c,p)),p}function Po(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ph(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<n?o:n}}function au(t,n){Ph(t,n),(t=t.alternate)&&Ph(t,n)}function Wv(){return null}var Rh=typeof reportError=="function"?reportError:function(t){console.error(t)};function uu(t){this._internalRoot=t}Ro.prototype.render=uu.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(r(409));bo(t,n,null,null)},Ro.prototype.unmount=uu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;sr(function(){bo(null,t,null,null)}),n[sn]=null}};function Ro(t){this._internalRoot=t}Ro.prototype.unstable_scheduleHydration=function(t){if(t){var n=hd();t={blockedOn:null,target:t,priority:n};for(var o=0;o<Sn.length&&n!==0&&n<Sn[o].priority;o++);Sn.splice(o,0,t),o===0&&gd(t)}};function cu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Mo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Mh(){}function Bv(t,n,o,a,c){if(c){if(typeof a=="function"){var f=a;a=function(){var T=Po(p);f.call(T)}}var p=bh(n,a,t,0,null,!1,!1,"",Mh);return t._reactRootContainer=p,t[sn]=p.current,Ii(t.nodeType===8?t.parentNode:t),sr(),p}for(;c=t.lastChild;)t.removeChild(c);if(typeof a=="function"){var v=a;a=function(){var T=Po(C);v.call(T)}}var C=lu(t,0,!1,null,null,!1,!1,"",Mh);return t._reactRootContainer=C,t[sn]=C.current,Ii(t.nodeType===8?t.parentNode:t),sr(function(){bo(n,C,o,a)}),C}function Do(t,n,o,a,c){var f=o._reactRootContainer;if(f){var p=f;if(typeof c=="function"){var v=c;c=function(){var C=Po(p);v.call(C)}}bo(n,p,t,c)}else p=Bv(o,n,t,c,a);return Po(p)}dd=function(t){switch(t.tag){case 3:var n=t.stateNode;if(n.current.memoizedState.isDehydrated){var o=hi(n.pendingLanes);o!==0&&(Ol(n,o|1),xt(n,Ve()),!(Se&6)&&(Br=Ve()+500,bn()))}break;case 13:sr(function(){var a=un(t,1);if(a!==null){var c=mt();$t(a,t,1,c)}}),au(t,1)}},Al=function(t){if(t.tag===13){var n=un(t,134217728);if(n!==null){var o=mt();$t(n,t,134217728,o)}au(t,134217728)}},fd=function(t){if(t.tag===13){var n=An(t),o=un(t,n);if(o!==null){var a=mt();$t(o,t,n,a)}au(t,n)}},hd=function(){return Ie},pd=function(t,n){var o=Ie;try{return Ie=t,n()}finally{Ie=o}},Tl=function(t,n,o){switch(n){case"input":if(_l(t,o),n=o.name,o.type==="radio"&&n!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<o.length;n++){var a=o[n];if(a!==t&&a.form===t.form){var c=qs(a);if(!c)throw Error(r(90));jc(a),_l(a,c)}}}break;case"textarea":Hc(t,o);break;case"select":n=o.value,n!=null&&vr(t,!!o.multiple,n,!1)}},Jc=tu,Zc=sr;var Uv={usingClientEntryPoint:!1,Events:[Ri,Ir,qs,Kc,Xc,tu]},Vi={findFiberByHostInstance:Xn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Hv={bundleType:Vi.bundleType,version:Vi.version,rendererPackageName:Vi.rendererPackageName,rendererConfig:Vi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:te.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=rd(t),t===null?null:t.stateNode},findFiberByHostInstance:Vi.findFiberByHostInstance||Wv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oo.isDisabled&&Oo.supportsFiber)try{Ps=Oo.inject(Hv),Kt=Oo}catch{}}return St.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Uv,St.createPortal=function(t,n){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cu(n))throw Error(r(200));return zv(t,n,null,o)},St.createRoot=function(t,n){if(!cu(t))throw Error(r(299));var o=!1,a="",c=Rh;return n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(c=n.onRecoverableError)),n=lu(t,1,!1,null,null,o,!1,a,c),t[sn]=n.current,Ii(t.nodeType===8?t.parentNode:t),new uu(n)},St.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=rd(n),t=t===null?null:t.stateNode,t},St.flushSync=function(t){return sr(t)},St.hydrate=function(t,n,o){if(!Mo(n))throw Error(r(200));return Do(null,t,n,!0,o)},St.hydrateRoot=function(t,n,o){if(!cu(t))throw Error(r(405));var a=o!=null&&o.hydratedSources||null,c=!1,f="",p=Rh;if(o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(p=o.onRecoverableError)),n=bh(n,null,t,1,o??null,c,!1,f,p),t[sn]=n.current,Ii(t),a)for(t=0;t<a.length;t++)o=a[t],c=o._getVersion,c=c(o._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[o,c]:n.mutableSourceEagerHydrationData.push(o,c);return new Ro(n)},St.render=function(t,n,o){if(!Mo(n))throw Error(r(200));return Do(null,t,n,!1,o)},St.unmountComponentAtNode=function(t){if(!Mo(t))throw Error(r(40));return t._reactRootContainer?(sr(function(){Do(null,null,t,!1,function(){t._reactRootContainer=null,t[sn]=null})}),!0):!1},St.unstable_batchedUpdates=tu,St.unstable_renderSubtreeIntoContainer=function(t,n,o,a){if(!Mo(o))throw Error(r(200));if(t==null||t._reactInternals===void 0)throw Error(r(38));return Do(t,n,o,!1,a)},St.version="18.3.1-next-f1338f8080-20240426",St}var Wh;function Xv(){if(Wh)return hu.exports;Wh=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),hu.exports=Kv(),hu.exports}var Bh;function Jv(){if(Bh)return Lo;Bh=1;var i=Xv();return Lo.createRoot=i.createRoot,Lo.hydrateRoot=i.hydrateRoot,Lo}var Zv=Jv(),J=rc(),gu,Uh;function e_(){if(Uh)return gu;Uh=1;var i="Expected a function",e=NaN,r="[object Symbol]",s=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,d=/^0o[0-7]+$/i,h=parseInt,m=typeof Ao=="object"&&Ao&&Ao.Object===Object&&Ao,g=typeof self=="object"&&self&&self.Object===Object&&self,x=m||g||Function("return this")(),_=Object.prototype,w=_.toString,I=Math.max,b=Math.min,D=function(){return x.Date.now()};function L(K,se,_e){var H,ae,ue,ve,q,xe,ze=0,we=!1,Ne=!1,me=!0;if(typeof K!="function")throw new TypeError(i);se=te(se)||0,W(_e)&&(we=!!_e.leading,Ne="maxWait"in _e,ue=Ne?I(te(_e.maxWait)||0,se):ue,me="trailing"in _e?!!_e.trailing:me);function z(ie){var de=H,Te=ae;return H=ae=void 0,ze=ie,ve=K.apply(Te,de),ve}function X(ie){return ze=ie,q=setTimeout(P,se),we?z(ie):ve}function B(ie){var de=ie-xe,Te=ie-ze,lt=se-de;return Ne?b(lt,ue-Te):lt}function E(ie){var de=ie-xe,Te=ie-ze;return xe===void 0||de>=se||de<0||Ne&&Te>=ue}function P(){var ie=D();if(E(ie))return oe(ie);q=setTimeout(P,B(ie))}function oe(ie){return q=void 0,me&&H?z(ie):(H=ae=void 0,ve)}function ce(){q!==void 0&&clearTimeout(q),ze=0,H=xe=ae=q=void 0}function Ce(){return q===void 0?ve:oe(D())}function ge(){var ie=D(),de=E(ie);if(H=arguments,ae=this,xe=ie,de){if(q===void 0)return X(xe);if(Ne)return q=setTimeout(P,se),z(xe)}return q===void 0&&(q=setTimeout(P,se)),ve}return ge.cancel=ce,ge.flush=Ce,ge}function W(K){var se=typeof K;return!!K&&(se=="object"||se=="function")}function j(K){return!!K&&typeof K=="object"}function V(K){return typeof K=="symbol"||j(K)&&w.call(K)==r}function te(K){if(typeof K=="number")return K;if(V(K))return e;if(W(K)){var se=typeof K.valueOf=="function"?K.valueOf():K;K=W(se)?se+"":se}if(typeof K!="string")return K===0?K:+K;K=K.replace(s,"");var _e=u.test(K);return _e||d.test(K)?h(K.slice(2),_e?2:8):l.test(K)?e:+K}return gu=L,gu}e_();var qp=typeof window<"u"?J.useLayoutEffect:J.useEffect;function Hh(i,e,r,s){const l=J.useRef(e);qp(()=>{l.current=e},[e]),J.useEffect(()=>{const u=window;if(!(u&&u.addEventListener))return;const d=h=>{l.current(h)};return u.addEventListener(i,d,s),()=>{u.removeEventListener(i,d,s)}},[i,r,s])}function $h(i){const e=J.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return qp(()=>{e.current=i},[i]),J.useCallback((...r)=>{var s;return(s=e.current)==null?void 0:s.call(e,...r)},[e])}var yu=typeof window>"u";function Pe(i,e,r={}){const{initializeWithValue:s=!0}=r,l=J.useCallback(w=>r.serializer?r.serializer(w):JSON.stringify(w),[r]),u=J.useCallback(w=>{if(r.deserializer)return r.deserializer(w);if(w==="undefined")return;const I=e instanceof Function?e():e;let b;try{b=JSON.parse(w)}catch(D){return console.error("Error parsing JSON:",D),I}return b},[r,e]),d=J.useCallback(()=>{const w=e instanceof Function?e():e;if(yu)return w;try{const I=window.localStorage.getItem(i);return I?u(I):w}catch(I){return console.warn(`Error reading localStorage key “${i}”:`,I),w}},[e,i,u]),[h,m]=J.useState(()=>s?d():e instanceof Function?e():e),g=$h(w=>{yu&&console.warn(`Tried setting localStorage key “${i}” even though environment is not a client`);try{const I=w instanceof Function?w(d()):w;window.localStorage.setItem(i,l(I)),m(I),window.dispatchEvent(new StorageEvent("local-storage",{key:i}))}catch(I){console.warn(`Error setting localStorage key “${i}”:`,I)}}),x=$h(()=>{yu&&console.warn(`Tried removing localStorage key “${i}” even though environment is not a client`);const w=e instanceof Function?e():e;window.localStorage.removeItem(i),m(w),window.dispatchEvent(new StorageEvent("local-storage",{key:i}))});J.useEffect(()=>{m(d())},[i]);const _=J.useCallback(w=>{w.key&&w.key!==i||m(d())},[i,d]);return Hh("storage",_),Hh("local-storage",_),[h,g,x]}function kt({title:i,setModal:e,node:r,subModal:s}){return y.jsx("div",{className:"fixed p-4 bg-black/50 backdrop-blur inset-0 z-10",children:y.jsxs("div",{className:`${s&&"mt-2 mx-2"} bg-white dark:bg-neutral-800 dark:ring-2 dark:ring-neutral-700 dark:text-white p-4 rounded-xl max-w-lg mx-auto`,children:[y.jsxs("div",{className:"flex gap-4 justify-between items-start",children:[y.jsx("h3",{children:i}),y.jsx("button",{className:"btn_1 dark:!bg-black rotate-45",onClick:()=>e(!1),children:"+"})]}),y.jsx("div",{className:"pt-4",children:r})]})})}const Vh=["#EA4335","#FFB705","#E65100","#34A853","#4285F4","#000"],t_=["Зарплата","Инвестиции","Подарок","Другое"],n_=["Аптека","Аренда","Дом","Другое","Заправка","Кафе","Одежда","Платежи","Подарки","Продукты","Редкое","Связь","Учеба","Школа"],Ou=[{id:"1",title:"грн",exchangeRate:1},{id:"2",title:"pln",exchangeRate:1},{id:"3",title:"€",exchangeRate:1},{id:"4",title:"$",exchangeRate:1}],ot=[];for(let i=0;i<256;++i)ot.push((i+256).toString(16).slice(1));function r_(i,e=0){return(ot[i[e+0]]+ot[i[e+1]]+ot[i[e+2]]+ot[i[e+3]]+"-"+ot[i[e+4]]+ot[i[e+5]]+"-"+ot[i[e+6]]+ot[i[e+7]]+"-"+ot[i[e+8]]+ot[i[e+9]]+"-"+ot[i[e+10]]+ot[i[e+11]]+ot[i[e+12]]+ot[i[e+13]]+ot[i[e+14]]+ot[i[e+15]]).toLowerCase()}let vu;const i_=new Uint8Array(16);function s_(){if(!vu){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");vu=crypto.getRandomValues.bind(crypto)}return vu(i_)}const o_=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Gh={randomUUID:o_};function Kp(i,e,r){if(Gh.randomUUID&&!e&&!i)return Gh.randomUUID();i=i||{};const s=i.random||(i.rng||s_)();return s[6]=s[6]&15|64,s[8]=s[8]&63|128,r_(s)}function Wo({title:i,dascription:e,onClose:r,onConfirm:s}){return y.jsx("div",{className:"fixed flex items-center p-6 bg-black/50 backdrop-blur inset-0 z-10",children:y.jsxs("div",{className:"bg-white dark:bg-neutral-700 dark:text-white p-4 rounded-xl max-w-lg mx-auto",children:[y.jsx("h3",{className:"text-center",children:i}),y.jsx("p",{className:"mt-2 text-neutral-500 dark:text-neutral-200 text-center",children:e}),y.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[y.jsx("button",{className:"btn_2 border border-[#EA4335] text-[#EA4335]",onClick:()=>s(),children:"Подтвердить"}),y.jsx("button",{className:"btn_2",onClick:()=>r(!1),children:"Отменить"})]})]})})}function Xp({setModal:i,editMode:e,account:r}){const[s]=Pe("localMainCurrency",""),[l,u]=Pe("localAccounts",[]),[d,h]=J.useState(r?r.title:""),[m,g]=J.useState(r?r.currency:""),[x,_]=J.useState(r?r.initialBalance:""),[w,I]=J.useState(r?r.color:Vh[0]),b=()=>{const j={id:e&&r?r.id:Kp(),title:d,currency:m,color:w,initialBalance:Number(x)},V=l.findIndex(te=>te.id===j.id);if(V>-1){const te=[...l];te[V]=j,u(te),i(!1)}else u([...l,j]),i(!1)},D=j=>{const V=l.filter(te=>te.id!==j);u(V)},[L,W]=J.useState(!1);return y.jsx(y.Fragment,{children:s?y.jsxs(y.Fragment,{children:[L&&y.jsx(Wo,{title:"Удаление счета",dascription:"Вы действительно хотите удалить счет?",onClose:()=>W(!1),onConfirm:()=>{i(!1),r&&D(r.id)}}),y.jsxs("div",{className:"flex gap-2 items-end",children:[y.jsxs("div",{className:"w-3/4",children:[y.jsx("h3",{children:"Название счета"}),y.jsx("input",{type:"text",placeholder:"Название",className:"input text-lg mt-1",value:d,onChange:j=>h(j.target.value)})]}),y.jsxs("div",{children:[y.jsx("p",{children:"Начальный баланс"}),y.jsx("input",{type:"number",placeholder:"Сумма",className:"input text-lg mt-1",value:x,onChange:j=>_(j.target.value)})]})]}),y.jsx("p",{className:"mt-4",children:"Валюта счета"}),y.jsx("div",{className:"mt-1 grid grid-cols-4 gap-4",children:Ou.map(({id:j,title:V})=>y.jsx("button",{className:`${m===V?"ring-2 ring-neutral-500":""} btn_2`,onClick:()=>g(V),children:V},j))}),y.jsx("p",{className:"mt-4",children:"Цвет"}),y.jsx("div",{className:"mt-1 flex justify-between",children:Vh.map(j=>y.jsx("button",{style:{backgroundColor:j},className:`${w===j?"scale-[119%]":""} w-10 h-10 aspect-square px-4 rounded-full transition-all`,onClick:()=>I(j)},j))}),y.jsxs("div",{className:"mt-6 flex gap-4 justify-end",children:[e&&y.jsx("button",{className:"btn_2 border border-[#EA4335] text-[#EA4335]",onClick:()=>W(!0),disabled:!d||!m,children:"Удалить"}),y.jsx("button",{className:"btn_2",onClick:b,disabled:!d||!m,children:e?"Изменить":"Сохранить"})]})]}):"Сначала выберите основную валюту в настройках"})}function l_({account:i}){const[e,r]=J.useState(!1),[s]=Pe("localTransactions",[]),[l]=Pe("localExpensesTransactions",[]),u=[...s,...l],h=((m,g)=>m.filter(x=>x.accountId===g).reduce((x,_)=>x+_.amount,0))(u,i.id);return y.jsxs(y.Fragment,{children:[e&&y.jsx(kt,{title:"Счет",setModal:r,node:y.jsx(Xp,{editMode:!0,account:i,setModal:r})}),y.jsx("div",{style:{backgroundColor:i.color},onClick:()=>r(!0),className:"rounded-lg p-2 w-full flex justify-between items-start text-white font-aptosSemiBold cursor-pointer",children:y.jsxs("div",{children:[y.jsxs("p",{className:"text-xs",children:[i.title,", ",y.jsx("span",{children:i.currency})]}),y.jsxs("p",{className:"text-lg font-aptosSemiBold",children:[i.initialBalance+h," ",y.jsx("span",{className:"text-xs",children:i.currency})]})]})})]})}function a_(){const[i,e]=J.useState(!1),[r]=Pe("localAccounts",[]);return y.jsxs(y.Fragment,{children:[i&&y.jsx(kt,{title:"Добавить счет",setModal:e,node:y.jsx(Xp,{setModal:e})}),y.jsxs("section",{children:[y.jsxs("div",{className:"flex justify-between items-end",children:[y.jsx("h3",{children:"Счета"}),y.jsx("button",{className:"btn_1",onClick:()=>e(!0),children:"+"})]}),r.length>0?y.jsx("div",{className:"mt-4 grid grid-cols-2 gap-2 items-center",children:r.map(s=>y.jsx(l_,{account:s},s.id))}):y.jsx("p",{className:"text-neutral-500",children:"Добавьте первый счет"})]})]})}const u_=()=>{const[i,e]=J.useState(!1),r=()=>{e(s=>!s)};return J.useEffect(()=>{const s=localStorage.getItem("theme");if(s)e(s==="dark");else{const l=window.matchMedia("(prefers-color-scheme: dark)").matches;e(l)}},[]),J.useEffect(()=>{const s=window.matchMedia("(prefers-color-scheme: dark)"),l=u=>{e(u.matches)};return s.addEventListener("change",l),()=>{s.removeEventListener("change",l)}},[]),J.useEffect(()=>{i?(document.body.classList.add("dark"),localStorage.setItem("theme","dark")):(document.body.classList.remove("dark"),localStorage.setItem("theme","light"))},[i]),{isDarkMode:i,toggleDarkMode:r}};function c_({}){const{isDarkMode:i,toggleDarkMode:e}=u_();return y.jsx("button",{onClick:e,className:"p-2 bg-gray-200 dark:bg-black text-black dark:text-white px-4 h-10 rounded-lg leading-none mt-4",children:i?"Светлая тема":"Темная тема"})}var Yh={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F=function(i,e){if(!i)throw ti(e)},ti=function(i){return new Error("Firebase Database ("+Jp.SDK_VERSION+") INTERNAL ASSERT FAILED: "+i)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp=function(i){const e=[];let r=0;for(let s=0;s<i.length;s++){let l=i.charCodeAt(s);l<128?e[r++]=l:l<2048?(e[r++]=l>>6|192,e[r++]=l&63|128):(l&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(i.charCodeAt(++s)&1023),e[r++]=l>>18|240,e[r++]=l>>12&63|128,e[r++]=l>>6&63|128,e[r++]=l&63|128):(e[r++]=l>>12|224,e[r++]=l>>6&63|128,e[r++]=l&63|128)}return e},d_=function(i){const e=[];let r=0,s=0;for(;r<i.length;){const l=i[r++];if(l<128)e[s++]=String.fromCharCode(l);else if(l>191&&l<224){const u=i[r++];e[s++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=i[r++],d=i[r++],h=i[r++],m=((l&7)<<18|(u&63)<<12|(d&63)<<6|h&63)-65536;e[s++]=String.fromCharCode(55296+(m>>10)),e[s++]=String.fromCharCode(56320+(m&1023))}else{const u=i[r++],d=i[r++];e[s++]=String.fromCharCode((l&15)<<12|(u&63)<<6|d&63)}}return e.join("")},ic={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<i.length;l+=3){const u=i[l],d=l+1<i.length,h=d?i[l+1]:0,m=l+2<i.length,g=m?i[l+2]:0,x=u>>2,_=(u&3)<<4|h>>4;let w=(h&15)<<2|g>>6,I=g&63;m||(I=64,d||(w=64)),s.push(r[x],r[_],r[w],r[I])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Zp(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):d_(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<i.length;){const u=r[i.charAt(l++)],h=l<i.length?r[i.charAt(l)]:0;++l;const g=l<i.length?r[i.charAt(l)]:64;++l;const _=l<i.length?r[i.charAt(l)]:64;if(++l,u==null||h==null||g==null||_==null)throw new f_;const w=u<<2|h>>4;if(s.push(w),g!==64){const I=h<<4&240|g>>2;if(s.push(I),_!==64){const b=g<<6&192|_;s.push(b)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class f_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const em=function(i){const e=Zp(i);return ic.encodeByteArray(e,!0)},Bo=function(i){return em(i).replace(/\./g,"")},Au=function(i){try{return ic.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h_(i){return tm(void 0,i)}function tm(i,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const r=e;return new Date(r.getTime());case Object:i===void 0&&(i={});break;case Array:i=[];break;default:return e}for(const r in e)!e.hasOwnProperty(r)||!p_(r)||(i[r]=tm(i[r],e[r]));return i}function p_(i){return i!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_=()=>m_().__FIREBASE_DEFAULTS__,y_=()=>{if(typeof process>"u"||typeof Yh>"u")return;const i=Yh.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},v_=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&Au(i[1]);return e&&JSON.parse(e)},nm=()=>{try{return g_()||y_()||v_()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},__=i=>{var e,r;return(r=(e=nm())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[i]},w_=i=>{const e=__(i);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),s]:[e.substring(0,r),s]},rm=()=>{var i;return(i=nm())===null||i===void 0?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,s)=>{r?this.reject(r):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},s=e||"demo-project",l=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Bo(JSON.stringify(r)),Bo(JSON.stringify(d)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function im(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(x_())}function S_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sm(){return Jp.NODE_ADMIN===!0}function E_(){try{return typeof indexedDB=="object"}catch{return!1}}function k_(){return new Promise((i,e)=>{try{let r=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),r||self.indexedDB.deleteDatabase(s),i(!0)},l.onupgradeneeded=()=>{r=!1},l.onerror=()=>{var u;e(((u=l.error)===null||u===void 0?void 0:u.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N_="FirebaseError";class gs extends Error{constructor(e,r,s){super(r),this.code=e,this.customData=s,this.name=N_,Object.setPrototypeOf(this,gs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,om.prototype.create)}}class om{constructor(e,r,s){this.service=e,this.serviceName=r,this.errors=s}create(e,...r){const s=r[0]||{},l=`${this.service}/${e}`,u=this.errors[e],d=u?T_(u,s):"Error",h=`${this.serviceName}: ${d} (${l}).`;return new gs(l,h,s)}}function T_(i,e){return i.replace(I_,(r,s)=>{const l=e[s];return l!=null?String(l):`<${s}?>`})}const I_=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ss(i){return JSON.parse(i)}function Ke(i){return JSON.stringify(i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm=function(i){let e={},r={},s={},l="";try{const u=i.split(".");e=ss(Au(u[0])||""),r=ss(Au(u[1])||""),l=u[2],s=r.d||{},delete r.d}catch{}return{header:e,claims:r,data:s,signature:l}},b_=function(i){const e=lm(i),r=e.claims;return!!r&&typeof r=="object"&&r.hasOwnProperty("iat")},P_=function(i){const e=lm(i).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(i,e){return Object.prototype.hasOwnProperty.call(i,e)}function Xr(i,e){if(Object.prototype.hasOwnProperty.call(i,e))return i[e]}function Qh(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Uo(i,e,r){const s={};for(const l in i)Object.prototype.hasOwnProperty.call(i,l)&&(s[l]=e.call(r,i[l],l,i));return s}function Lu(i,e){if(i===e)return!0;const r=Object.keys(i),s=Object.keys(e);for(const l of r){if(!s.includes(l))return!1;const u=i[l],d=e[l];if(qh(u)&&qh(d)){if(!Lu(u,d))return!1}else if(u!==d)return!1}for(const l of s)if(!r.includes(l))return!1;return!0}function qh(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(i){const e=[];for(const[r,s]of Object.entries(i))Array.isArray(s)?s.forEach(l=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,r){r||(r=0);const s=this.W_;if(typeof e=="string")for(let _=0;_<16;_++)s[_]=e.charCodeAt(r)<<24|e.charCodeAt(r+1)<<16|e.charCodeAt(r+2)<<8|e.charCodeAt(r+3),r+=4;else for(let _=0;_<16;_++)s[_]=e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3],r+=4;for(let _=16;_<80;_++){const w=s[_-3]^s[_-8]^s[_-14]^s[_-16];s[_]=(w<<1|w>>>31)&4294967295}let l=this.chain_[0],u=this.chain_[1],d=this.chain_[2],h=this.chain_[3],m=this.chain_[4],g,x;for(let _=0;_<80;_++){_<40?_<20?(g=h^u&(d^h),x=1518500249):(g=u^d^h,x=1859775393):_<60?(g=u&d|h&(u|d),x=2400959708):(g=u^d^h,x=3395469782);const w=(l<<5|l>>>27)+g+m+x+s[_]&4294967295;m=h,h=d,d=(u<<30|u>>>2)&4294967295,u=l,l=w}this.chain_[0]=this.chain_[0]+l&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+d&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+m&4294967295}update(e,r){if(e==null)return;r===void 0&&(r=e.length);const s=r-this.blockSize;let l=0;const u=this.buf_;let d=this.inbuf_;for(;l<r;){if(d===0)for(;l<=s;)this.compress_(e,l),l+=this.blockSize;if(typeof e=="string"){for(;l<r;)if(u[d]=e.charCodeAt(l),++d,++l,d===this.blockSize){this.compress_(u),d=0;break}}else for(;l<r;)if(u[d]=e[l],++d,++l,d===this.blockSize){this.compress_(u),d=0;break}}this.inbuf_=d,this.total_+=r}digest(){const e=[];let r=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let l=this.blockSize-1;l>=56;l--)this.buf_[l]=r&255,r/=256;this.compress_(this.buf_);let s=0;for(let l=0;l<5;l++)for(let u=24;u>=0;u-=8)e[s]=this.chain_[l]>>u&255,++s;return e}}function sc(i,e){return`${i} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_=function(i){const e=[];let r=0;for(let s=0;s<i.length;s++){let l=i.charCodeAt(s);if(l>=55296&&l<=56319){const u=l-55296;s++,F(s<i.length,"Surrogate pair missing trail surrogate.");const d=i.charCodeAt(s)-56320;l=65536+(u<<10)+d}l<128?e[r++]=l:l<2048?(e[r++]=l>>6|192,e[r++]=l&63|128):l<65536?(e[r++]=l>>12|224,e[r++]=l>>6&63|128,e[r++]=l&63|128):(e[r++]=l>>18|240,e[r++]=l>>12&63|128,e[r++]=l>>6&63|128,e[r++]=l&63|128)}return e},ll=function(i){let e=0;for(let r=0;r<i.length;r++){const s=i.charCodeAt(r);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,r++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(i){return i&&i._delegate?i._delegate:i}class os{constructor(e,r,s){this.name=e,this.instanceFactory=r,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const s=new ol;if(this.instancesDeferred.set(r,s),this.isInitialized(r)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:r});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),l=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(l)return null;throw u}else{if(l)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(L_(e))try{this.getOrInitializeService({instanceIdentifier:ur})}catch{}for(const[r,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(r);try{const u=this.getOrInitializeService({instanceIdentifier:l});s.resolve(u)}catch{}}}}clearInstance(e=ur){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ur){return this.instances.has(e)}getOptions(e=ur){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:r});for(const[u,d]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(u);s===h&&d.resolve(l)}return l}onInit(e,r){var s;const l=this.normalizeInstanceIdentifier(r),u=(s=this.onInitCallbacks.get(l))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(l,u);const d=this.instances.get(l);return d&&e(d,l),()=>{u.delete(e)}}invokeOnInitCallbacks(e,r){const s=this.onInitCallbacks.get(r);if(s)for(const l of s)try{l(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:A_(e),options:r}),this.instances.set(e,s),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ur){return this.component?this.component.multipleInstances?e:ur:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function A_(i){return i===ur?void 0:i}function L_(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new O_(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(De||(De={}));const j_={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},z_=De.INFO,W_={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},B_=(i,e,...r)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),l=W_[e];if(l)console[l](`[${s}]  ${i.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class am{constructor(e){this.name=e,this._logLevel=z_,this._logHandler=B_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?j_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const U_=(i,e)=>e.some(r=>i instanceof r);let Kh,Xh;function H_(){return Kh||(Kh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $_(){return Xh||(Xh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const um=new WeakMap,Fu=new WeakMap,cm=new WeakMap,_u=new WeakMap,oc=new WeakMap;function V_(i){const e=new Promise((r,s)=>{const l=()=>{i.removeEventListener("success",u),i.removeEventListener("error",d)},u=()=>{r(Un(i.result)),l()},d=()=>{s(i.error),l()};i.addEventListener("success",u),i.addEventListener("error",d)});return e.then(r=>{r instanceof IDBCursor&&um.set(r,i)}).catch(()=>{}),oc.set(e,i),e}function G_(i){if(Fu.has(i))return;const e=new Promise((r,s)=>{const l=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",d),i.removeEventListener("abort",d)},u=()=>{r(),l()},d=()=>{s(i.error||new DOMException("AbortError","AbortError")),l()};i.addEventListener("complete",u),i.addEventListener("error",d),i.addEventListener("abort",d)});Fu.set(i,e)}let ju={get(i,e,r){if(i instanceof IDBTransaction){if(e==="done")return Fu.get(i);if(e==="objectStoreNames")return i.objectStoreNames||cm.get(i);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Un(i[e])},set(i,e,r){return i[e]=r,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function Y_(i){ju=i(ju)}function Q_(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const s=i.call(wu(this),e,...r);return cm.set(s,e.sort?e.sort():[e]),Un(s)}:$_().includes(i)?function(...e){return i.apply(wu(this),e),Un(um.get(this))}:function(...e){return Un(i.apply(wu(this),e))}}function q_(i){return typeof i=="function"?Q_(i):(i instanceof IDBTransaction&&G_(i),U_(i,H_())?new Proxy(i,ju):i)}function Un(i){if(i instanceof IDBRequest)return V_(i);if(_u.has(i))return _u.get(i);const e=q_(i);return e!==i&&(_u.set(i,e),oc.set(e,i)),e}const wu=i=>oc.get(i);function K_(i,e,{blocked:r,upgrade:s,blocking:l,terminated:u}={}){const d=indexedDB.open(i,e),h=Un(d);return s&&d.addEventListener("upgradeneeded",m=>{s(Un(d.result),m.oldVersion,m.newVersion,Un(d.transaction),m)}),r&&d.addEventListener("blocked",m=>r(m.oldVersion,m.newVersion,m)),h.then(m=>{u&&m.addEventListener("close",()=>u()),l&&m.addEventListener("versionchange",g=>l(g.oldVersion,g.newVersion,g))}).catch(()=>{}),h}const X_=["get","getKey","getAll","getAllKeys","count"],J_=["put","add","delete","clear"],Cu=new Map;function Jh(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Cu.get(e))return Cu.get(e);const r=e.replace(/FromIndex$/,""),s=e!==r,l=J_.includes(r);if(!(r in(s?IDBIndex:IDBObjectStore).prototype)||!(l||X_.includes(r)))return;const u=async function(d,...h){const m=this.transaction(d,l?"readwrite":"readonly");let g=m.store;return s&&(g=g.index(h.shift())),(await Promise.all([g[r](...h),l&&m.done]))[0]};return Cu.set(e,u),u}Y_(i=>({...i,get:(e,r,s)=>Jh(e,r)||i.get(e,r,s),has:(e,r)=>!!Jh(e,r)||i.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(e0(r)){const s=r.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(r=>r).join(" ")}}function e0(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const zu="@firebase/app",Zh="0.10.16";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gn=new am("@firebase/app"),t0="@firebase/app-compat",n0="@firebase/analytics-compat",r0="@firebase/analytics",i0="@firebase/app-check-compat",s0="@firebase/app-check",o0="@firebase/auth",l0="@firebase/auth-compat",a0="@firebase/database",u0="@firebase/data-connect",c0="@firebase/database-compat",d0="@firebase/functions",f0="@firebase/functions-compat",h0="@firebase/installations",p0="@firebase/installations-compat",m0="@firebase/messaging",g0="@firebase/messaging-compat",y0="@firebase/performance",v0="@firebase/performance-compat",_0="@firebase/remote-config",w0="@firebase/remote-config-compat",C0="@firebase/storage",x0="@firebase/storage-compat",S0="@firebase/firestore",E0="@firebase/vertexai",k0="@firebase/firestore-compat",N0="firebase",T0="11.0.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wu="[DEFAULT]",I0={[zu]:"fire-core",[t0]:"fire-core-compat",[r0]:"fire-analytics",[n0]:"fire-analytics-compat",[s0]:"fire-app-check",[i0]:"fire-app-check-compat",[o0]:"fire-auth",[l0]:"fire-auth-compat",[a0]:"fire-rtdb",[u0]:"fire-data-connect",[c0]:"fire-rtdb-compat",[d0]:"fire-fn",[f0]:"fire-fn-compat",[h0]:"fire-iid",[p0]:"fire-iid-compat",[m0]:"fire-fcm",[g0]:"fire-fcm-compat",[y0]:"fire-perf",[v0]:"fire-perf-compat",[_0]:"fire-rc",[w0]:"fire-rc-compat",[C0]:"fire-gcs",[x0]:"fire-gcs-compat",[S0]:"fire-fst",[k0]:"fire-fst-compat",[E0]:"fire-vertex","fire-js":"fire-js",[N0]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho=new Map,b0=new Map,Bu=new Map;function ep(i,e){try{i.container.addComponent(e)}catch(r){gn.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,r)}}function $o(i){const e=i.name;if(Bu.has(e))return gn.debug(`There were multiple attempts to register component ${e}.`),!1;Bu.set(e,i);for(const r of Ho.values())ep(r,i);for(const r of b0.values())ep(r,i);return!0}function P0(i,e){const r=i.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),i.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Hn=new om("app","Firebase",R0);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e,r,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new os("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Hn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0=T0;function dm(i,e={}){let r=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Wu,automaticDataCollectionEnabled:!1},e),l=s.name;if(typeof l!="string"||!l)throw Hn.create("bad-app-name",{appName:String(l)});if(r||(r=rm()),!r)throw Hn.create("no-options");const u=Ho.get(l);if(u){if(Lu(r,u.options)&&Lu(s,u.config))return u;throw Hn.create("duplicate-app",{appName:l})}const d=new F_(l);for(const m of Bu.values())d.addComponent(m);const h=new M0(r,s,d);return Ho.set(l,h),h}function O0(i=Wu){const e=Ho.get(i);if(!e&&i===Wu&&rm())return dm();if(!e)throw Hn.create("no-app",{appName:i});return e}function Gr(i,e,r){var s;let l=(s=I0[i])!==null&&s!==void 0?s:i;r&&(l+=`-${r}`);const u=l.match(/\s|\//),d=e.match(/\s|\//);if(u||d){const h=[`Unable to register library "${l}" with version "${e}":`];u&&h.push(`library name "${l}" contains illegal characters (whitespace or "/")`),u&&d&&h.push("and"),d&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gn.warn(h.join(" "));return}$o(new os(`${l}-version`,()=>({library:l,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0="firebase-heartbeat-database",L0=1,ls="firebase-heartbeat-store";let xu=null;function fm(){return xu||(xu=K_(A0,L0,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(ls)}catch(r){console.warn(r)}}}}).catch(i=>{throw Hn.create("idb-open",{originalErrorMessage:i.message})})),xu}async function F0(i){try{const r=(await fm()).transaction(ls),s=await r.objectStore(ls).get(hm(i));return await r.done,s}catch(e){if(e instanceof gs)gn.warn(e.message);else{const r=Hn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});gn.warn(r.message)}}}async function tp(i,e){try{const s=(await fm()).transaction(ls,"readwrite");await s.objectStore(ls).put(e,hm(i)),await s.done}catch(r){if(r instanceof gs)gn.warn(r.message);else{const s=Hn.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});gn.warn(s.message)}}}function hm(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0=1024,z0=30*24*60*60*1e3;class W0{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new U0(r),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,r;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=np();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(d=>d.date===u)?void 0:(this._heartbeatsCache.heartbeats.push({date:u,agent:l}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(d=>{const h=new Date(d.date).valueOf();return Date.now()-h<=z0}),this._storage.overwrite(this._heartbeatsCache))}catch(s){gn.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=np(),{heartbeatsToSend:s,unsentEntries:l}=B0(this._heartbeatsCache.heartbeats),u=Bo(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=r,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(r){return gn.warn(r),""}}}function np(){return new Date().toISOString().substring(0,10)}function B0(i,e=j0){const r=[];let s=i.slice();for(const l of i){const u=r.find(d=>d.agent===l.agent);if(u){if(u.dates.push(l.date),rp(r)>e){u.dates.pop();break}}else if(r.push({agent:l.agent,dates:[l.date]}),rp(r)>e){r.pop();break}s=s.slice(1)}return{heartbeatsToSend:r,unsentEntries:s}}class U0{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return E_()?k_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await F0(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const l=await this.read();return tp(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:l.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const l=await this.read();return tp(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:l.lastSentHeartbeatDate,heartbeats:[...l.heartbeats,...e.heartbeats]})}else return}}function rp(i){return Bo(JSON.stringify({version:2,heartbeats:i})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H0(i){$o(new os("platform-logger",e=>new Z_(e),"PRIVATE")),$o(new os("heartbeat",e=>new W0(e),"PRIVATE")),Gr(zu,Zh,i),Gr(zu,Zh,"esm2017"),Gr("fire-js","")}H0("");var ip={};const sp="@firebase/database",op="1.0.10";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pm="";function $0(i){pm=i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,r){r==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ke(r))}get(e){const r=this.domStorage_.getItem(this.prefixedName_(e));return r==null?null:ss(r)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,r){r==null?delete this.cache_[e]:this.cache_[e]=r}get(e){return vn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm=function(i){try{if(typeof window<"u"&&typeof window[i]<"u"){const e=window[i];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new V0(e)}}catch{}return new G0},fr=mm("localStorage"),Y0=mm("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr=new am("@firebase/database"),Q0=function(){let i=1;return function(){return i++}}(),gm=function(i){const e=D_(i),r=new M_;r.update(e);const s=r.digest();return ic.encodeByteArray(s)},ys=function(...i){let e="";for(let r=0;r<i.length;r++){const s=i[r];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=ys.apply(null,s):typeof s=="object"?e+=Ke(s):e+=s,e+=" "}return e};let es=null,lp=!0;const q0=function(i,e){F(!e,"Can't turn on custom loggers persistently."),Yr.logLevel=De.VERBOSE,es=Yr.log.bind(Yr)},ft=function(...i){if(lp===!0&&(lp=!1,es===null&&Y0.get("logging_enabled")===!0&&q0()),es){const e=ys.apply(null,i);es(e)}},vs=function(i){return function(...e){ft(i,...e)}},Uu=function(...i){const e="FIREBASE INTERNAL ERROR: "+ys(...i);Yr.error(e)},yn=function(...i){const e=`FIREBASE FATAL ERROR: ${ys(...i)}`;throw Yr.error(e),new Error(e)},Nt=function(...i){const e="FIREBASE WARNING: "+ys(...i);Yr.warn(e)},K0=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Nt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},ym=function(i){return typeof i=="number"&&(i!==i||i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY)},X0=function(i){if(document.readyState==="complete")i();else{let e=!1;const r=function(){if(!document.body){setTimeout(r,Math.floor(10));return}e||(e=!0,i())};document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&r()}),window.attachEvent("onload",r))}},Jr="[MIN_NAME]",pr="[MAX_NAME]",ri=function(i,e){if(i===e)return 0;if(i===Jr||e===pr)return-1;if(e===Jr||i===pr)return 1;{const r=ap(i),s=ap(e);return r!==null?s!==null?r-s===0?i.length-e.length:r-s:-1:s!==null?1:i<e?-1:1}},J0=function(i,e){return i===e?0:i<e?-1:1},Yi=function(i,e){if(e&&i in e)return e[i];throw new Error("Missing required key ("+i+") in object: "+Ke(e))},lc=function(i){if(typeof i!="object"||i===null)return Ke(i);const e=[];for(const s in i)e.push(s);e.sort();let r="{";for(let s=0;s<e.length;s++)s!==0&&(r+=","),r+=Ke(e[s]),r+=":",r+=lc(i[e[s]]);return r+="}",r},vm=function(i,e){const r=i.length;if(r<=e)return[i];const s=[];for(let l=0;l<r;l+=e)l+e>r?s.push(i.substring(l,r)):s.push(i.substring(l,l+e));return s};function Tt(i,e){for(const r in i)i.hasOwnProperty(r)&&e(r,i[r])}const _m=function(i){F(!ym(i),"Invalid JSON number");const e=11,r=52,s=(1<<e-1)-1;let l,u,d,h,m;i===0?(u=0,d=0,l=1/i===-1/0?1:0):(l=i<0,i=Math.abs(i),i>=Math.pow(2,1-s)?(h=Math.min(Math.floor(Math.log(i)/Math.LN2),s),u=h+s,d=Math.round(i*Math.pow(2,r-h)-Math.pow(2,r))):(u=0,d=Math.round(i/Math.pow(2,1-s-r))));const g=[];for(m=r;m;m-=1)g.push(d%2?1:0),d=Math.floor(d/2);for(m=e;m;m-=1)g.push(u%2?1:0),u=Math.floor(u/2);g.push(l?1:0),g.reverse();const x=g.join("");let _="";for(m=0;m<64;m+=8){let w=parseInt(x.substr(m,8),2).toString(16);w.length===1&&(w="0"+w),_=_+w}return _.toLowerCase()},Z0=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},ew=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function tw(i,e){let r="Unknown Error";i==="too_big"?r="The data requested exceeds the maximum size that can be accessed with a single request.":i==="permission_denied"?r="Client doesn't have permission to access the desired data.":i==="unavailable"&&(r="The service is unavailable");const s=new Error(i+" at "+e._path.toString()+": "+r);return s.code=i.toUpperCase(),s}const nw=new RegExp("^-?(0*)\\d{1,10}$"),rw=-2147483648,iw=2147483647,ap=function(i){if(nw.test(i)){const e=Number(i);if(e>=rw&&e<=iw)return e}return null},ii=function(i){try{i()}catch(e){setTimeout(()=>{const r=e.stack||"";throw Nt("Exception was thrown by user callback.",r),e},Math.floor(0))}},sw=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ts=function(i,e){const r=setTimeout(i,e);return typeof r=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(r):typeof r=="object"&&r.unref&&r.unref(),r};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e,r){this.appName_=e,this.appCheckProvider=r,this.appCheck=r==null?void 0:r.getImmediate({optional:!0}),this.appCheck||r==null||r.get().then(s=>this.appCheck=s)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((r,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(r,s):r(null)},0)})}addTokenChangeListener(e){var r;(r=this.appCheckProvider)===null||r===void 0||r.get().then(s=>s.addTokenListener(e))}notifyForInvalidToken(){Nt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,r,s){this.appName_=e,this.firebaseOptions_=r,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(l=>this.auth_=l)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(r=>r&&r.code==="auth/token-not-initialized"?(ft("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(r)):new Promise((r,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(r,s):r(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(r=>r.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(r=>r.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Nt(e)}}class zo{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}zo.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ac="5",wm="v",Cm="s",xm="r",Sm="f",Em=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,km="ls",Nm="p",Hu="ac",Tm="websocket",Im="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e,r,s,l,u=!1,d="",h=!1,m=!1){this.secure=r,this.namespace=s,this.webSocketOnly=l,this.nodeAdmin=u,this.persistenceKey=d,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=m,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=fr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&fr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",r=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${r}`}}function aw(i){return i.host!==i.internalHost||i.isCustomHost()||i.includeNamespaceInQueryParams}function Pm(i,e,r){F(typeof e=="string","typeof type must == string"),F(typeof r=="object","typeof params must == object");let s;if(e===Tm)s=(i.secure?"wss://":"ws://")+i.internalHost+"/.ws?";else if(e===Im)s=(i.secure?"https://":"http://")+i.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);aw(i)&&(r.ns=i.namespace);const l=[];return Tt(r,(u,d)=>{l.push(u+"="+d)}),s+l.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(){this.counters_={}}incrementCounter(e,r=1){vn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=r}get(){return h_(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Su={},Eu={};function uc(i){const e=i.toString();return Su[e]||(Su[e]=new uw),Su[e]}function cw(i,e){const r=i.toString();return Eu[r]||(Eu[r]=e()),Eu[r]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,r){this.closeAfterResponse=e,this.onClose=r,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,r){for(this.pendingResponses[e]=r;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let l=0;l<s.length;++l)s[l]&&ii(()=>{this.onMessage_(s[l])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const up="start",fw="close",hw="pLPCommand",pw="pRTLPCB",Rm="id",Mm="pw",Dm="ser",mw="cb",gw="seg",yw="ts",vw="d",_w="dframe",Om=1870,Am=30,ww=Om-Am,Cw=25e3,xw=3e4;class Vr{constructor(e,r,s,l,u,d,h){this.connId=e,this.repoInfo=r,this.applicationId=s,this.appCheckToken=l,this.authToken=u,this.transportSessionId=d,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=vs(e),this.stats_=uc(r),this.urlFn=m=>(this.appCheckToken&&(m[Hu]=this.appCheckToken),Pm(r,Im,m))}open(e,r){this.curSegmentNum=0,this.onDisconnect_=r,this.myPacketOrderer=new dw(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(xw)),X0(()=>{if(this.isClosed_)return;this.scriptTagHolder=new cc((...u)=>{const[d,h,m,g,x]=u;if(this.incrementIncomingBytes_(u),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,d===up)this.id=h,this.password=m;else if(d===fw)h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+d)},(...u)=>{const[d,h]=u;this.incrementIncomingBytes_(u),this.myPacketOrderer.handleResponse(d,h)},()=>{this.onClosed_()},this.urlFn);const s={};s[up]="t",s[Dm]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[mw]=this.scriptTagHolder.uniqueCallbackIdentifier),s[wm]=ac,this.transportSessionId&&(s[Cm]=this.transportSessionId),this.lastSessionId&&(s[km]=this.lastSessionId),this.applicationId&&(s[Nm]=this.applicationId),this.appCheckToken&&(s[Hu]=this.appCheckToken),typeof location<"u"&&location.hostname&&Em.test(location.hostname)&&(s[xm]=Sm);const l=this.urlFn(s);this.log_("Connecting via long-poll to "+l),this.scriptTagHolder.addTag(l,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Vr.forceAllow_=!0}static forceDisallow(){Vr.forceDisallow_=!0}static isAvailable(){return Vr.forceAllow_?!0:!Vr.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Z0()&&!ew()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const r=Ke(e);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const s=em(r),l=vm(s,ww);for(let u=0;u<l.length;u++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,l.length,l[u]),this.curSegmentNum++}addDisconnectPingFrame(e,r){this.myDisconnFrame=document.createElement("iframe");const s={};s[_w]="t",s[Rm]=e,s[Mm]=r,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const r=Ke(e).length;this.bytesReceived+=r,this.stats_.incrementCounter("bytes_received",r)}}class cc{constructor(e,r,s,l){this.onDisconnect=s,this.urlFn=l,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Q0(),window[hw+this.uniqueCallbackIdentifier]=e,window[pw+this.uniqueCallbackIdentifier]=r,this.myIFrame=cc.createIFrame_();let u="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(u='<script>document.domain="'+document.domain+'";<\/script>');const d="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(d),this.myIFrame.doc.close()}catch(h){ft("frame writing exception"),h.stack&&ft(h.stack),ft(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||ft("No IE domain setting required")}catch{const s=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,r){for(this.myID=e,this.myPW=r,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Rm]=this.myID,e[Mm]=this.myPW,e[Dm]=this.currentSerial;let r=this.urlFn(e),s="",l=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Am+s.length<=Om;){const d=this.pendingSegs.shift();s=s+"&"+gw+l+"="+d.seg+"&"+yw+l+"="+d.ts+"&"+vw+l+"="+d.d,l++}return r=r+s,this.addLongPollTag_(r,this.currentSerial),!0}else return!1}enqueueSegment(e,r,s){this.pendingSegs.push({seg:e,ts:r,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,r){this.outstandingRequests.add(r);const s=()=>{this.outstandingRequests.delete(r),this.newRequest_()},l=setTimeout(s,Math.floor(Cw)),u=()=>{clearTimeout(l),s()};this.addTag(e,u)}addTag(e,r){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const l=s.readyState;(!l||l==="loaded"||l==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),r())},s.onerror=()=>{ft("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw=16384,Ew=45e3;let Vo=null;typeof MozWebSocket<"u"?Vo=MozWebSocket:typeof WebSocket<"u"&&(Vo=WebSocket);class Vt{constructor(e,r,s,l,u,d,h){this.connId=e,this.applicationId=s,this.appCheckToken=l,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=vs(this.connId),this.stats_=uc(r),this.connURL=Vt.connectionURL_(r,d,h,l,s),this.nodeAdmin=r.nodeAdmin}static connectionURL_(e,r,s,l,u){const d={};return d[wm]=ac,typeof location<"u"&&location.hostname&&Em.test(location.hostname)&&(d[xm]=Sm),r&&(d[Cm]=r),s&&(d[km]=s),l&&(d[Hu]=l),u&&(d[Nm]=u),Pm(e,Tm,d)}open(e,r){this.onDisconnect=r,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,fr.set("previous_websocket_failure",!0);try{let s;sm(),this.mySock=new Vo(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const l=s.message||s.data;l&&this.log_(l),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const l=s.message||s.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){Vt.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(r);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&Vo!==null&&!Vt.forceDisallow_}static previouslyFailed(){return fr.isInMemoryStorage||fr.get("previous_websocket_failure")===!0}markConnectionHealthy(){fr.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const s=ss(r);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(F(this.frames===null,"We already have a frame buffer"),e.length<=6){const r=Number(e);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const r=e.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{const s=this.extractFrameCount_(r);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const r=Ke(e);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const s=vm(r,Sw);s.length>1&&this.sendString_(String(s.length));for(let l=0;l<s.length;l++)this.sendString_(s[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Ew))}sendString_(e){try{this.mySock.send(e)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Vt.responsesRequiredToBeHealthy=2;Vt.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{static get ALL_TRANSPORTS(){return[Vr,Vt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const r=Vt&&Vt.isAvailable();let s=r&&!Vt.previouslyFailed();if(e.webSocketOnly&&(r||Nt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Vt];else{const l=this.transports_=[];for(const u of as.ALL_TRANSPORTS)u&&u.isAvailable()&&l.push(u);as.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}as.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw=6e4,Nw=5e3,Tw=10*1024,Iw=100*1024,ku="t",cp="d",bw="s",dp="r",Pw="e",fp="o",hp="a",pp="n",mp="p",Rw="h";class Mw{constructor(e,r,s,l,u,d,h,m,g,x){this.id=e,this.repoInfo_=r,this.applicationId_=s,this.appCheckToken_=l,this.authToken_=u,this.onMessage_=d,this.onReady_=h,this.onDisconnect_=m,this.onKill_=g,this.lastSessionId=x,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=vs("c:"+this.id+":"),this.transportManager_=new as(r),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(r,s)},Math.floor(0));const l=e.healthyTimeout||0;l>0&&(this.healthyTimeout_=ts(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Iw?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Tw?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(l)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return r=>{e===this.conn_?this.onConnectionLost_(r):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return r=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(r):e===this.secondaryConn_?this.onSecondaryMessageReceived_(r):this.log_("message on old connection"))}}sendRequest(e){const r={t:"d",d:e};this.sendData_(r)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(ku in e){const r=e[ku];r===hp?this.upgradeIfSecondaryHealthy_():r===dp?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):r===fp&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const r=Yi("t",e),s=Yi("d",e);if(r==="c")this.onSecondaryControl_(s);else if(r==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+r)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:mp,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:hp,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:pp,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const r=Yi("t",e),s=Yi("d",e);r==="c"?this.onControl_(s):r==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const r=Yi(ku,e);if(cp in e){const s=e[cp];if(r===Rw){const l=Object.assign({},s);this.repoInfo_.isUsingEmulator&&(l.h=this.repoInfo_.host),this.onHandshake_(l)}else if(r===pp){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let l=0;l<this.pendingDataMessages.length;++l)this.onDataMessage_(this.pendingDataMessages[l]);this.pendingDataMessages=[],this.tryCleanupConnection()}else r===bw?this.onConnectionShutdown_(s):r===dp?this.onReset_(s):r===Pw?Uu("Server Error: "+s):r===fp?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Uu("Unknown control packet command: "+r)}}onHandshake_(e){const r=e.ts,s=e.v,l=e.h;this.sessionId=e.s,this.repoInfo_.host=l,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,r),ac!==s&&Nt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(r,s),ts(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(kw))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,r){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(r,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ts(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Nw))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:mp,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(fr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{put(e,r,s,l){}merge(e,r,s,l){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,r,s){}onDisconnectMerge(e,r,s){}onDisconnectCancel(e,r){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e){this.allowedEvents_=e,this.listeners_={},F(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...r){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let l=0;l<s.length;l++)s[l].callback.apply(s[l].context,r)}}on(e,r,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:r,context:s});const l=this.getInitialEvent(e);l&&r.apply(s,l)}off(e,r,s){this.validateEventType_(e);const l=this.listeners_[e]||[];for(let u=0;u<l.length;u++)if(l[u].callback===r&&(!s||s===l[u].context)){l.splice(u,1);return}}validateEventType_(e){F(this.allowedEvents_.find(r=>r===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go extends Fm{static getInstance(){return new Go}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!im()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return F(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp=32,yp=768;class Re{constructor(e,r){if(r===void 0){this.pieces_=e.split("/");let s=0;for(let l=0;l<this.pieces_.length;l++)this.pieces_[l].length>0&&(this.pieces_[s]=this.pieces_[l],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=r}toString(){let e="";for(let r=this.pieceNum_;r<this.pieces_.length;r++)this.pieces_[r]!==""&&(e+="/"+this.pieces_[r]);return e||"/"}}function ke(){return new Re("")}function ye(i){return i.pieceNum_>=i.pieces_.length?null:i.pieces_[i.pieceNum_]}function Gn(i){return i.pieces_.length-i.pieceNum_}function Oe(i){let e=i.pieceNum_;return e<i.pieces_.length&&e++,new Re(i.pieces_,e)}function jm(i){return i.pieceNum_<i.pieces_.length?i.pieces_[i.pieces_.length-1]:null}function Dw(i){let e="";for(let r=i.pieceNum_;r<i.pieces_.length;r++)i.pieces_[r]!==""&&(e+="/"+encodeURIComponent(String(i.pieces_[r])));return e||"/"}function zm(i,e=0){return i.pieces_.slice(i.pieceNum_+e)}function Wm(i){if(i.pieceNum_>=i.pieces_.length)return null;const e=[];for(let r=i.pieceNum_;r<i.pieces_.length-1;r++)e.push(i.pieces_[r]);return new Re(e,0)}function Xe(i,e){const r=[];for(let s=i.pieceNum_;s<i.pieces_.length;s++)r.push(i.pieces_[s]);if(e instanceof Re)for(let s=e.pieceNum_;s<e.pieces_.length;s++)r.push(e.pieces_[s]);else{const s=e.split("/");for(let l=0;l<s.length;l++)s[l].length>0&&r.push(s[l])}return new Re(r,0)}function pe(i){return i.pieceNum_>=i.pieces_.length}function yt(i,e){const r=ye(i),s=ye(e);if(r===null)return e;if(r===s)return yt(Oe(i),Oe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+i+")")}function Bm(i,e){if(Gn(i)!==Gn(e))return!1;for(let r=i.pieceNum_,s=e.pieceNum_;r<=i.pieces_.length;r++,s++)if(i.pieces_[r]!==e.pieces_[s])return!1;return!0}function Gt(i,e){let r=i.pieceNum_,s=e.pieceNum_;if(Gn(i)>Gn(e))return!1;for(;r<i.pieces_.length;){if(i.pieces_[r]!==e.pieces_[s])return!1;++r,++s}return!0}class Ow{constructor(e,r){this.errorPrefix_=r,this.parts_=zm(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=ll(this.parts_[s]);Um(this)}}function Aw(i,e){i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(e),i.byteLength_+=ll(e),Um(i)}function Lw(i){const e=i.parts_.pop();i.byteLength_-=ll(e),i.parts_.length>0&&(i.byteLength_-=1)}function Um(i){if(i.byteLength_>yp)throw new Error(i.errorPrefix_+"has a key path longer than "+yp+" bytes ("+i.byteLength_+").");if(i.parts_.length>gp)throw new Error(i.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+gp+") or object contains a cycle "+cr(i))}function cr(i){return i.parts_.length===0?"":"in property '"+i.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc extends Fm{static getInstance(){return new dc}constructor(){super(["visible"]);let e,r;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(r="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(r="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(r="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(r="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,r&&document.addEventListener(r,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}getInitialEvent(e){return F(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi=1e3,Fw=60*5*1e3,vp=30*1e3,jw=1.3,zw=3e4,Ww="server_kill",_p=3;class mn extends Lm{constructor(e,r,s,l,u,d,h,m){if(super(),this.repoInfo_=e,this.applicationId_=r,this.onDataUpdate_=s,this.onConnectStatus_=l,this.onServerInfoUpdate_=u,this.authTokenProvider_=d,this.appCheckTokenProvider_=h,this.authOverride_=m,this.id=mn.nextPersistentConnectionId_++,this.log_=vs("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Qi,this.maxReconnectDelay_=Fw,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,m&&!sm())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");dc.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Go.getInstance().on("online",this.onOnline_,this)}sendRequest(e,r,s){const l=++this.requestNumber_,u={r:l,a:e,b:r};this.log_(Ke(u)),F(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),s&&(this.requestCBHash_[l]=s)}get(e){this.initConnection_();const r=new ol,l={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:d=>{const h=d.d;d.s==="ok"?r.resolve(h):r.reject(h)}};this.outstandingGets_.push(l),this.outstandingGetCount_++;const u=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(u),r.promise}listen(e,r,s,l){this.initConnection_();const u=e._queryIdentifier,d=e._path.toString();this.log_("Listen called for "+d+" "+u),this.listens.has(d)||this.listens.set(d,new Map),F(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),F(!this.listens.get(d).has(u),"listen() called twice for same path/queryId.");const h={onComplete:l,hashFn:r,query:e,tag:s};this.listens.get(d).set(u,h),this.connected_&&this.sendListen_(h)}sendGet_(e){const r=this.outstandingGets_[e];this.sendRequest("g",r.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(s)})}sendListen_(e){const r=e.query,s=r._path.toString(),l=r._queryIdentifier;this.log_("Listen on "+s+" for "+l);const u={p:s},d="q";e.tag&&(u.q=r._queryObject,u.t=e.tag),u.h=e.hashFn(),this.sendRequest(d,u,h=>{const m=h.d,g=h.s;mn.warnOnListenWarnings_(m,r),(this.listens.get(s)&&this.listens.get(s).get(l))===e&&(this.log_("listen response",h),g!=="ok"&&this.removeListen_(s,l),e.onComplete&&e.onComplete(g,m))})}static warnOnListenWarnings_(e,r){if(e&&typeof e=="object"&&vn(e,"w")){const s=Xr(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const l='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();Nt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||P_(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=vp)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,r=b_(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(r,s,l=>{const u=l.s,d=l.d||"error";this.authToken_===e&&(u==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const r=e.s,s=e.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,s)})}unlisten(e,r){const s=e._path.toString(),l=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+l),F(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,l)&&this.connected_&&this.sendUnlisten_(s,l,e._queryObject,r)}sendUnlisten_(e,r,s,l){this.log_("Unlisten on "+e+" for "+r);const u={p:e},d="n";l&&(u.q=s,u.t=l),this.sendRequest(d,u)}onDisconnectPut(e,r,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,r,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:r,onComplete:s})}onDisconnectMerge(e,r,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,r,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:r,onComplete:s})}onDisconnectCancel(e,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(e,r,s,l){const u={p:r,d:s};this.log_("onDisconnect "+e,u),this.sendRequest(e,u,d=>{l&&setTimeout(()=>{l(d.s,d.d)},Math.floor(0))})}put(e,r,s,l){this.putInternal("p",e,r,s,l)}merge(e,r,s,l){this.putInternal("m",e,r,s,l)}putInternal(e,r,s,l,u){this.initConnection_();const d={p:r,d:s};u!==void 0&&(d.h=u),this.outstandingPuts_.push({action:e,request:d,onComplete:l}),this.outstandingPutCount_++;const h=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(h):this.log_("Buffering put: "+r)}sendPut_(e){const r=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,l=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,s,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),l&&l(u.s,u.d)})}reportStats(e){if(this.connected_){const r={c:e};this.log_("reportStats",r),this.sendRequest("s",r,s=>{if(s.s!=="ok"){const u=s.d;this.log_("reportStats","Error sending stats: "+u)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Ke(e));const r=e.r,s=this.requestCBHash_[r];s&&(delete this.requestCBHash_[r],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,r){this.log_("handleServerMessage",e,r),e==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):e==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):e==="c"?this.onListenRevoked_(r.p,r.q):e==="ac"?this.onAuthRevoked_(r.s,r.d):e==="apc"?this.onAppCheckRevoked_(r.s,r.d):e==="sd"?this.onSecurityDebugPacket_(r):Uu("Unrecognized action received from server: "+Ke(e)+`
Are you using the latest client?`)}onReady_(e,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){F(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Qi,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Qi,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>zw&&(this.reconnectDelay_=Qi),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-e);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*jw)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),l=this.id+":"+mn.nextConnectionId_++,u=this.lastSessionId;let d=!1,h=null;const m=function(){h?h.close():(d=!0,s())},g=function(_){F(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(_)};this.realtime_={close:m,sendRequest:g};const x=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[_,w]=await Promise.all([this.authTokenProvider_.getToken(x),this.appCheckTokenProvider_.getToken(x)]);d?ft("getToken() completed but was canceled"):(ft("getToken() completed. Creating connection."),this.authToken_=_&&_.accessToken,this.appCheckToken_=w&&w.token,h=new Mw(l,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,r,s,I=>{Nt(I+" ("+this.repoInfo_.toString()+")"),this.interrupt(Ww)},u))}catch(_){this.log_("Failed to get token: "+_),d||(this.repoInfo_.nodeAdmin&&Nt(_),m())}}}interrupt(e){ft("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){ft("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Qh(this.interruptReasons_)&&(this.reconnectDelay_=Qi,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const r=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const r=this.outstandingPuts_[e];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,r){let s;r?s=r.map(u=>lc(u)).join("$"):s="default";const l=this.removeListen_(e,s);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(e,r){const s=new Re(e).toString();let l;if(this.listens.has(s)){const u=this.listens.get(s);l=u.get(r),u.delete(r),u.size===0&&this.listens.delete(s)}else l=void 0;return l}onAuthRevoked_(e,r){ft("Auth token revoked: "+e+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=_p&&(this.reconnectDelay_=vp,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,r){ft("App check token revoked: "+e+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=_p&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const r of e.values())this.sendListen_(r);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let r="js";e["sdk."+r+"."+pm.replace(/\./g,"-")]=1,im()?e["framework.cordova"]=1:S_()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Go.getInstance().currentlyOnline();return Qh(this.interruptReasons_)&&e}}mn.nextPersistentConnectionId_=0;mn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e,r){this.name=e,this.node=r}static Wrap(e,r){return new he(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,r){const s=new he(Jr,e),l=new he(Jr,r);return this.compare(s,l)!==0}minPost(){return he.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fo;class Hm extends al{static get __EMPTY_NODE(){return Fo}static set __EMPTY_NODE(e){Fo=e}compare(e,r){return ri(e.name,r.name)}isDefinedOn(e){throw ti("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,r){return!1}minPost(){return he.MIN}maxPost(){return new he(pr,Fo)}makePost(e,r){return F(typeof e=="string","KeyIndex indexValue must always be a string."),new he(e,Fo)}toString(){return".key"}}const Qr=new Hm;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,r,s,l,u=null){this.isReverse_=l,this.resultGenerator_=u,this.nodeStack_=[];let d=1;for(;!e.isEmpty();)if(e=e,d=r?s(e.key,r):1,l&&(d*=-1),d<0)this.isReverse_?e=e.left:e=e.right;else if(d===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),r;if(this.resultGenerator_?r=this.resultGenerator_(e.key,e.value):r={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return r}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class nt{constructor(e,r,s,l,u){this.key=e,this.value=r,this.color=s??nt.RED,this.left=l??Et.EMPTY_NODE,this.right=u??Et.EMPTY_NODE}copy(e,r,s,l,u){return new nt(e??this.key,r??this.value,s??this.color,l??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,s){let l=this;const u=s(e,l.key);return u<0?l=l.copy(null,null,null,l.left.insert(e,r,s),null):u===0?l=l.copy(null,r,null,null,null):l=l.copy(null,null,null,null,l.right.insert(e,r,s)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return Et.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,r){let s,l;if(s=this,r(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),r(e,s.key)===0){if(s.right.isEmpty())return Et.EMPTY_NODE;l=s.right.min_(),s=s.copy(l.key,l.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}nt.RED=!0;nt.BLACK=!1;class Bw{copy(e,r,s,l,u){return this}insert(e,r,s){return new nt(e,r,null)}remove(e,r){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Et{constructor(e,r=Et.EMPTY_NODE){this.comparator_=e,this.root_=r}insert(e,r){return new Et(this.comparator_,this.root_.insert(e,r,this.comparator_).copy(null,null,nt.BLACK,null,null))}remove(e){return new Et(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,nt.BLACK,null,null))}get(e){let r,s=this.root_;for(;!s.isEmpty();){if(r=this.comparator_(e,s.key),r===0)return s.value;r<0?s=s.left:r>0&&(s=s.right)}return null}getPredecessorKey(e){let r,s=this.root_,l=null;for(;!s.isEmpty();)if(r=this.comparator_(e,s.key),r===0){if(s.left.isEmpty())return l?l.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else r<0?s=s.left:r>0&&(l=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new jo(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,r){return new jo(this.root_,e,this.comparator_,!1,r)}getReverseIteratorFrom(e,r){return new jo(this.root_,e,this.comparator_,!0,r)}getReverseIterator(e){return new jo(this.root_,null,this.comparator_,!0,e)}}Et.EMPTY_NODE=new Bw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uw(i,e){return ri(i.name,e.name)}function fc(i,e){return ri(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $u;function Hw(i){$u=i}const $m=function(i){return typeof i=="number"?"number:"+_m(i):"string:"+i},Vm=function(i){if(i.isLeafNode()){const e=i.val();F(typeof e=="string"||typeof e=="number"||typeof e=="object"&&vn(e,".sv"),"Priority must be a string or number.")}else F(i===$u||i.isEmpty(),"priority of unexpected type.");F(i===$u||i.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wp;class tt{static set __childrenNodeConstructor(e){wp=e}static get __childrenNodeConstructor(){return wp}constructor(e,r=tt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=r,this.lazyHash_=null,F(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Vm(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new tt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:tt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return pe(e)?this:ye(e)===".priority"?this.priorityNode_:tt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,r){return null}updateImmediateChild(e,r){return e===".priority"?this.updatePriority(r):r.isEmpty()&&e!==".priority"?this:tt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,r).updatePriority(this.priorityNode_)}updateChild(e,r){const s=ye(e);return s===null?r:r.isEmpty()&&s!==".priority"?this:(F(s!==".priority"||Gn(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,tt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Oe(e),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,r){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+$m(this.priorityNode_.val())+":");const r=typeof this.value_;e+=r+":",r==="number"?e+=_m(this.value_):e+=this.value_,this.lazyHash_=gm(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===tt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof tt.__childrenNodeConstructor?-1:(F(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const r=typeof e.value_,s=typeof this.value_,l=tt.VALUE_TYPE_ORDER.indexOf(r),u=tt.VALUE_TYPE_ORDER.indexOf(s);return F(l>=0,"Unknown leaf type: "+r),F(u>=0,"Unknown leaf type: "+s),l===u?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:u-l}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const r=e;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}tt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gm,Ym;function $w(i){Gm=i}function Vw(i){Ym=i}class Gw extends al{compare(e,r){const s=e.node.getPriority(),l=r.node.getPriority(),u=s.compareTo(l);return u===0?ri(e.name,r.name):u}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,r){return!e.getPriority().equals(r.getPriority())}minPost(){return he.MIN}maxPost(){return new he(pr,new tt("[PRIORITY-POST]",Ym))}makePost(e,r){const s=Gm(e);return new he(r,new tt("[PRIORITY-POST]",s))}toString(){return".priority"}}const $e=new Gw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw=Math.log(2);class Qw{constructor(e){const r=u=>parseInt(Math.log(u)/Yw,10),s=u=>parseInt(Array(u+1).join("1"),2);this.count=r(e+1),this.current_=this.count-1;const l=s(this.count);this.bits_=e+1&l}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Yo=function(i,e,r,s){i.sort(e);const l=function(m,g){const x=g-m;let _,w;if(x===0)return null;if(x===1)return _=i[m],w=r?r(_):_,new nt(w,_.node,nt.BLACK,null,null);{const I=parseInt(x/2,10)+m,b=l(m,I),D=l(I+1,g);return _=i[I],w=r?r(_):_,new nt(w,_.node,nt.BLACK,b,D)}},u=function(m){let g=null,x=null,_=i.length;const w=function(b,D){const L=_-b,W=_;_-=b;const j=l(L+1,W),V=i[L],te=r?r(V):V;I(new nt(te,V.node,D,null,j))},I=function(b){g?(g.left=b,g=b):(x=b,g=b)};for(let b=0;b<m.count;++b){const D=m.nextBitIsOne(),L=Math.pow(2,m.count-(b+1));D?w(L,nt.BLACK):(w(L,nt.BLACK),w(L,nt.RED))}return x},d=new Qw(i.length),h=u(d);return new Et(s||e,h)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nu;const Hr={};class pn{static get Default(){return F(Hr&&$e,"ChildrenNode.ts has not been loaded"),Nu=Nu||new pn({".priority":Hr},{".priority":$e}),Nu}constructor(e,r){this.indexes_=e,this.indexSet_=r}get(e){const r=Xr(this.indexes_,e);if(!r)throw new Error("No index defined for "+e);return r instanceof Et?r:null}hasIndex(e){return vn(this.indexSet_,e.toString())}addIndex(e,r){F(e!==Qr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let l=!1;const u=r.getIterator(he.Wrap);let d=u.getNext();for(;d;)l=l||e.isDefinedOn(d.node),s.push(d),d=u.getNext();let h;l?h=Yo(s,e.getCompare()):h=Hr;const m=e.toString(),g=Object.assign({},this.indexSet_);g[m]=e;const x=Object.assign({},this.indexes_);return x[m]=h,new pn(x,g)}addToIndexes(e,r){const s=Uo(this.indexes_,(l,u)=>{const d=Xr(this.indexSet_,u);if(F(d,"Missing index implementation for "+u),l===Hr)if(d.isDefinedOn(e.node)){const h=[],m=r.getIterator(he.Wrap);let g=m.getNext();for(;g;)g.name!==e.name&&h.push(g),g=m.getNext();return h.push(e),Yo(h,d.getCompare())}else return Hr;else{const h=r.get(e.name);let m=l;return h&&(m=m.remove(new he(e.name,h))),m.insert(e,e.node)}});return new pn(s,this.indexSet_)}removeFromIndexes(e,r){const s=Uo(this.indexes_,l=>{if(l===Hr)return l;{const u=r.get(e.name);return u?l.remove(new he(e.name,u)):l}});return new pn(s,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qi;class ne{static get EMPTY_NODE(){return qi||(qi=new ne(new Et(fc),null,pn.Default))}constructor(e,r,s){this.children_=e,this.priorityNode_=r,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&Vm(this.priorityNode_),this.children_.isEmpty()&&F(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||qi}updatePriority(e){return this.children_.isEmpty()?this:new ne(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const r=this.children_.get(e);return r===null?qi:r}}getChild(e){const r=ye(e);return r===null?this:this.getImmediateChild(r).getChild(Oe(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,r){if(F(r,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(r);{const s=new he(e,r);let l,u;r.isEmpty()?(l=this.children_.remove(e),u=this.indexMap_.removeFromIndexes(s,this.children_)):(l=this.children_.insert(e,r),u=this.indexMap_.addToIndexes(s,this.children_));const d=l.isEmpty()?qi:this.priorityNode_;return new ne(l,d,u)}}updateChild(e,r){const s=ye(e);if(s===null)return r;{F(ye(e)!==".priority"||Gn(e)===1,".priority must be the last token in a path");const l=this.getImmediateChild(s).updateChild(Oe(e),r);return this.updateImmediateChild(s,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const r={};let s=0,l=0,u=!0;if(this.forEachChild($e,(d,h)=>{r[d]=h.val(e),s++,u&&ne.INTEGER_REGEXP_.test(d)?l=Math.max(l,Number(d)):u=!1}),!e&&u&&l<2*s){const d=[];for(const h in r)d[h]=r[h];return d}else return e&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+$m(this.getPriority().val())+":"),this.forEachChild($e,(r,s)=>{const l=s.hash();l!==""&&(e+=":"+r+":"+l)}),this.lazyHash_=e===""?"":gm(e)}return this.lazyHash_}getPredecessorChildName(e,r,s){const l=this.resolveIndex_(s);if(l){const u=l.getPredecessorKey(new he(e,r));return u?u.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const r=this.resolveIndex_(e);if(r){const s=r.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const r=this.getFirstChildName(e);return r?new he(r,this.children_.get(r)):null}getLastChildName(e){const r=this.resolveIndex_(e);if(r){const s=r.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const r=this.getLastChildName(e);return r?new he(r,this.children_.get(r)):null}forEachChild(e,r){const s=this.resolveIndex_(e);return s?s.inorderTraversal(l=>r(l.name,l.node)):this.children_.inorderTraversal(r)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,r){const s=this.resolveIndex_(r);if(s)return s.getIteratorFrom(e,l=>l);{const l=this.children_.getIteratorFrom(e.name,he.Wrap);let u=l.peek();for(;u!=null&&r.compare(u,e)<0;)l.getNext(),u=l.peek();return l}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,r){const s=this.resolveIndex_(r);if(s)return s.getReverseIteratorFrom(e,l=>l);{const l=this.children_.getReverseIteratorFrom(e.name,he.Wrap);let u=l.peek();for(;u!=null&&r.compare(u,e)>0;)l.getNext(),u=l.peek();return l}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===_s?-1:0}withIndex(e){if(e===Qr||this.indexMap_.hasIndex(e))return this;{const r=this.indexMap_.addIndex(e,this.children_);return new ne(this.children_,this.priorityNode_,r)}}isIndexed(e){return e===Qr||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const r=e;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){const s=this.getIterator($e),l=r.getIterator($e);let u=s.getNext(),d=l.getNext();for(;u&&d;){if(u.name!==d.name||!u.node.equals(d.node))return!1;u=s.getNext(),d=l.getNext()}return u===null&&d===null}else return!1;else return!1}}resolveIndex_(e){return e===Qr?null:this.indexMap_.get(e.toString())}}ne.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class qw extends ne{constructor(){super(new Et(fc),ne.EMPTY_NODE,pn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ne.EMPTY_NODE}isEmpty(){return!1}}const _s=new qw;Object.defineProperties(he,{MIN:{value:new he(Jr,ne.EMPTY_NODE)},MAX:{value:new he(pr,_s)}});Hm.__EMPTY_NODE=ne.EMPTY_NODE;tt.__childrenNodeConstructor=ne;Hw(_s);Vw(_s);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw=!0;function rt(i,e=null){if(i===null)return ne.EMPTY_NODE;if(typeof i=="object"&&".priority"in i&&(e=i[".priority"]),F(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof i=="object"&&".value"in i&&i[".value"]!==null&&(i=i[".value"]),typeof i!="object"||".sv"in i){const r=i;return new tt(r,rt(e))}if(!(i instanceof Array)&&Kw){const r=[];let s=!1;if(Tt(i,(d,h)=>{if(d.substring(0,1)!=="."){const m=rt(h);m.isEmpty()||(s=s||!m.getPriority().isEmpty(),r.push(new he(d,m)))}}),r.length===0)return ne.EMPTY_NODE;const u=Yo(r,Uw,d=>d.name,fc);if(s){const d=Yo(r,$e.getCompare());return new ne(u,rt(e),new pn({".priority":d},{".priority":$e}))}else return new ne(u,rt(e),pn.Default)}else{let r=ne.EMPTY_NODE;return Tt(i,(s,l)=>{if(vn(i,s)&&s.substring(0,1)!=="."){const u=rt(l);(u.isLeafNode()||!u.isEmpty())&&(r=r.updateImmediateChild(s,u))}}),r.updatePriority(rt(e))}}$w(rt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw extends al{constructor(e){super(),this.indexPath_=e,F(!pe(e)&&ye(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,r){const s=this.extractChild(e.node),l=this.extractChild(r.node),u=s.compareTo(l);return u===0?ri(e.name,r.name):u}makePost(e,r){const s=rt(e),l=ne.EMPTY_NODE.updateChild(this.indexPath_,s);return new he(r,l)}maxPost(){const e=ne.EMPTY_NODE.updateChild(this.indexPath_,_s);return new he(pr,e)}toString(){return zm(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw extends al{compare(e,r){const s=e.node.compareTo(r.node);return s===0?ri(e.name,r.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,r){return!e.equals(r)}minPost(){return he.MIN}maxPost(){return he.MAX}makePost(e,r){const s=rt(e);return new he(r,s)}toString(){return".value"}}const Zw=new Jw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(i){return{type:"value",snapshotNode:i}}function Zr(i,e){return{type:"child_added",snapshotNode:e,childName:i}}function us(i,e){return{type:"child_removed",snapshotNode:e,childName:i}}function cs(i,e,r){return{type:"child_changed",snapshotNode:e,childName:i,oldSnap:r}}function e1(i,e){return{type:"child_moved",snapshotNode:e,childName:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e){this.index_=e}updateChild(e,r,s,l,u,d){F(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(r);return h.getChild(l).equals(s.getChild(l))&&h.isEmpty()===s.isEmpty()||(d!=null&&(s.isEmpty()?e.hasChild(r)?d.trackChildChange(us(r,h)):F(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?d.trackChildChange(Zr(r,s)):d.trackChildChange(cs(r,s,h))),e.isLeafNode()&&s.isEmpty())?e:e.updateImmediateChild(r,s).withIndex(this.index_)}updateFullNode(e,r,s){return s!=null&&(e.isLeafNode()||e.forEachChild($e,(l,u)=>{r.hasChild(l)||s.trackChildChange(us(l,u))}),r.isLeafNode()||r.forEachChild($e,(l,u)=>{if(e.hasChild(l)){const d=e.getImmediateChild(l);d.equals(u)||s.trackChildChange(cs(l,u,d))}else s.trackChildChange(Zr(l,u))})),r.withIndex(this.index_)}updatePriority(e,r){return e.isEmpty()?ne.EMPTY_NODE:e.updatePriority(r)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e){this.indexedFilter_=new hc(e.getIndex()),this.index_=e.getIndex(),this.startPost_=ds.getStartPost_(e),this.endPost_=ds.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const r=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,s=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return r&&s}updateChild(e,r,s,l,u,d){return this.matches(new he(r,s))||(s=ne.EMPTY_NODE),this.indexedFilter_.updateChild(e,r,s,l,u,d)}updateFullNode(e,r,s){r.isLeafNode()&&(r=ne.EMPTY_NODE);let l=r.withIndex(this.index_);l=l.updatePriority(ne.EMPTY_NODE);const u=this;return r.forEachChild($e,(d,h)=>{u.matches(new he(d,h))||(l=l.updateImmediateChild(d,ne.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,l,s)}updatePriority(e,r){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const r=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),r)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const r=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),r)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e){this.withinDirectionalStart=r=>this.reverse_?this.withinEndPost(r):this.withinStartPost(r),this.withinDirectionalEnd=r=>this.reverse_?this.withinStartPost(r):this.withinEndPost(r),this.withinStartPost=r=>{const s=this.index_.compare(this.rangedFilter_.getStartPost(),r);return this.startIsInclusive_?s<=0:s<0},this.withinEndPost=r=>{const s=this.index_.compare(r,this.rangedFilter_.getEndPost());return this.endIsInclusive_?s<=0:s<0},this.rangedFilter_=new ds(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,r,s,l,u,d){return this.rangedFilter_.matches(new he(r,s))||(s=ne.EMPTY_NODE),e.getImmediateChild(r).equals(s)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,r,s,l,u,d):this.fullLimitUpdateChild_(e,r,s,u,d)}updateFullNode(e,r,s){let l;if(r.isLeafNode()||r.isEmpty())l=ne.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<r.numChildren()&&r.isIndexed(this.index_)){l=ne.EMPTY_NODE.withIndex(this.index_);let u;this.reverse_?u=r.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):u=r.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let d=0;for(;u.hasNext()&&d<this.limit_;){const h=u.getNext();if(this.withinDirectionalStart(h))if(this.withinDirectionalEnd(h))l=l.updateImmediateChild(h.name,h.node),d++;else break;else continue}}else{l=r.withIndex(this.index_),l=l.updatePriority(ne.EMPTY_NODE);let u;this.reverse_?u=l.getReverseIterator(this.index_):u=l.getIterator(this.index_);let d=0;for(;u.hasNext();){const h=u.getNext();d<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?d++:l=l.updateImmediateChild(h.name,ne.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,l,s)}updatePriority(e,r){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,r,s,l,u){let d;if(this.reverse_){const _=this.index_.getCompare();d=(w,I)=>_(I,w)}else d=this.index_.getCompare();const h=e;F(h.numChildren()===this.limit_,"");const m=new he(r,s),g=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),x=this.rangedFilter_.matches(m);if(h.hasChild(r)){const _=h.getImmediateChild(r);let w=l.getChildAfterChild(this.index_,g,this.reverse_);for(;w!=null&&(w.name===r||h.hasChild(w.name));)w=l.getChildAfterChild(this.index_,w,this.reverse_);const I=w==null?1:d(w,m);if(x&&!s.isEmpty()&&I>=0)return u!=null&&u.trackChildChange(cs(r,s,_)),h.updateImmediateChild(r,s);{u!=null&&u.trackChildChange(us(r,_));const D=h.updateImmediateChild(r,ne.EMPTY_NODE);return w!=null&&this.rangedFilter_.matches(w)?(u!=null&&u.trackChildChange(Zr(w.name,w.node)),D.updateImmediateChild(w.name,w.node)):D}}else return s.isEmpty()?e:x&&d(g,m)>=0?(u!=null&&(u.trackChildChange(us(g.name,g.node)),u.trackChildChange(Zr(r,s))),h.updateImmediateChild(r,s).updateImmediateChild(g.name,ne.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=$e}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return F(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return F(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Jr}hasEnd(){return this.endSet_}getIndexEndValue(){return F(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return F(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:pr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return F(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===$e}copy(){const e=new pc;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function n1(i){return i.loadsAllData()?new hc(i.getIndex()):i.hasLimit()?new t1(i):new ds(i)}function Cp(i){const e={};if(i.isDefault())return e;let r;if(i.index_===$e?r="$priority":i.index_===Zw?r="$value":i.index_===Qr?r="$key":(F(i.index_ instanceof Xw,"Unrecognized index type!"),r=i.index_.toString()),e.orderBy=Ke(r),i.startSet_){const s=i.startAfterSet_?"startAfter":"startAt";e[s]=Ke(i.indexStartValue_),i.startNameSet_&&(e[s]+=","+Ke(i.indexStartName_))}if(i.endSet_){const s=i.endBeforeSet_?"endBefore":"endAt";e[s]=Ke(i.indexEndValue_),i.endNameSet_&&(e[s]+=","+Ke(i.indexEndName_))}return i.limitSet_&&(i.isViewFromLeft()?e.limitToFirst=i.limit_:e.limitToLast=i.limit_),e}function xp(i){const e={};if(i.startSet_&&(e.sp=i.indexStartValue_,i.startNameSet_&&(e.sn=i.indexStartName_),e.sin=!i.startAfterSet_),i.endSet_&&(e.ep=i.indexEndValue_,i.endNameSet_&&(e.en=i.indexEndName_),e.ein=!i.endBeforeSet_),i.limitSet_){e.l=i.limit_;let r=i.viewFrom_;r===""&&(i.isViewFromLeft()?r="l":r="r"),e.vf=r}return i.index_!==$e&&(e.i=i.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo extends Lm{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,r){return r!==void 0?"tag$"+r:(F(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,r,s,l){super(),this.repoInfo_=e,this.onDataUpdate_=r,this.authTokenProvider_=s,this.appCheckTokenProvider_=l,this.log_=vs("p:rest:"),this.listens_={}}listen(e,r,s,l){const u=e._path.toString();this.log_("Listen called for "+u+" "+e._queryIdentifier);const d=Qo.getListenId_(e,s),h={};this.listens_[d]=h;const m=Cp(e._queryParams);this.restRequest_(u+".json",m,(g,x)=>{let _=x;if(g===404&&(_=null,g=null),g===null&&this.onDataUpdate_(u,_,!1,s),Xr(this.listens_,d)===h){let w;g?g===401?w="permission_denied":w="rest_error:"+g:w="ok",l(w,null)}})}unlisten(e,r){const s=Qo.getListenId_(e,r);delete this.listens_[s]}get(e){const r=Cp(e._queryParams),s=e._path.toString(),l=new ol;return this.restRequest_(s+".json",r,(u,d)=>{let h=d;u===404&&(h=null,u=null),u===null?(this.onDataUpdate_(s,h,!1,null),l.resolve(h)):l.reject(new Error(h))}),l.promise}refreshAuthToken(e){}restRequest_(e,r={},s){return r.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([l,u])=>{l&&l.accessToken&&(r.auth=l.accessToken),u&&u.token&&(r.ac=u.token);const d=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+R_(r);this.log_("Sending REST request for "+d);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(s&&h.readyState===4){this.log_("REST Response for "+d+" received. status:",h.status,"response:",h.responseText);let m=null;if(h.status>=200&&h.status<300){try{m=ss(h.responseText)}catch{Nt("Failed to parse JSON response for "+d+": "+h.responseText)}s(null,m)}else h.status!==401&&h.status!==404&&Nt("Got unsuccessful REST response for "+d+" Status: "+h.status),s(h.status);s=null}},h.open("GET",d,!0),h.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(){this.rootNode_=ne.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,r){this.rootNode_=this.rootNode_.updateChild(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qo(){return{value:null,children:new Map}}function qm(i,e,r){if(pe(e))i.value=r,i.children.clear();else if(i.value!==null)i.value=i.value.updateChild(e,r);else{const s=ye(e);i.children.has(s)||i.children.set(s,qo());const l=i.children.get(s);e=Oe(e),qm(l,e,r)}}function Vu(i,e,r){i.value!==null?r(e,i.value):i1(i,(s,l)=>{const u=new Re(e.toString()+"/"+s);Vu(l,u,r)})}function i1(i,e){i.children.forEach((r,s)=>{e(s,r)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),r=Object.assign({},e);return this.last_&&Tt(this.last_,(s,l)=>{r[s]=r[s]-l}),this.last_=e,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp=10*1e3,o1=30*1e3,l1=5*60*1e3;class a1{constructor(e,r){this.server_=r,this.statsToReport_={},this.statsListener_=new s1(e);const s=Sp+(o1-Sp)*Math.random();ts(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),r={};let s=!1;Tt(e,(l,u)=>{u>0&&vn(this.statsToReport_,l)&&(r[l]=u,s=!0)}),s&&this.server_.reportStats(r),ts(this.reportStats_.bind(this),Math.floor(Math.random()*2*l1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yt;(function(i){i[i.OVERWRITE=0]="OVERWRITE",i[i.MERGE=1]="MERGE",i[i.ACK_USER_WRITE=2]="ACK_USER_WRITE",i[i.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Yt||(Yt={}));function Km(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function mc(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function gc(i){return{fromUser:!1,fromServer:!0,queryId:i,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,r,s){this.path=e,this.affectedTree=r,this.revert=s,this.type=Yt.ACK_USER_WRITE,this.source=Km()}operationForChild(e){if(pe(this.path)){if(this.affectedTree.value!=null)return F(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const r=this.affectedTree.subtree(new Re(e));return new Ko(ke(),r,this.revert)}}else return F(ye(this.path)===e,"operationForChild called for unrelated child."),new Ko(Oe(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e,r){this.source=e,this.path=r,this.type=Yt.LISTEN_COMPLETE}operationForChild(e){return pe(this.path)?new fs(this.source,ke()):new fs(this.source,Oe(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,r,s){this.source=e,this.path=r,this.snap=s,this.type=Yt.OVERWRITE}operationForChild(e){return pe(this.path)?new mr(this.source,ke(),this.snap.getImmediateChild(e)):new mr(this.source,Oe(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,r,s){this.source=e,this.path=r,this.children=s,this.type=Yt.MERGE}operationForChild(e){if(pe(this.path)){const r=this.children.subtree(new Re(e));return r.isEmpty()?null:r.value?new mr(this.source,ke(),r.value):new hs(this.source,ke(),r)}else return F(ye(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new hs(this.source,Oe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,r,s){this.node_=e,this.fullyInitialized_=r,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(pe(e))return this.isFullyInitialized()&&!this.filtered_;const r=ye(e);return this.isCompleteForChild(r)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function c1(i,e,r,s){const l=[],u=[];return e.forEach(d=>{d.type==="child_changed"&&i.index_.indexedValueChanged(d.oldSnap,d.snapshotNode)&&u.push(e1(d.childName,d.snapshotNode))}),Ki(i,l,"child_removed",e,s,r),Ki(i,l,"child_added",e,s,r),Ki(i,l,"child_moved",u,s,r),Ki(i,l,"child_changed",e,s,r),Ki(i,l,"value",e,s,r),l}function Ki(i,e,r,s,l,u){const d=s.filter(h=>h.type===r);d.sort((h,m)=>f1(i,h,m)),d.forEach(h=>{const m=d1(i,h,u);l.forEach(g=>{g.respondsTo(h.type)&&e.push(g.createEvent(m,i.query_))})})}function d1(i,e,r){return e.type==="value"||e.type==="child_removed"||(e.prevName=r.getPredecessorChildName(e.childName,e.snapshotNode,i.index_)),e}function f1(i,e,r){if(e.childName==null||r.childName==null)throw ti("Should only compare child_ events.");const s=new he(e.childName,e.snapshotNode),l=new he(r.childName,r.snapshotNode);return i.index_.compare(s,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ul(i,e){return{eventCache:i,serverCache:e}}function ns(i,e,r,s){return ul(new Yn(e,r,s),i.serverCache)}function Xm(i,e,r,s){return ul(i.eventCache,new Yn(e,r,s))}function Xo(i){return i.eventCache.isFullyInitialized()?i.eventCache.getNode():null}function gr(i){return i.serverCache.isFullyInitialized()?i.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tu;const h1=()=>(Tu||(Tu=new Et(J0)),Tu);class je{static fromObject(e){let r=new je(null);return Tt(e,(s,l)=>{r=r.set(new Re(s),l)}),r}constructor(e,r=h1()){this.value=e,this.children=r}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,r){if(this.value!=null&&r(this.value))return{path:ke(),value:this.value};if(pe(e))return null;{const s=ye(e),l=this.children.get(s);if(l!==null){const u=l.findRootMostMatchingPathAndValue(Oe(e),r);return u!=null?{path:Xe(new Re(s),u.path),value:u.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(pe(e))return this;{const r=ye(e),s=this.children.get(r);return s!==null?s.subtree(Oe(e)):new je(null)}}set(e,r){if(pe(e))return new je(r,this.children);{const s=ye(e),u=(this.children.get(s)||new je(null)).set(Oe(e),r),d=this.children.insert(s,u);return new je(this.value,d)}}remove(e){if(pe(e))return this.children.isEmpty()?new je(null):new je(null,this.children);{const r=ye(e),s=this.children.get(r);if(s){const l=s.remove(Oe(e));let u;return l.isEmpty()?u=this.children.remove(r):u=this.children.insert(r,l),this.value===null&&u.isEmpty()?new je(null):new je(this.value,u)}else return this}}get(e){if(pe(e))return this.value;{const r=ye(e),s=this.children.get(r);return s?s.get(Oe(e)):null}}setTree(e,r){if(pe(e))return r;{const s=ye(e),u=(this.children.get(s)||new je(null)).setTree(Oe(e),r);let d;return u.isEmpty()?d=this.children.remove(s):d=this.children.insert(s,u),new je(this.value,d)}}fold(e){return this.fold_(ke(),e)}fold_(e,r){const s={};return this.children.inorderTraversal((l,u)=>{s[l]=u.fold_(Xe(e,l),r)}),r(e,this.value,s)}findOnPath(e,r){return this.findOnPath_(e,ke(),r)}findOnPath_(e,r,s){const l=this.value?s(r,this.value):!1;if(l)return l;if(pe(e))return null;{const u=ye(e),d=this.children.get(u);return d?d.findOnPath_(Oe(e),Xe(r,u),s):null}}foreachOnPath(e,r){return this.foreachOnPath_(e,ke(),r)}foreachOnPath_(e,r,s){if(pe(e))return this;{this.value&&s(r,this.value);const l=ye(e),u=this.children.get(l);return u?u.foreachOnPath_(Oe(e),Xe(r,l),s):new je(null)}}foreach(e){this.foreach_(ke(),e)}foreach_(e,r){this.children.inorderTraversal((s,l)=>{l.foreach_(Xe(e,s),r)}),this.value&&r(e,this.value)}foreachChild(e){this.children.inorderTraversal((r,s)=>{s.value&&e(r,s.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.writeTree_=e}static empty(){return new Qt(new je(null))}}function rs(i,e,r){if(pe(e))return new Qt(new je(r));{const s=i.writeTree_.findRootMostValueAndPath(e);if(s!=null){const l=s.path;let u=s.value;const d=yt(l,e);return u=u.updateChild(d,r),new Qt(i.writeTree_.set(l,u))}else{const l=new je(r),u=i.writeTree_.setTree(e,l);return new Qt(u)}}}function Ep(i,e,r){let s=i;return Tt(r,(l,u)=>{s=rs(s,Xe(e,l),u)}),s}function kp(i,e){if(pe(e))return Qt.empty();{const r=i.writeTree_.setTree(e,new je(null));return new Qt(r)}}function Gu(i,e){return yr(i,e)!=null}function yr(i,e){const r=i.writeTree_.findRootMostValueAndPath(e);return r!=null?i.writeTree_.get(r.path).getChild(yt(r.path,e)):null}function Np(i){const e=[],r=i.writeTree_.value;return r!=null?r.isLeafNode()||r.forEachChild($e,(s,l)=>{e.push(new he(s,l))}):i.writeTree_.children.inorderTraversal((s,l)=>{l.value!=null&&e.push(new he(s,l.value))}),e}function $n(i,e){if(pe(e))return i;{const r=yr(i,e);return r!=null?new Qt(new je(r)):new Qt(i.writeTree_.subtree(e))}}function Yu(i){return i.writeTree_.isEmpty()}function ei(i,e){return Jm(ke(),i.writeTree_,e)}function Jm(i,e,r){if(e.value!=null)return r.updateChild(i,e.value);{let s=null;return e.children.inorderTraversal((l,u)=>{l===".priority"?(F(u.value!==null,"Priority writes must always be leaf nodes"),s=u.value):r=Jm(Xe(i,l),u,r)}),!r.getChild(i).isEmpty()&&s!==null&&(r=r.updateChild(Xe(i,".priority"),s)),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cl(i,e){return ng(e,i)}function p1(i,e,r,s,l){F(s>i.lastWriteId,"Stacking an older write on top of newer ones"),l===void 0&&(l=!0),i.allWrites.push({path:e,snap:r,writeId:s,visible:l}),l&&(i.visibleWrites=rs(i.visibleWrites,e,r)),i.lastWriteId=s}function m1(i,e){for(let r=0;r<i.allWrites.length;r++){const s=i.allWrites[r];if(s.writeId===e)return s}return null}function g1(i,e){const r=i.allWrites.findIndex(h=>h.writeId===e);F(r>=0,"removeWrite called with nonexistent writeId.");const s=i.allWrites[r];i.allWrites.splice(r,1);let l=s.visible,u=!1,d=i.allWrites.length-1;for(;l&&d>=0;){const h=i.allWrites[d];h.visible&&(d>=r&&y1(h,s.path)?l=!1:Gt(s.path,h.path)&&(u=!0)),d--}if(l){if(u)return v1(i),!0;if(s.snap)i.visibleWrites=kp(i.visibleWrites,s.path);else{const h=s.children;Tt(h,m=>{i.visibleWrites=kp(i.visibleWrites,Xe(s.path,m))})}return!0}else return!1}function y1(i,e){if(i.snap)return Gt(i.path,e);for(const r in i.children)if(i.children.hasOwnProperty(r)&&Gt(Xe(i.path,r),e))return!0;return!1}function v1(i){i.visibleWrites=Zm(i.allWrites,_1,ke()),i.allWrites.length>0?i.lastWriteId=i.allWrites[i.allWrites.length-1].writeId:i.lastWriteId=-1}function _1(i){return i.visible}function Zm(i,e,r){let s=Qt.empty();for(let l=0;l<i.length;++l){const u=i[l];if(e(u)){const d=u.path;let h;if(u.snap)Gt(r,d)?(h=yt(r,d),s=rs(s,h,u.snap)):Gt(d,r)&&(h=yt(d,r),s=rs(s,ke(),u.snap.getChild(h)));else if(u.children){if(Gt(r,d))h=yt(r,d),s=Ep(s,h,u.children);else if(Gt(d,r))if(h=yt(d,r),pe(h))s=Ep(s,ke(),u.children);else{const m=Xr(u.children,ye(h));if(m){const g=m.getChild(Oe(h));s=rs(s,ke(),g)}}}else throw ti("WriteRecord should have .snap or .children")}}return s}function eg(i,e,r,s,l){if(!s&&!l){const u=yr(i.visibleWrites,e);if(u!=null)return u;{const d=$n(i.visibleWrites,e);if(Yu(d))return r;if(r==null&&!Gu(d,ke()))return null;{const h=r||ne.EMPTY_NODE;return ei(d,h)}}}else{const u=$n(i.visibleWrites,e);if(!l&&Yu(u))return r;if(!l&&r==null&&!Gu(u,ke()))return null;{const d=function(g){return(g.visible||l)&&(!s||!~s.indexOf(g.writeId))&&(Gt(g.path,e)||Gt(e,g.path))},h=Zm(i.allWrites,d,e),m=r||ne.EMPTY_NODE;return ei(h,m)}}}function w1(i,e,r){let s=ne.EMPTY_NODE;const l=yr(i.visibleWrites,e);if(l)return l.isLeafNode()||l.forEachChild($e,(u,d)=>{s=s.updateImmediateChild(u,d)}),s;if(r){const u=$n(i.visibleWrites,e);return r.forEachChild($e,(d,h)=>{const m=ei($n(u,new Re(d)),h);s=s.updateImmediateChild(d,m)}),Np(u).forEach(d=>{s=s.updateImmediateChild(d.name,d.node)}),s}else{const u=$n(i.visibleWrites,e);return Np(u).forEach(d=>{s=s.updateImmediateChild(d.name,d.node)}),s}}function C1(i,e,r,s,l){F(s||l,"Either existingEventSnap or existingServerSnap must exist");const u=Xe(e,r);if(Gu(i.visibleWrites,u))return null;{const d=$n(i.visibleWrites,u);return Yu(d)?l.getChild(r):ei(d,l.getChild(r))}}function x1(i,e,r,s){const l=Xe(e,r),u=yr(i.visibleWrites,l);if(u!=null)return u;if(s.isCompleteForChild(r)){const d=$n(i.visibleWrites,l);return ei(d,s.getNode().getImmediateChild(r))}else return null}function S1(i,e){return yr(i.visibleWrites,e)}function E1(i,e,r,s,l,u,d){let h;const m=$n(i.visibleWrites,e),g=yr(m,ke());if(g!=null)h=g;else if(r!=null)h=ei(m,r);else return[];if(h=h.withIndex(d),!h.isEmpty()&&!h.isLeafNode()){const x=[],_=d.getCompare(),w=u?h.getReverseIteratorFrom(s,d):h.getIteratorFrom(s,d);let I=w.getNext();for(;I&&x.length<l;)_(I,s)!==0&&x.push(I),I=w.getNext();return x}else return[]}function k1(){return{visibleWrites:Qt.empty(),allWrites:[],lastWriteId:-1}}function Jo(i,e,r,s){return eg(i.writeTree,i.treePath,e,r,s)}function yc(i,e){return w1(i.writeTree,i.treePath,e)}function Tp(i,e,r,s){return C1(i.writeTree,i.treePath,e,r,s)}function Zo(i,e){return S1(i.writeTree,Xe(i.treePath,e))}function N1(i,e,r,s,l,u){return E1(i.writeTree,i.treePath,e,r,s,l,u)}function vc(i,e,r){return x1(i.writeTree,i.treePath,e,r)}function tg(i,e){return ng(Xe(i.treePath,e),i.writeTree)}function ng(i,e){return{treePath:i,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(){this.changeMap=new Map}trackChildChange(e){const r=e.type,s=e.childName;F(r==="child_added"||r==="child_changed"||r==="child_removed","Only child changes supported for tracking"),F(s!==".priority","Only non-priority child changes can be tracked.");const l=this.changeMap.get(s);if(l){const u=l.type;if(r==="child_added"&&u==="child_removed")this.changeMap.set(s,cs(s,e.snapshotNode,l.snapshotNode));else if(r==="child_removed"&&u==="child_added")this.changeMap.delete(s);else if(r==="child_removed"&&u==="child_changed")this.changeMap.set(s,us(s,l.oldSnap));else if(r==="child_changed"&&u==="child_added")this.changeMap.set(s,Zr(s,e.snapshotNode));else if(r==="child_changed"&&u==="child_changed")this.changeMap.set(s,cs(s,e.snapshotNode,l.oldSnap));else throw ti("Illegal combination of changes: "+e+" occurred after "+l)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{getCompleteChild(e){return null}getChildAfterChild(e,r,s){return null}}const rg=new I1;class _c{constructor(e,r,s=null){this.writes_=e,this.viewCache_=r,this.optCompleteServerCache_=s}getCompleteChild(e){const r=this.viewCache_.eventCache;if(r.isCompleteForChild(e))return r.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new Yn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return vc(this.writes_,e,s)}}getChildAfterChild(e,r,s){const l=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:gr(this.viewCache_),u=N1(this.writes_,l,r,1,s,e);return u.length===0?null:u[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(i){return{filter:i}}function P1(i,e){F(e.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),F(e.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed")}function R1(i,e,r,s,l){const u=new T1;let d,h;if(r.type===Yt.OVERWRITE){const g=r;g.source.fromUser?d=Qu(i,e,g.path,g.snap,s,l,u):(F(g.source.fromServer,"Unknown source."),h=g.source.tagged||e.serverCache.isFiltered()&&!pe(g.path),d=el(i,e,g.path,g.snap,s,l,h,u))}else if(r.type===Yt.MERGE){const g=r;g.source.fromUser?d=D1(i,e,g.path,g.children,s,l,u):(F(g.source.fromServer,"Unknown source."),h=g.source.tagged||e.serverCache.isFiltered(),d=qu(i,e,g.path,g.children,s,l,h,u))}else if(r.type===Yt.ACK_USER_WRITE){const g=r;g.revert?d=L1(i,e,g.path,s,l,u):d=O1(i,e,g.path,g.affectedTree,s,l,u)}else if(r.type===Yt.LISTEN_COMPLETE)d=A1(i,e,r.path,s,u);else throw ti("Unknown operation type: "+r.type);const m=u.getChanges();return M1(e,d,m),{viewCache:d,changes:m}}function M1(i,e,r){const s=e.eventCache;if(s.isFullyInitialized()){const l=s.getNode().isLeafNode()||s.getNode().isEmpty(),u=Xo(i);(r.length>0||!i.eventCache.isFullyInitialized()||l&&!s.getNode().equals(u)||!s.getNode().getPriority().equals(u.getPriority()))&&r.push(Qm(Xo(e)))}}function ig(i,e,r,s,l,u){const d=e.eventCache;if(Zo(s,r)!=null)return e;{let h,m;if(pe(r))if(F(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const g=gr(e),x=g instanceof ne?g:ne.EMPTY_NODE,_=yc(s,x);h=i.filter.updateFullNode(e.eventCache.getNode(),_,u)}else{const g=Jo(s,gr(e));h=i.filter.updateFullNode(e.eventCache.getNode(),g,u)}else{const g=ye(r);if(g===".priority"){F(Gn(r)===1,"Can't have a priority with additional path components");const x=d.getNode();m=e.serverCache.getNode();const _=Tp(s,r,x,m);_!=null?h=i.filter.updatePriority(x,_):h=d.getNode()}else{const x=Oe(r);let _;if(d.isCompleteForChild(g)){m=e.serverCache.getNode();const w=Tp(s,r,d.getNode(),m);w!=null?_=d.getNode().getImmediateChild(g).updateChild(x,w):_=d.getNode().getImmediateChild(g)}else _=vc(s,g,e.serverCache);_!=null?h=i.filter.updateChild(d.getNode(),g,_,x,l,u):h=d.getNode()}}return ns(e,h,d.isFullyInitialized()||pe(r),i.filter.filtersNodes())}}function el(i,e,r,s,l,u,d,h){const m=e.serverCache;let g;const x=d?i.filter:i.filter.getIndexedFilter();if(pe(r))g=x.updateFullNode(m.getNode(),s,null);else if(x.filtersNodes()&&!m.isFiltered()){const I=m.getNode().updateChild(r,s);g=x.updateFullNode(m.getNode(),I,null)}else{const I=ye(r);if(!m.isCompleteForPath(r)&&Gn(r)>1)return e;const b=Oe(r),L=m.getNode().getImmediateChild(I).updateChild(b,s);I===".priority"?g=x.updatePriority(m.getNode(),L):g=x.updateChild(m.getNode(),I,L,b,rg,null)}const _=Xm(e,g,m.isFullyInitialized()||pe(r),x.filtersNodes()),w=new _c(l,_,u);return ig(i,_,r,l,w,h)}function Qu(i,e,r,s,l,u,d){const h=e.eventCache;let m,g;const x=new _c(l,e,u);if(pe(r))g=i.filter.updateFullNode(e.eventCache.getNode(),s,d),m=ns(e,g,!0,i.filter.filtersNodes());else{const _=ye(r);if(_===".priority")g=i.filter.updatePriority(e.eventCache.getNode(),s),m=ns(e,g,h.isFullyInitialized(),h.isFiltered());else{const w=Oe(r),I=h.getNode().getImmediateChild(_);let b;if(pe(w))b=s;else{const D=x.getCompleteChild(_);D!=null?jm(w)===".priority"&&D.getChild(Wm(w)).isEmpty()?b=D:b=D.updateChild(w,s):b=ne.EMPTY_NODE}if(I.equals(b))m=e;else{const D=i.filter.updateChild(h.getNode(),_,b,w,x,d);m=ns(e,D,h.isFullyInitialized(),i.filter.filtersNodes())}}}return m}function Ip(i,e){return i.eventCache.isCompleteForChild(e)}function D1(i,e,r,s,l,u,d){let h=e;return s.foreach((m,g)=>{const x=Xe(r,m);Ip(e,ye(x))&&(h=Qu(i,h,x,g,l,u,d))}),s.foreach((m,g)=>{const x=Xe(r,m);Ip(e,ye(x))||(h=Qu(i,h,x,g,l,u,d))}),h}function bp(i,e,r){return r.foreach((s,l)=>{e=e.updateChild(s,l)}),e}function qu(i,e,r,s,l,u,d,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let m=e,g;pe(r)?g=s:g=new je(null).setTree(r,s);const x=e.serverCache.getNode();return g.children.inorderTraversal((_,w)=>{if(x.hasChild(_)){const I=e.serverCache.getNode().getImmediateChild(_),b=bp(i,I,w);m=el(i,m,new Re(_),b,l,u,d,h)}}),g.children.inorderTraversal((_,w)=>{const I=!e.serverCache.isCompleteForChild(_)&&w.value===null;if(!x.hasChild(_)&&!I){const b=e.serverCache.getNode().getImmediateChild(_),D=bp(i,b,w);m=el(i,m,new Re(_),D,l,u,d,h)}}),m}function O1(i,e,r,s,l,u,d){if(Zo(l,r)!=null)return e;const h=e.serverCache.isFiltered(),m=e.serverCache;if(s.value!=null){if(pe(r)&&m.isFullyInitialized()||m.isCompleteForPath(r))return el(i,e,r,m.getNode().getChild(r),l,u,h,d);if(pe(r)){let g=new je(null);return m.getNode().forEachChild(Qr,(x,_)=>{g=g.set(new Re(x),_)}),qu(i,e,r,g,l,u,h,d)}else return e}else{let g=new je(null);return s.foreach((x,_)=>{const w=Xe(r,x);m.isCompleteForPath(w)&&(g=g.set(x,m.getNode().getChild(w)))}),qu(i,e,r,g,l,u,h,d)}}function A1(i,e,r,s,l){const u=e.serverCache,d=Xm(e,u.getNode(),u.isFullyInitialized()||pe(r),u.isFiltered());return ig(i,d,r,s,rg,l)}function L1(i,e,r,s,l,u){let d;if(Zo(s,r)!=null)return e;{const h=new _c(s,e,l),m=e.eventCache.getNode();let g;if(pe(r)||ye(r)===".priority"){let x;if(e.serverCache.isFullyInitialized())x=Jo(s,gr(e));else{const _=e.serverCache.getNode();F(_ instanceof ne,"serverChildren would be complete if leaf node"),x=yc(s,_)}x=x,g=i.filter.updateFullNode(m,x,u)}else{const x=ye(r);let _=vc(s,x,e.serverCache);_==null&&e.serverCache.isCompleteForChild(x)&&(_=m.getImmediateChild(x)),_!=null?g=i.filter.updateChild(m,x,_,Oe(r),h,u):e.eventCache.getNode().hasChild(x)?g=i.filter.updateChild(m,x,ne.EMPTY_NODE,Oe(r),h,u):g=m,g.isEmpty()&&e.serverCache.isFullyInitialized()&&(d=Jo(s,gr(e)),d.isLeafNode()&&(g=i.filter.updateFullNode(g,d,u)))}return d=e.serverCache.isFullyInitialized()||Zo(s,ke())!=null,ns(e,g,d,i.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e,r){this.query_=e,this.eventRegistrations_=[];const s=this.query_._queryParams,l=new hc(s.getIndex()),u=n1(s);this.processor_=b1(u);const d=r.serverCache,h=r.eventCache,m=l.updateFullNode(ne.EMPTY_NODE,d.getNode(),null),g=u.updateFullNode(ne.EMPTY_NODE,h.getNode(),null),x=new Yn(m,d.isFullyInitialized(),l.filtersNodes()),_=new Yn(g,h.isFullyInitialized(),u.filtersNodes());this.viewCache_=ul(_,x),this.eventGenerator_=new u1(this.query_)}get query(){return this.query_}}function j1(i){return i.viewCache_.serverCache.getNode()}function z1(i){return Xo(i.viewCache_)}function W1(i,e){const r=gr(i.viewCache_);return r&&(i.query._queryParams.loadsAllData()||!pe(e)&&!r.getImmediateChild(ye(e)).isEmpty())?r.getChild(e):null}function Pp(i){return i.eventRegistrations_.length===0}function B1(i,e){i.eventRegistrations_.push(e)}function Rp(i,e,r){const s=[];if(r){F(e==null,"A cancel should cancel all event registrations.");const l=i.query._path;i.eventRegistrations_.forEach(u=>{const d=u.createCancelEvent(r,l);d&&s.push(d)})}if(e){let l=[];for(let u=0;u<i.eventRegistrations_.length;++u){const d=i.eventRegistrations_[u];if(!d.matches(e))l.push(d);else if(e.hasAnyCallback()){l=l.concat(i.eventRegistrations_.slice(u+1));break}}i.eventRegistrations_=l}else i.eventRegistrations_=[];return s}function Mp(i,e,r,s){e.type===Yt.MERGE&&e.source.queryId!==null&&(F(gr(i.viewCache_),"We should always have a full cache before handling merges"),F(Xo(i.viewCache_),"Missing event cache, even though we have a server cache"));const l=i.viewCache_,u=R1(i.processor_,l,e,r,s);return P1(i.processor_,u.viewCache),F(u.viewCache.serverCache.isFullyInitialized()||!l.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),i.viewCache_=u.viewCache,sg(i,u.changes,u.viewCache.eventCache.getNode(),null)}function U1(i,e){const r=i.viewCache_.eventCache,s=[];return r.getNode().isLeafNode()||r.getNode().forEachChild($e,(u,d)=>{s.push(Zr(u,d))}),r.isFullyInitialized()&&s.push(Qm(r.getNode())),sg(i,s,r.getNode(),e)}function sg(i,e,r,s){const l=s?[s]:i.eventRegistrations_;return c1(i.eventGenerator_,e,r,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tl;class og{constructor(){this.views=new Map}}function H1(i){F(!tl,"__referenceConstructor has already been defined"),tl=i}function $1(){return F(tl,"Reference.ts has not been loaded"),tl}function V1(i){return i.views.size===0}function wc(i,e,r,s){const l=e.source.queryId;if(l!==null){const u=i.views.get(l);return F(u!=null,"SyncTree gave us an op for an invalid query."),Mp(u,e,r,s)}else{let u=[];for(const d of i.views.values())u=u.concat(Mp(d,e,r,s));return u}}function lg(i,e,r,s,l){const u=e._queryIdentifier,d=i.views.get(u);if(!d){let h=Jo(r,l?s:null),m=!1;h?m=!0:s instanceof ne?(h=yc(r,s),m=!1):(h=ne.EMPTY_NODE,m=!1);const g=ul(new Yn(h,m,!1),new Yn(s,l,!1));return new F1(e,g)}return d}function G1(i,e,r,s,l,u){const d=lg(i,e,s,l,u);return i.views.has(e._queryIdentifier)||i.views.set(e._queryIdentifier,d),B1(d,r),U1(d,r)}function Y1(i,e,r,s){const l=e._queryIdentifier,u=[];let d=[];const h=Qn(i);if(l==="default")for(const[m,g]of i.views.entries())d=d.concat(Rp(g,r,s)),Pp(g)&&(i.views.delete(m),g.query._queryParams.loadsAllData()||u.push(g.query));else{const m=i.views.get(l);m&&(d=d.concat(Rp(m,r,s)),Pp(m)&&(i.views.delete(l),m.query._queryParams.loadsAllData()||u.push(m.query)))}return h&&!Qn(i)&&u.push(new($1())(e._repo,e._path)),{removed:u,events:d}}function ag(i){const e=[];for(const r of i.views.values())r.query._queryParams.loadsAllData()||e.push(r);return e}function Vn(i,e){let r=null;for(const s of i.views.values())r=r||W1(s,e);return r}function ug(i,e){if(e._queryParams.loadsAllData())return dl(i);{const s=e._queryIdentifier;return i.views.get(s)}}function cg(i,e){return ug(i,e)!=null}function Qn(i){return dl(i)!=null}function dl(i){for(const e of i.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nl;function Q1(i){F(!nl,"__referenceConstructor has already been defined"),nl=i}function q1(){return F(nl,"Reference.ts has not been loaded"),nl}let K1=1;class Dp{constructor(e){this.listenProvider_=e,this.syncPointTree_=new je(null),this.pendingWriteTree_=k1(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function dg(i,e,r,s,l){return p1(i.pendingWriteTree_,e,r,s,l),l?Cs(i,new mr(Km(),e,r)):[]}function hr(i,e,r=!1){const s=m1(i.pendingWriteTree_,e);if(g1(i.pendingWriteTree_,e)){let u=new je(null);return s.snap!=null?u=u.set(ke(),!0):Tt(s.children,d=>{u=u.set(new Re(d),!0)}),Cs(i,new Ko(s.path,u,r))}else return[]}function ws(i,e,r){return Cs(i,new mr(mc(),e,r))}function X1(i,e,r){const s=je.fromObject(r);return Cs(i,new hs(mc(),e,s))}function J1(i,e){return Cs(i,new fs(mc(),e))}function Z1(i,e,r){const s=xc(i,r);if(s){const l=Sc(s),u=l.path,d=l.queryId,h=yt(u,e),m=new fs(gc(d),h);return Ec(i,u,m)}else return[]}function fg(i,e,r,s,l=!1){const u=e._path,d=i.syncPointTree_.get(u);let h=[];if(d&&(e._queryIdentifier==="default"||cg(d,e))){const m=Y1(d,e,r,s);V1(d)&&(i.syncPointTree_=i.syncPointTree_.remove(u));const g=m.removed;if(h=m.events,!l){const x=g.findIndex(w=>w._queryParams.loadsAllData())!==-1,_=i.syncPointTree_.findOnPath(u,(w,I)=>Qn(I));if(x&&!_){const w=i.syncPointTree_.subtree(u);if(!w.isEmpty()){const I=rC(w);for(let b=0;b<I.length;++b){const D=I[b],L=D.query,W=gg(i,D);i.listenProvider_.startListening(is(L),ps(i,L),W.hashFn,W.onComplete)}}}!_&&g.length>0&&!s&&(x?i.listenProvider_.stopListening(is(e),null):g.forEach(w=>{const I=i.queryToTagMap.get(fl(w));i.listenProvider_.stopListening(is(w),I)}))}iC(i,g)}return h}function hg(i,e,r,s){const l=xc(i,s);if(l!=null){const u=Sc(l),d=u.path,h=u.queryId,m=yt(d,e),g=new mr(gc(h),m,r);return Ec(i,d,g)}else return[]}function eC(i,e,r,s){const l=xc(i,s);if(l){const u=Sc(l),d=u.path,h=u.queryId,m=yt(d,e),g=je.fromObject(r),x=new hs(gc(h),m,g);return Ec(i,d,x)}else return[]}function tC(i,e,r,s=!1){const l=e._path;let u=null,d=!1;i.syncPointTree_.foreachOnPath(l,(w,I)=>{const b=yt(w,l);u=u||Vn(I,b),d=d||Qn(I)});let h=i.syncPointTree_.get(l);h?(d=d||Qn(h),u=u||Vn(h,ke())):(h=new og,i.syncPointTree_=i.syncPointTree_.set(l,h));let m;u!=null?m=!0:(m=!1,u=ne.EMPTY_NODE,i.syncPointTree_.subtree(l).foreachChild((I,b)=>{const D=Vn(b,ke());D&&(u=u.updateImmediateChild(I,D))}));const g=cg(h,e);if(!g&&!e._queryParams.loadsAllData()){const w=fl(e);F(!i.queryToTagMap.has(w),"View does not exist, but we have a tag");const I=sC();i.queryToTagMap.set(w,I),i.tagToQueryMap.set(I,w)}const x=cl(i.pendingWriteTree_,l);let _=G1(h,e,r,x,u,m);if(!g&&!d&&!s){const w=ug(h,e);_=_.concat(oC(i,e,w))}return _}function Cc(i,e,r){const l=i.pendingWriteTree_,u=i.syncPointTree_.findOnPath(e,(d,h)=>{const m=yt(d,e),g=Vn(h,m);if(g)return g});return eg(l,e,u,r,!0)}function nC(i,e){const r=e._path;let s=null;i.syncPointTree_.foreachOnPath(r,(g,x)=>{const _=yt(g,r);s=s||Vn(x,_)});let l=i.syncPointTree_.get(r);l?s=s||Vn(l,ke()):(l=new og,i.syncPointTree_=i.syncPointTree_.set(r,l));const u=s!=null,d=u?new Yn(s,!0,!1):null,h=cl(i.pendingWriteTree_,e._path),m=lg(l,e,h,u?d.getNode():ne.EMPTY_NODE,u);return z1(m)}function Cs(i,e){return pg(e,i.syncPointTree_,null,cl(i.pendingWriteTree_,ke()))}function pg(i,e,r,s){if(pe(i.path))return mg(i,e,r,s);{const l=e.get(ke());r==null&&l!=null&&(r=Vn(l,ke()));let u=[];const d=ye(i.path),h=i.operationForChild(d),m=e.children.get(d);if(m&&h){const g=r?r.getImmediateChild(d):null,x=tg(s,d);u=u.concat(pg(h,m,g,x))}return l&&(u=u.concat(wc(l,i,s,r))),u}}function mg(i,e,r,s){const l=e.get(ke());r==null&&l!=null&&(r=Vn(l,ke()));let u=[];return e.children.inorderTraversal((d,h)=>{const m=r?r.getImmediateChild(d):null,g=tg(s,d),x=i.operationForChild(d);x&&(u=u.concat(mg(x,h,m,g)))}),l&&(u=u.concat(wc(l,i,s,r))),u}function gg(i,e){const r=e.query,s=ps(i,r);return{hashFn:()=>(j1(e)||ne.EMPTY_NODE).hash(),onComplete:l=>{if(l==="ok")return s?Z1(i,r._path,s):J1(i,r._path);{const u=tw(l,r);return fg(i,r,null,u)}}}}function ps(i,e){const r=fl(e);return i.queryToTagMap.get(r)}function fl(i){return i._path.toString()+"$"+i._queryIdentifier}function xc(i,e){return i.tagToQueryMap.get(e)}function Sc(i){const e=i.indexOf("$");return F(e!==-1&&e<i.length-1,"Bad queryKey."),{queryId:i.substr(e+1),path:new Re(i.substr(0,e))}}function Ec(i,e,r){const s=i.syncPointTree_.get(e);F(s,"Missing sync point for query tag that we're tracking");const l=cl(i.pendingWriteTree_,e);return wc(s,r,l,null)}function rC(i){return i.fold((e,r,s)=>{if(r&&Qn(r))return[dl(r)];{let l=[];return r&&(l=ag(r)),Tt(s,(u,d)=>{l=l.concat(d)}),l}})}function is(i){return i._queryParams.loadsAllData()&&!i._queryParams.isDefault()?new(q1())(i._repo,i._path):i}function iC(i,e){for(let r=0;r<e.length;++r){const s=e[r];if(!s._queryParams.loadsAllData()){const l=fl(s),u=i.queryToTagMap.get(l);i.queryToTagMap.delete(l),i.tagToQueryMap.delete(u)}}}function sC(){return K1++}function oC(i,e,r){const s=e._path,l=ps(i,e),u=gg(i,r),d=i.listenProvider_.startListening(is(e),l,u.hashFn,u.onComplete),h=i.syncPointTree_.subtree(s);if(l)F(!Qn(h.value),"If we're adding a query, it shouldn't be shadowed");else{const m=h.fold((g,x,_)=>{if(!pe(g)&&x&&Qn(x))return[dl(x).query];{let w=[];return x&&(w=w.concat(ag(x).map(I=>I.query))),Tt(_,(I,b)=>{w=w.concat(b)}),w}});for(let g=0;g<m.length;++g){const x=m[g];i.listenProvider_.stopListening(is(x),ps(i,x))}}return d}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e){this.node_=e}getImmediateChild(e){const r=this.node_.getImmediateChild(e);return new kc(r)}node(){return this.node_}}class Nc{constructor(e,r){this.syncTree_=e,this.path_=r}getImmediateChild(e){const r=Xe(this.path_,e);return new Nc(this.syncTree_,r)}node(){return Cc(this.syncTree_,this.path_)}}const lC=function(i){return i=i||{},i.timestamp=i.timestamp||new Date().getTime(),i},Op=function(i,e,r){if(!i||typeof i!="object")return i;if(F(".sv"in i,"Unexpected leaf node or priority contents"),typeof i[".sv"]=="string")return aC(i[".sv"],e,r);if(typeof i[".sv"]=="object")return uC(i[".sv"],e);F(!1,"Unexpected server value: "+JSON.stringify(i,null,2))},aC=function(i,e,r){switch(i){case"timestamp":return r.timestamp;default:F(!1,"Unexpected server value: "+i)}},uC=function(i,e,r){i.hasOwnProperty("increment")||F(!1,"Unexpected server value: "+JSON.stringify(i,null,2));const s=i.increment;typeof s!="number"&&F(!1,"Unexpected increment value: "+s);const l=e.node();if(F(l!==null&&typeof l<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!l.isLeafNode())return s;const d=l.getValue();return typeof d!="number"?s:d+s},cC=function(i,e,r,s){return Tc(e,new Nc(r,i),s)},yg=function(i,e,r){return Tc(i,new kc(e),r)};function Tc(i,e,r){const s=i.getPriority().val(),l=Op(s,e.getImmediateChild(".priority"),r);let u;if(i.isLeafNode()){const d=i,h=Op(d.getValue(),e,r);return h!==d.getValue()||l!==d.getPriority().val()?new tt(h,rt(l)):i}else{const d=i;return u=d,l!==d.getPriority().val()&&(u=u.updatePriority(new tt(l))),d.forEachChild($e,(h,m)=>{const g=Tc(m,e.getImmediateChild(h),r);g!==m&&(u=u.updateImmediateChild(h,g))}),u}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e="",r=null,s={children:{},childCount:0}){this.name=e,this.parent=r,this.node=s}}function bc(i,e){let r=e instanceof Re?e:new Re(e),s=i,l=ye(r);for(;l!==null;){const u=Xr(s.node.children,l)||{children:{},childCount:0};s=new Ic(l,s,u),r=Oe(r),l=ye(r)}return s}function si(i){return i.node.value}function vg(i,e){i.node.value=e,Ku(i)}function _g(i){return i.node.childCount>0}function dC(i){return si(i)===void 0&&!_g(i)}function hl(i,e){Tt(i.node.children,(r,s)=>{e(new Ic(r,i,s))})}function wg(i,e,r,s){r&&!s&&e(i),hl(i,l=>{wg(l,e,!0,s)}),r&&s&&e(i)}function fC(i,e,r){let s=i.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function xs(i){return new Re(i.parent===null?i.name:xs(i.parent)+"/"+i.name)}function Ku(i){i.parent!==null&&hC(i.parent,i.name,i)}function hC(i,e,r){const s=dC(r),l=vn(i.node.children,e);s&&l?(delete i.node.children[e],i.node.childCount--,Ku(i)):!s&&!l&&(i.node.children[e]=r.node,i.node.childCount++,Ku(i))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=/[\[\].#$\/\u0000-\u001F\u007F]/,mC=/[\[\].#$\u0000-\u001F\u007F]/,Iu=10*1024*1024,Cg=function(i){return typeof i=="string"&&i.length!==0&&!pC.test(i)},xg=function(i){return typeof i=="string"&&i.length!==0&&!mC.test(i)},gC=function(i){return i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),xg(i)},yC=function(i,e,r,s){Pc(sc(i,"value"),e,r)},Pc=function(i,e,r){const s=r instanceof Re?new Ow(r,i):r;if(e===void 0)throw new Error(i+"contains undefined "+cr(s));if(typeof e=="function")throw new Error(i+"contains a function "+cr(s)+" with contents = "+e.toString());if(ym(e))throw new Error(i+"contains "+e.toString()+" "+cr(s));if(typeof e=="string"&&e.length>Iu/3&&ll(e)>Iu)throw new Error(i+"contains a string greater than "+Iu+" utf8 bytes "+cr(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let l=!1,u=!1;if(Tt(e,(d,h)=>{if(d===".value")l=!0;else if(d!==".priority"&&d!==".sv"&&(u=!0,!Cg(d)))throw new Error(i+" contains an invalid key ("+d+") "+cr(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Aw(s,d),Pc(i,h,s),Lw(s)}),l&&u)throw new Error(i+' contains ".value" child '+cr(s)+" in addition to actual children.")}},Sg=function(i,e,r,s){if(!xg(r))throw new Error(sc(i,e)+'was an invalid path = "'+r+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},vC=function(i,e,r,s){r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),Sg(i,e,r)},Eg=function(i,e){if(ye(e)===".info")throw new Error(i+" failed = Can't modify data under /.info/")},_C=function(i,e){const r=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Cg(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||r.length!==0&&!gC(r))throw new Error(sc(i,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function kg(i,e){let r=null;for(let s=0;s<e.length;s++){const l=e[s],u=l.getPath();r!==null&&!Bm(u,r.path)&&(i.eventLists_.push(r),r=null),r===null&&(r={events:[],path:u}),r.events.push(l)}r&&i.eventLists_.push(r)}function rn(i,e,r){kg(i,r),CC(i,s=>Gt(s,e)||Gt(e,s))}function CC(i,e){i.recursionDepth_++;let r=!0;for(let s=0;s<i.eventLists_.length;s++){const l=i.eventLists_[s];if(l){const u=l.path;e(u)?(xC(i.eventLists_[s]),i.eventLists_[s]=null):r=!1}}r&&(i.eventLists_=[]),i.recursionDepth_--}function xC(i){for(let e=0;e<i.events.length;e++){const r=i.events[e];if(r!==null){i.events[e]=null;const s=r.getEventRunner();es&&ft("event: "+r.toString()),ii(s)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC="repo_interrupt",EC=25;class kC{constructor(e,r,s,l){this.repoInfo_=e,this.forceRestClient_=r,this.authTokenProvider_=s,this.appCheckProvider_=l,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new wC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=qo(),this.transactionQueueTree_=new Ic,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function NC(i,e,r){if(i.stats_=uc(i.repoInfo_),i.forceRestClient_||sw())i.server_=new Qo(i.repoInfo_,(s,l,u,d)=>{Ap(i,s,l,u,d)},i.authTokenProvider_,i.appCheckProvider_),setTimeout(()=>Lp(i,!0),0);else{if(typeof r<"u"&&r!==null){if(typeof r!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ke(r)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}i.persistentConnection_=new mn(i.repoInfo_,e,(s,l,u,d)=>{Ap(i,s,l,u,d)},s=>{Lp(i,s)},s=>{IC(i,s)},i.authTokenProvider_,i.appCheckProvider_,r),i.server_=i.persistentConnection_}i.authTokenProvider_.addTokenChangeListener(s=>{i.server_.refreshAuthToken(s)}),i.appCheckProvider_.addTokenChangeListener(s=>{i.server_.refreshAppCheckToken(s.token)}),i.statsReporter_=cw(i.repoInfo_,()=>new a1(i.stats_,i.server_)),i.infoData_=new r1,i.infoSyncTree_=new Dp({startListening:(s,l,u,d)=>{let h=[];const m=i.infoData_.getNode(s._path);return m.isEmpty()||(h=ws(i.infoSyncTree_,s._path,m),setTimeout(()=>{d("ok")},0)),h},stopListening:()=>{}}),Mc(i,"connected",!1),i.serverSyncTree_=new Dp({startListening:(s,l,u,d)=>(i.server_.listen(s,u,l,(h,m)=>{const g=d(h,m);rn(i.eventQueue_,s._path,g)}),[]),stopListening:(s,l)=>{i.server_.unlisten(s,l)}})}function TC(i){const r=i.infoData_.getNode(new Re(".info/serverTimeOffset")).val()||0;return new Date().getTime()+r}function Rc(i){return lC({timestamp:TC(i)})}function Ap(i,e,r,s,l){i.dataUpdateCount++;const u=new Re(e);r=i.interceptServerDataCallback_?i.interceptServerDataCallback_(e,r):r;let d=[];if(l)if(s){const m=Uo(r,g=>rt(g));d=eC(i.serverSyncTree_,u,m,l)}else{const m=rt(r);d=hg(i.serverSyncTree_,u,m,l)}else if(s){const m=Uo(r,g=>rt(g));d=X1(i.serverSyncTree_,u,m)}else{const m=rt(r);d=ws(i.serverSyncTree_,u,m)}let h=u;d.length>0&&(h=ml(i,u)),rn(i.eventQueue_,h,d)}function Lp(i,e){Mc(i,"connected",e),e===!1&&RC(i)}function IC(i,e){Tt(e,(r,s)=>{Mc(i,r,s)})}function Mc(i,e,r){const s=new Re("/.info/"+e),l=rt(r);i.infoData_.updateSnapshot(s,l);const u=ws(i.infoSyncTree_,s,l);rn(i.eventQueue_,s,u)}function Ng(i){return i.nextWriteId_++}function bC(i,e,r){const s=nC(i.serverSyncTree_,e);return s!=null?Promise.resolve(s):i.server_.get(e).then(l=>{const u=rt(l).withIndex(e._queryParams.getIndex());tC(i.serverSyncTree_,e,r,!0);let d;if(e._queryParams.loadsAllData())d=ws(i.serverSyncTree_,e._path,u);else{const h=ps(i.serverSyncTree_,e);d=hg(i.serverSyncTree_,e._path,u,h)}return rn(i.eventQueue_,e._path,d),fg(i.serverSyncTree_,e,r,null,!0),u},l=>(pl(i,"get for query "+Ke(e)+" failed: "+l),Promise.reject(new Error(l))))}function PC(i,e,r,s,l){pl(i,"set",{path:e.toString(),value:r,priority:s});const u=Rc(i),d=rt(r,s),h=Cc(i.serverSyncTree_,e),m=yg(d,h,u),g=Ng(i),x=dg(i.serverSyncTree_,e,m,g,!0);kg(i.eventQueue_,x),i.server_.put(e.toString(),d.val(!0),(w,I)=>{const b=w==="ok";b||Nt("set at "+e+" failed: "+w);const D=hr(i.serverSyncTree_,g,!b);rn(i.eventQueue_,e,D),DC(i,l,w,I)});const _=Rg(i,e);ml(i,_),rn(i.eventQueue_,_,[])}function RC(i){pl(i,"onDisconnectEvents");const e=Rc(i),r=qo();Vu(i.onDisconnect_,ke(),(l,u)=>{const d=cC(l,u,i.serverSyncTree_,e);qm(r,l,d)});let s=[];Vu(r,ke(),(l,u)=>{s=s.concat(ws(i.serverSyncTree_,l,u));const d=Rg(i,l);ml(i,d)}),i.onDisconnect_=qo(),rn(i.eventQueue_,ke(),s)}function MC(i){i.persistentConnection_&&i.persistentConnection_.interrupt(SC)}function pl(i,...e){let r="";i.persistentConnection_&&(r=i.persistentConnection_.id+":"),ft(r,...e)}function DC(i,e,r,s){e&&ii(()=>{if(r==="ok")e(null);else{const l=(r||"error").toUpperCase();let u=l;s&&(u+=": "+s);const d=new Error(u);d.code=l,e(d)}})}function Tg(i,e,r){return Cc(i.serverSyncTree_,e,r)||ne.EMPTY_NODE}function Dc(i,e=i.transactionQueueTree_){if(e||gl(i,e),si(e)){const r=bg(i,e);F(r.length>0,"Sending zero length transaction queue"),r.every(l=>l.status===0)&&OC(i,xs(e),r)}else _g(e)&&hl(e,r=>{Dc(i,r)})}function OC(i,e,r){const s=r.map(g=>g.currentWriteId),l=Tg(i,e,s);let u=l;const d=l.hash();for(let g=0;g<r.length;g++){const x=r[g];F(x.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),x.status=1,x.retryCount++;const _=yt(e,x.path);u=u.updateChild(_,x.currentOutputSnapshotRaw)}const h=u.val(!0),m=e;i.server_.put(m.toString(),h,g=>{pl(i,"transaction put response",{path:m.toString(),status:g});let x=[];if(g==="ok"){const _=[];for(let w=0;w<r.length;w++)r[w].status=2,x=x.concat(hr(i.serverSyncTree_,r[w].currentWriteId)),r[w].onComplete&&_.push(()=>r[w].onComplete(null,!0,r[w].currentOutputSnapshotResolved)),r[w].unwatcher();gl(i,bc(i.transactionQueueTree_,e)),Dc(i,i.transactionQueueTree_),rn(i.eventQueue_,e,x);for(let w=0;w<_.length;w++)ii(_[w])}else{if(g==="datastale")for(let _=0;_<r.length;_++)r[_].status===3?r[_].status=4:r[_].status=0;else{Nt("transaction at "+m.toString()+" failed: "+g);for(let _=0;_<r.length;_++)r[_].status=4,r[_].abortReason=g}ml(i,e)}},d)}function ml(i,e){const r=Ig(i,e),s=xs(r),l=bg(i,r);return AC(i,l,s),s}function AC(i,e,r){if(e.length===0)return;const s=[];let l=[];const d=e.filter(h=>h.status===0).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const m=e[h],g=yt(r,m.path);let x=!1,_;if(F(g!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),m.status===4)x=!0,_=m.abortReason,l=l.concat(hr(i.serverSyncTree_,m.currentWriteId,!0));else if(m.status===0)if(m.retryCount>=EC)x=!0,_="maxretry",l=l.concat(hr(i.serverSyncTree_,m.currentWriteId,!0));else{const w=Tg(i,m.path,d);m.currentInputSnapshot=w;const I=e[h].update(w.val());if(I!==void 0){Pc("transaction failed: Data returned ",I,m.path);let b=rt(I);typeof I=="object"&&I!=null&&vn(I,".priority")||(b=b.updatePriority(w.getPriority()));const L=m.currentWriteId,W=Rc(i),j=yg(b,w,W);m.currentOutputSnapshotRaw=b,m.currentOutputSnapshotResolved=j,m.currentWriteId=Ng(i),d.splice(d.indexOf(L),1),l=l.concat(dg(i.serverSyncTree_,m.path,j,m.currentWriteId,m.applyLocally)),l=l.concat(hr(i.serverSyncTree_,L,!0))}else x=!0,_="nodata",l=l.concat(hr(i.serverSyncTree_,m.currentWriteId,!0))}rn(i.eventQueue_,r,l),l=[],x&&(e[h].status=2,function(w){setTimeout(w,Math.floor(0))}(e[h].unwatcher),e[h].onComplete&&(_==="nodata"?s.push(()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot)):s.push(()=>e[h].onComplete(new Error(_),!1,null))))}gl(i,i.transactionQueueTree_);for(let h=0;h<s.length;h++)ii(s[h]);Dc(i,i.transactionQueueTree_)}function Ig(i,e){let r,s=i.transactionQueueTree_;for(r=ye(e);r!==null&&si(s)===void 0;)s=bc(s,r),e=Oe(e),r=ye(e);return s}function bg(i,e){const r=[];return Pg(i,e,r),r.sort((s,l)=>s.order-l.order),r}function Pg(i,e,r){const s=si(e);if(s)for(let l=0;l<s.length;l++)r.push(s[l]);hl(e,l=>{Pg(i,l,r)})}function gl(i,e){const r=si(e);if(r){let s=0;for(let l=0;l<r.length;l++)r[l].status!==2&&(r[s]=r[l],s++);r.length=s,vg(e,r.length>0?r:void 0)}hl(e,s=>{gl(i,s)})}function Rg(i,e){const r=xs(Ig(i,e)),s=bc(i.transactionQueueTree_,e);return fC(s,l=>{bu(i,l)}),bu(i,s),wg(s,l=>{bu(i,l)}),r}function bu(i,e){const r=si(e);if(r){const s=[];let l=[],u=-1;for(let d=0;d<r.length;d++)r[d].status===3||(r[d].status===1?(F(u===d-1,"All SENT items should be at beginning of queue."),u=d,r[d].status=3,r[d].abortReason="set"):(F(r[d].status===0,"Unexpected transaction status in abort"),r[d].unwatcher(),l=l.concat(hr(i.serverSyncTree_,r[d].currentWriteId,!0)),r[d].onComplete&&s.push(r[d].onComplete.bind(null,new Error("set"),!1,null))));u===-1?vg(e,void 0):r.length=u+1,rn(i.eventQueue_,xs(e),l);for(let d=0;d<s.length;d++)ii(s[d])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LC(i){let e="";const r=i.split("/");for(let s=0;s<r.length;s++)if(r[s].length>0){let l=r[s];try{l=decodeURIComponent(l.replace(/\+/g," "))}catch{}e+="/"+l}return e}function FC(i){const e={};i.charAt(0)==="?"&&(i=i.substring(1));for(const r of i.split("&")){if(r.length===0)continue;const s=r.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):Nt(`Invalid query segment '${r}' in query '${i}'`)}return e}const Fp=function(i,e){const r=jC(i),s=r.namespace;r.domain==="firebase.com"&&yn(r.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&r.domain!=="localhost"&&yn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),r.secure||K0();const l=r.scheme==="ws"||r.scheme==="wss";return{repoInfo:new bm(r.host,r.secure,s,l,e,"",s!==r.subdomain),path:new Re(r.pathString)}},jC=function(i){let e="",r="",s="",l="",u="",d=!0,h="https",m=443;if(typeof i=="string"){let g=i.indexOf("//");g>=0&&(h=i.substring(0,g-1),i=i.substring(g+2));let x=i.indexOf("/");x===-1&&(x=i.length);let _=i.indexOf("?");_===-1&&(_=i.length),e=i.substring(0,Math.min(x,_)),x<_&&(l=LC(i.substring(x,_)));const w=FC(i.substring(Math.min(i.length,_)));g=e.indexOf(":"),g>=0?(d=h==="https"||h==="wss",m=parseInt(e.substring(g+1),10)):g=e.length;const I=e.slice(0,g);if(I.toLowerCase()==="localhost")r="localhost";else if(I.split(".").length<=2)r=I;else{const b=e.indexOf(".");s=e.substring(0,b).toLowerCase(),r=e.substring(b+1),u=s}"ns"in w&&(u=w.ns)}return{host:e,port:m,domain:r,subdomain:s,secure:d,scheme:h,pathString:l,namespace:u}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,r,s,l){this.eventType=e,this.eventRegistration=r,this.snapshot=s,this.prevName=l}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ke(this.snapshot.exportVal())}}class WC{constructor(e,r,s){this.eventRegistration=e,this.error=r,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,r){this.snapshotCallback=e,this.cancelCallback=r}onValue(e,r){this.snapshotCallback.call(null,e,r)}onCancel(e){return F(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,r,s,l){this._repo=e,this._path=r,this._queryParams=s,this._orderByCalled=l}get key(){return pe(this._path)?null:jm(this._path)}get ref(){return new _n(this._repo,this._path)}get _queryIdentifier(){const e=xp(this._queryParams),r=lc(e);return r==="{}"?"default":r}get _queryObject(){return xp(this._queryParams)}isEqual(e){if(e=ni(e),!(e instanceof Oc))return!1;const r=this._repo===e._repo,s=Bm(this._path,e._path),l=this._queryIdentifier===e._queryIdentifier;return r&&s&&l}toJSON(){return this.toString()}toString(){return this._repo.toString()+Dw(this._path)}}class _n extends Oc{constructor(e,r){super(e,r,new pc,!1)}get parent(){const e=Wm(this._path);return e===null?null:new _n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class ms{constructor(e,r,s){this._node=e,this.ref=r,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const r=new Re(e),s=rl(this.ref,e);return new ms(this._node.getChild(r),s,$e)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(s,l)=>e(new ms(l,rl(this.ref,s),$e)))}hasChild(e){const r=new Re(e);return!this._node.getChild(r).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Pu(i,e){return i=ni(i),i._checkNotDeleted("ref"),e!==void 0?rl(i._root,e):i._root}function rl(i,e){return i=ni(i),ye(i._path)===null?vC("child","path",e):Sg("child","path",e),new _n(i._repo,Xe(i._path,e))}function UC(i){return Eg("remove",i._path),Mg(i,null)}function Mg(i,e){i=ni(i),Eg("set",i._path),yC("set",e,i._path);const r=new ol;return PC(i._repo,i._path,e,null,r.wrapCallback(()=>{})),r.promise}function HC(i){i=ni(i);const e=new BC(()=>{}),r=new Ac(e);return bC(i._repo,i,r).then(s=>new ms(s,new _n(i._repo,i._path),i._queryParams.getIndex()))}class Ac{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,r){const s=r._queryParams.getIndex();return new zC("value",this,new ms(e.snapshotNode,new _n(r._repo,r._path),s))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,r){return this.callbackContext.hasCancelCallback?new WC(this,e,r):null}matches(e){return e instanceof Ac?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}H1(_n);Q1(_n);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C="FIREBASE_DATABASE_EMULATOR_HOST",Xu={};let VC=!1;function GC(i,e,r,s){i.repoInfo_=new bm(`${e}:${r}`,!1,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams,!0),s&&(i.authTokenProvider_=s)}function YC(i,e,r,s,l){let u=s||i.options.databaseURL;u===void 0&&(i.options.projectId||yn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ft("Using default host for project ",i.options.projectId),u=`${i.options.projectId}-default-rtdb.firebaseio.com`);let d=Fp(u,l),h=d.repoInfo,m;typeof process<"u"&&ip&&(m=ip[$C]),m?(u=`http://${m}?ns=${h.namespace}`,d=Fp(u,l),h=d.repoInfo):d.repoInfo.secure;const g=new lw(i.name,i.options,e);_C("Invalid Firebase Database URL",d),pe(d.path)||yn("Database URL must point to the root of a Firebase Database (not including a child path).");const x=qC(h,i,g,new ow(i.name,r));return new KC(x,i)}function QC(i,e){const r=Xu[e];(!r||r[i.key]!==i)&&yn(`Database ${e}(${i.repoInfo_}) has already been deleted.`),MC(i),delete r[i.key]}function qC(i,e,r,s){let l=Xu[e.name];l||(l={},Xu[e.name]=l);let u=l[i.toURLString()];return u&&yn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),u=new kC(i,VC,r,s),l[i.toURLString()]=u,u}class KC{constructor(e,r){this._repoInternal=e,this.app=r,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(NC(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new _n(this._repo,ke())),this._rootInternal}_delete(){return this._rootInternal!==null&&(QC(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&yn("Cannot call "+e+" on a deleted database.")}}function XC(i=O0(),e){const r=P0(i,"database").getImmediate({identifier:e});if(!r._instanceStarted){const s=w_("database");s&&JC(r,...s)}return r}function JC(i,e,r,s={}){i=ni(i),i._checkNotDeleted("useEmulator"),i._instanceStarted&&yn("Cannot call useEmulator() after instance has already been initialized.");const l=i._repoInternal;let u;if(l.repoInfo_.nodeAdmin)s.mockUserToken&&yn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),u=new zo(zo.OWNER);else if(s.mockUserToken){const d=typeof s.mockUserToken=="string"?s.mockUserToken:C_(s.mockUserToken,i.app.options.projectId);u=new zo(d)}GC(l,e,r,u)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZC(i){$0(D0),$o(new os("database",(e,{instanceIdentifier:r})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("auth-internal"),u=e.getProvider("app-check-internal");return YC(s,l,u,r)},"PUBLIC").setMultipleInstances(!0)),Gr(sp,op,i),Gr(sp,op,"esm2017")}mn.prototype.simpleListen=function(i,e){this.sendRequest("q",{p:i},e)};mn.prototype.echo=function(i,e){this.sendRequest("echo",{d:i},e)};ZC();var ex="firebase",tx="11.0.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gr(ex,tx,"app");const nx={apiKey:"AIzaSyCO0jRb1uLoeaTLo7NE0BdRKVERp2anC-A",authDomain:"bodik-75ffc.firebaseapp.com",databaseURL:"https://bodik-75ffc-default-rtdb.europe-west1.firebasedatabase.app",projectId:"bodik-75ffc",storageBucket:"bodik-75ffc.appspot.com",messagingSenderId:"904451021821",appId:"1:904451021821:web:b1b6606a4d38a6c1941794"},rx=dm(nx),Ru=XC(rx),Mu="/app_budget/items/";function ix(){const[i,e]=J.useState(!1),[r,s]=J.useState(""),[l,u]=J.useState(""),[d,h]=Pe("localMainCurrency",""),[m,g]=Pe("localAccounts",[]),[x,_]=Pe("localCurrency",[]),[w,I]=Pe("localTransactions",[]),b=()=>{s(""),u(""),e(!0);try{Mg(Pu(Ru,Mu+"bodik"),{localMainCurrency:d,localAccounts:m,localCurrency:x,localTransactions:w}).then(()=>{s("Выгружено"),e(!1)})}catch(W){console.log(W),u("Error. Try later")}},D=()=>{if(confirm("Восстановить? Текущие данные будут удалены!")===!0){s(""),u(""),e(!0);try{const W=Pu(Ru);HC(rl(W,`${Mu}/bodik`)).then(j=>{if(j.exists()){const V=j.val();V.localMainCurrency&&h(V.localMainCurrency),V.localAccounts&&g(V.localAccounts),V.localCurrency&&_(V.localCurrency),V.localTransactions&&I(V.localTransactions),s("Загружено"),window.location.reload()}else u("No data available");e(!1)}).catch(j=>{console.error(j),u(j)})}catch(W){console.log(W),u("Error. Try later")}}},L=()=>{s(""),u(""),e(!0),confirm("Удалить?")===!0?UC(Pu(Ru,Mu+"bodik")).then(()=>{e(!1),s("Данные на сервере удалены")}).catch(W=>{console.error("Error removing item:",W),e(!1),u(W)}):e(!1)};return y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"mt-4 flex gap-2 ",children:[y.jsx("button",{onClick:L,className:"btn_2",children:"Удалить все"}),y.jsx("button",{onClick:D,className:"btn_2",children:"Восстановить"})]}),y.jsx("button",{onClick:b,className:"mt-4 py-2 w-full border-[#E64A19] border-[1.5px] font-medium text-[#E64A19] dark:text-white dark:border-white rounded-lg",children:"Сделать резервную копию"}),l&&y.jsx("p",{className:"mt-2",children:l}),i&&y.jsx("p",{className:"mt-2",children:i}),r&&y.jsx("p",{className:"mt-2",children:r})]})}function sx({setModal:i}){const[e,r]=Pe("localMainCurrency",""),[s,l]=Pe("localCurrency",[]),[u,d]=J.useState(e||""),h=H=>{d(H),r(H),l(Ou)},[m,g]=J.useState({}),x=(H,ae)=>{g(ue=>({...ue,[H]:ae})),isNaN(Number(ae))||l(ue=>ue.map(ve=>ve.id===H?{...ve,exchangeRate:Number(ae)}:ve))},[_,w]=J.useState(!1),[I,b]=J.useState(!1),[D,L]=J.useState(""),[W,j]=J.useState(!1),[V,te]=J.useState(!1),[K,se]=J.useState(""),_e=H=>{H==="1206"&&(se(""),j(!1),te(!0))};return y.jsxs(y.Fragment,{children:[V&&y.jsx(kt,{title:"Синхронизация",setModal:te,node:y.jsx(ix,{})}),_&&y.jsx(Wo,{title:"Удалить всё",dascription:"Вы действительно хотите удалить всё?",onClose:()=>w(!1),onConfirm:()=>{localStorage.clear(),location.reload()}}),W&&y.jsx(kt,{title:"Введите пароль",setModal:j,node:y.jsxs("div",{children:[y.jsx("input",{type:"password",className:"input",value:K,autoFocus:!0,placeholder:"Ввести пароль",onChange:H=>se(H.target.value)}),y.jsx("button",{className:"btn_2 mt-4",onClick:()=>_e(K),children:"Подтвердить"})]}),subModal:!0}),I&&y.jsx(Wo,{title:"Изменение основной валюты",dascription:"Вы действительно хотите изменить основную валюту? Курсы оставшихся валют нужно будет настроить заново!",onClose:()=>b(!1),onConfirm:()=>{h(D),b(!1)}}),y.jsx("h3",{children:u?`Основная валюта ${u}`:"Выберите основную валюту"}),y.jsx("div",{className:"mt-1 grid grid-cols-4 gap-4",children:Ou.map(({id:H,title:ae})=>y.jsx("button",{className:`${u===ae?"ring-2 ring-neutral-500":""} btn_2`,onClick:()=>{e?(b(!0),L(ae)):h(ae)},children:ae},H))}),u&&y.jsxs(y.Fragment,{children:[y.jsx("p",{className:"mt-4 font-aptosSemiBold",children:"Актуальный курс"}),y.jsx("div",{className:"mt-1 grid grid-cols-3 gap-4",children:s.filter(H=>H.title!==u).map(({id:H,title:ae,exchangeRate:ue})=>y.jsxs("div",{className:"flex items-center",children:[y.jsx("p",{className:"w-1/2",children:ae}),y.jsx("input",{type:"number",className:"input",value:m[H]??ue.toString(),onChange:ve=>x(H,ve.target.value)})]},H))})]}),y.jsx("h3",{className:"mt-4",children:"Данные приложения"}),y.jsxs("div",{className:"mt-1 grid grid-cols-2 gap-4",children:[y.jsx("button",{className:"btn_2 border border-[#EA4335] text-[#EA4335]",onClick:()=>w(!0),children:"Удалить все"}),y.jsx("button",{className:"btn_2",onClick:()=>j(!0),children:"Синхронизация"})]}),y.jsx(c_,{}),u&&y.jsx("button",{className:"mt-4 ml-auto block bg-black/5 aspect-square px-4 h-10 rounded-lg leading-none transition-colors hover:bg-black/10 disabled:hidden dark:bg-black dark:text-white",onClick:()=>i(!1),disabled:!u,children:"Сохранить"})]})}function ox({setModal:i}){const[e,r]=Pe("localBudget",0),s=l=>{r(l===""?"":parseFloat(l)||0)};return y.jsxs(y.Fragment,{children:[y.jsx("h3",{children:"Сумма расходов на месяц"}),y.jsx("input",{type:"number",placeholder:"Введите планируемую сумму",className:"w-full dark:bg-transparent dark:text-white",value:e===0?"":e,onChange:l=>s(l.target.value)}),y.jsx("button",{className:"mt-4 ml-auto block bg-black/5 aspect-square px-4 h-10 rounded-lg leading-none transition-colors hover:bg-black/10 disabled:hidden",onClick:()=>i(!1),disabled:!e,children:"Сохранить"})]})}function lx({mainCurrency:i,balance:e,localCurrency:r}){const l=((u,d,h)=>{const m=h.find(x=>x.title===d);if(!m||m.exchangeRate===0)throw new Error("Invalid base currency or exchange rate is zero");const g=m.exchangeRate;return h.map(({title:x,exchangeRate:_})=>{if(_===0)return{title:x,amount:0};const w=u/g*_;return{title:x,amount:Number(w.toFixed(2))}})})(e,i,r);return y.jsx(y.Fragment,{children:l.length>0?y.jsx(y.Fragment,{children:l.map(u=>y.jsxs("p",{children:[u.amount," ",u.title]},u.title))}):y.jsx("p",{children:"Сначала выберите валюту и добавьте счета"})})}const Dg=6048e5,ax=864e5,jp=Symbol.for("constructDateFrom");function qt(i,e){return typeof i=="function"?i(e):i&&typeof i=="object"&&jp in i?i[jp](e):i instanceof Date?new i.constructor(e):new Date(e)}function ht(i,e){return qt(e||i,i)}function ux(i,e,r){const s=ht(i,r==null?void 0:r.in);return isNaN(e)?qt(i,NaN):(s.setDate(s.getDate()+e),s)}function Og(i,e,r){const s=ht(i,r==null?void 0:r.in);if(isNaN(e))return qt(i,NaN);if(!e)return s;const l=s.getDate(),u=qt(i,s.getTime());u.setMonth(s.getMonth()+e+1,0);const d=u.getDate();return l>=d?u:(s.setFullYear(u.getFullYear(),u.getMonth(),l),s)}let cx={};function yl(){return cx}function qn(i,e){var h,m,g,x;const r=yl(),s=(e==null?void 0:e.weekStartsOn)??((m=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:m.weekStartsOn)??r.weekStartsOn??((x=(g=r.locale)==null?void 0:g.options)==null?void 0:x.weekStartsOn)??0,l=ht(i,e==null?void 0:e.in),u=l.getDay(),d=(u<s?7:0)+u-s;return l.setDate(l.getDate()-d),l.setHours(0,0,0,0),l}function il(i,e){return qn(i,{...e,weekStartsOn:1})}function Ag(i,e){const r=ht(i,e==null?void 0:e.in),s=r.getFullYear(),l=qt(r,0);l.setFullYear(s+1,0,4),l.setHours(0,0,0,0);const u=il(l),d=qt(r,0);d.setFullYear(s,0,4),d.setHours(0,0,0,0);const h=il(d);return r.getTime()>=u.getTime()?s+1:r.getTime()>=h.getTime()?s:s-1}function zp(i){const e=ht(i),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+i-+r}function Ss(i,...e){const r=qt.bind(null,i||e.find(s=>typeof s=="object"));return e.map(r)}function sl(i,e){const r=ht(i,e==null?void 0:e.in);return r.setHours(0,0,0,0),r}function Lg(i,e,r){const[s,l]=Ss(r==null?void 0:r.in,i,e),u=sl(s),d=sl(l),h=+u-zp(u),m=+d-zp(d);return Math.round((h-m)/ax)}function dx(i,e){const r=Ag(i,e),s=qt(i,0);return s.setFullYear(r,0,4),s.setHours(0,0,0,0),il(s)}function Ju(i,e,r){const[s,l]=Ss(r==null?void 0:r.in,i,e);return+sl(s)==+sl(l)}function fx(i){return i instanceof Date||typeof i=="object"&&Object.prototype.toString.call(i)==="[object Date]"}function hx(i){return!(!fx(i)&&typeof i!="number"||isNaN(+ht(i)))}function px(i,e){const r=ht(i,e==null?void 0:e.in),s=r.getMonth();return r.setFullYear(r.getFullYear(),s+1,0),r.setHours(23,59,59,999),r}function mx(i,e){const r=ht(i,e==null?void 0:e.in);return r.setDate(1),r.setHours(0,0,0,0),r}function gx(i,e){const r=ht(i,e==null?void 0:e.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}function yx(i,e){const r=e==null?void 0:e.weekStartsOn,s=ht(i,e==null?void 0:e.in),l=s.getDay(),u=(l<r?-7:0)+6-(l-r);return s.setDate(s.getDate()+u),s.setHours(23,59,59,999),s}const vx={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},_x=(i,e,r)=>{let s;const l=vx[i];return typeof l=="string"?s=l:e===1?s=l.one:s=l.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function qr(i){return(e={})=>{const r=e.width?String(e.width):i.defaultWidth;return i.formats[r]||i.formats[i.defaultWidth]}}const wx={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Cx={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},xx={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Sx={date:qr({formats:wx,defaultWidth:"full"}),time:qr({formats:Cx,defaultWidth:"full"}),dateTime:qr({formats:xx,defaultWidth:"full"})},Ex={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},kx=(i,e,r,s)=>Ex[i];function tn(i){return(e,r)=>{const s=r!=null&&r.context?String(r.context):"standalone";let l;if(s==="formatting"&&i.formattingValues){const d=i.defaultFormattingWidth||i.defaultWidth,h=r!=null&&r.width?String(r.width):d;l=i.formattingValues[h]||i.formattingValues[d]}else{const d=i.defaultWidth,h=r!=null&&r.width?String(r.width):i.defaultWidth;l=i.values[h]||i.values[d]}const u=i.argumentCallback?i.argumentCallback(e):e;return l[u]}}const Nx={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Tx={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Ix={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},bx={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Px={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Rx={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Mx=(i,e)=>{const r=Number(i),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Dx={ordinalNumber:Mx,era:tn({values:Nx,defaultWidth:"wide"}),quarter:tn({values:Tx,defaultWidth:"wide",argumentCallback:i=>i-1}),month:tn({values:Ix,defaultWidth:"wide"}),day:tn({values:bx,defaultWidth:"wide"}),dayPeriod:tn({values:Px,defaultWidth:"wide",formattingValues:Rx,defaultFormattingWidth:"wide"})};function nn(i){return(e,r={})=>{const s=r.width,l=s&&i.matchPatterns[s]||i.matchPatterns[i.defaultMatchWidth],u=e.match(l);if(!u)return null;const d=u[0],h=s&&i.parsePatterns[s]||i.parsePatterns[i.defaultParseWidth],m=Array.isArray(h)?Ax(h,_=>_.test(d)):Ox(h,_=>_.test(d));let g;g=i.valueCallback?i.valueCallback(m):m,g=r.valueCallback?r.valueCallback(g):g;const x=e.slice(d.length);return{value:g,rest:x}}}function Ox(i,e){for(const r in i)if(Object.prototype.hasOwnProperty.call(i,r)&&e(i[r]))return r}function Ax(i,e){for(let r=0;r<i.length;r++)if(e(i[r]))return r}function Fg(i){return(e,r={})=>{const s=e.match(i.matchPattern);if(!s)return null;const l=s[0],u=e.match(i.parsePattern);if(!u)return null;let d=i.valueCallback?i.valueCallback(u[0]):u[0];d=r.valueCallback?r.valueCallback(d):d;const h=e.slice(l.length);return{value:d,rest:h}}}const Lx=/^(\d+)(th|st|nd|rd)?/i,Fx=/\d+/i,jx={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},zx={any:[/^b/i,/^(a|c)/i]},Wx={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Bx={any:[/1/i,/2/i,/3/i,/4/i]},Ux={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Hx={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},$x={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Vx={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Gx={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Yx={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Qx={ordinalNumber:Fg({matchPattern:Lx,parsePattern:Fx,valueCallback:i=>parseInt(i,10)}),era:nn({matchPatterns:jx,defaultMatchWidth:"wide",parsePatterns:zx,defaultParseWidth:"any"}),quarter:nn({matchPatterns:Wx,defaultMatchWidth:"wide",parsePatterns:Bx,defaultParseWidth:"any",valueCallback:i=>i+1}),month:nn({matchPatterns:Ux,defaultMatchWidth:"wide",parsePatterns:Hx,defaultParseWidth:"any"}),day:nn({matchPatterns:$x,defaultMatchWidth:"wide",parsePatterns:Vx,defaultParseWidth:"any"}),dayPeriod:nn({matchPatterns:Gx,defaultMatchWidth:"any",parsePatterns:Yx,defaultParseWidth:"any"})},qx={code:"en-US",formatDistance:_x,formatLong:Sx,formatRelative:kx,localize:Dx,match:Qx,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Kx(i,e){const r=ht(i,e==null?void 0:e.in);return Lg(r,gx(r))+1}function Xx(i,e){const r=ht(i,e==null?void 0:e.in),s=+il(r)-+dx(r);return Math.round(s/Dg)+1}function jg(i,e){var x,_,w,I;const r=ht(i,e==null?void 0:e.in),s=r.getFullYear(),l=yl(),u=(e==null?void 0:e.firstWeekContainsDate)??((_=(x=e==null?void 0:e.locale)==null?void 0:x.options)==null?void 0:_.firstWeekContainsDate)??l.firstWeekContainsDate??((I=(w=l.locale)==null?void 0:w.options)==null?void 0:I.firstWeekContainsDate)??1,d=qt((e==null?void 0:e.in)||i,0);d.setFullYear(s+1,0,u),d.setHours(0,0,0,0);const h=qn(d,e),m=qt((e==null?void 0:e.in)||i,0);m.setFullYear(s,0,u),m.setHours(0,0,0,0);const g=qn(m,e);return+r>=+h?s+1:+r>=+g?s:s-1}function Jx(i,e){var h,m,g,x;const r=yl(),s=(e==null?void 0:e.firstWeekContainsDate)??((m=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??r.firstWeekContainsDate??((x=(g=r.locale)==null?void 0:g.options)==null?void 0:x.firstWeekContainsDate)??1,l=jg(i,e),u=qt((e==null?void 0:e.in)||i,0);return u.setFullYear(l,0,s),u.setHours(0,0,0,0),qn(u,e)}function Zx(i,e){const r=ht(i,e==null?void 0:e.in),s=+qn(r,e)-+Jx(r,e);return Math.round(s/Dg)+1}function be(i,e){const r=i<0?"-":"",s=Math.abs(i).toString().padStart(e,"0");return r+s}const zn={y(i,e){const r=i.getFullYear(),s=r>0?r:1-r;return be(e==="yy"?s%100:s,e.length)},M(i,e){const r=i.getMonth();return e==="M"?String(r+1):be(r+1,2)},d(i,e){return be(i.getDate(),e.length)},a(i,e){const r=i.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(i,e){return be(i.getHours()%12||12,e.length)},H(i,e){return be(i.getHours(),e.length)},m(i,e){return be(i.getMinutes(),e.length)},s(i,e){return be(i.getSeconds(),e.length)},S(i,e){const r=e.length,s=i.getMilliseconds(),l=Math.trunc(s*Math.pow(10,r-3));return be(l,e.length)}},$r={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Wp={G:function(i,e,r){const s=i.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(i,e,r){if(e==="yo"){const s=i.getFullYear(),l=s>0?s:1-s;return r.ordinalNumber(l,{unit:"year"})}return zn.y(i,e)},Y:function(i,e,r,s){const l=jg(i,s),u=l>0?l:1-l;if(e==="YY"){const d=u%100;return be(d,2)}return e==="Yo"?r.ordinalNumber(u,{unit:"year"}):be(u,e.length)},R:function(i,e){const r=Ag(i);return be(r,e.length)},u:function(i,e){const r=i.getFullYear();return be(r,e.length)},Q:function(i,e,r){const s=Math.ceil((i.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return be(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(i,e,r){const s=Math.ceil((i.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return be(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(i,e,r){const s=i.getMonth();switch(e){case"M":case"MM":return zn.M(i,e);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(i,e,r){const s=i.getMonth();switch(e){case"L":return String(s+1);case"LL":return be(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(i,e,r,s){const l=Zx(i,s);return e==="wo"?r.ordinalNumber(l,{unit:"week"}):be(l,e.length)},I:function(i,e,r){const s=Xx(i);return e==="Io"?r.ordinalNumber(s,{unit:"week"}):be(s,e.length)},d:function(i,e,r){return e==="do"?r.ordinalNumber(i.getDate(),{unit:"date"}):zn.d(i,e)},D:function(i,e,r){const s=Kx(i);return e==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):be(s,e.length)},E:function(i,e,r){const s=i.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(i,e,r,s){const l=i.getDay(),u=(l-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(u);case"ee":return be(u,2);case"eo":return r.ordinalNumber(u,{unit:"day"});case"eee":return r.day(l,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(l,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(l,{width:"short",context:"formatting"});case"eeee":default:return r.day(l,{width:"wide",context:"formatting"})}},c:function(i,e,r,s){const l=i.getDay(),u=(l-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(u);case"cc":return be(u,e.length);case"co":return r.ordinalNumber(u,{unit:"day"});case"ccc":return r.day(l,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(l,{width:"narrow",context:"standalone"});case"cccccc":return r.day(l,{width:"short",context:"standalone"});case"cccc":default:return r.day(l,{width:"wide",context:"standalone"})}},i:function(i,e,r){const s=i.getDay(),l=s===0?7:s;switch(e){case"i":return String(l);case"ii":return be(l,e.length);case"io":return r.ordinalNumber(l,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(i,e,r){const l=i.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(l,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(l,{width:"wide",context:"formatting"})}},b:function(i,e,r){const s=i.getHours();let l;switch(s===12?l=$r.noon:s===0?l=$r.midnight:l=s/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(l,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(l,{width:"wide",context:"formatting"})}},B:function(i,e,r){const s=i.getHours();let l;switch(s>=17?l=$r.evening:s>=12?l=$r.afternoon:s>=4?l=$r.morning:l=$r.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(l,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(l,{width:"wide",context:"formatting"})}},h:function(i,e,r){if(e==="ho"){let s=i.getHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return zn.h(i,e)},H:function(i,e,r){return e==="Ho"?r.ordinalNumber(i.getHours(),{unit:"hour"}):zn.H(i,e)},K:function(i,e,r){const s=i.getHours()%12;return e==="Ko"?r.ordinalNumber(s,{unit:"hour"}):be(s,e.length)},k:function(i,e,r){let s=i.getHours();return s===0&&(s=24),e==="ko"?r.ordinalNumber(s,{unit:"hour"}):be(s,e.length)},m:function(i,e,r){return e==="mo"?r.ordinalNumber(i.getMinutes(),{unit:"minute"}):zn.m(i,e)},s:function(i,e,r){return e==="so"?r.ordinalNumber(i.getSeconds(),{unit:"second"}):zn.s(i,e)},S:function(i,e){return zn.S(i,e)},X:function(i,e,r){const s=i.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return Up(s);case"XXXX":case"XX":return dr(s);case"XXXXX":case"XXX":default:return dr(s,":")}},x:function(i,e,r){const s=i.getTimezoneOffset();switch(e){case"x":return Up(s);case"xxxx":case"xx":return dr(s);case"xxxxx":case"xxx":default:return dr(s,":")}},O:function(i,e,r){const s=i.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Bp(s,":");case"OOOO":default:return"GMT"+dr(s,":")}},z:function(i,e,r){const s=i.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Bp(s,":");case"zzzz":default:return"GMT"+dr(s,":")}},t:function(i,e,r){const s=Math.trunc(+i/1e3);return be(s,e.length)},T:function(i,e,r){return be(+i,e.length)}};function Bp(i,e=""){const r=i>0?"-":"+",s=Math.abs(i),l=Math.trunc(s/60),u=s%60;return u===0?r+String(l):r+String(l)+e+be(u,2)}function Up(i,e){return i%60===0?(i>0?"-":"+")+be(Math.abs(i)/60,2):dr(i,e)}function dr(i,e=""){const r=i>0?"-":"+",s=Math.abs(i),l=be(Math.trunc(s/60),2),u=be(s%60,2);return r+l+e+u}const Hp=(i,e)=>{switch(i){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},zg=(i,e)=>{switch(i){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},eS=(i,e)=>{const r=i.match(/(P+)(p+)?/)||[],s=r[1],l=r[2];if(!l)return Hp(i,e);let u;switch(s){case"P":u=e.dateTime({width:"short"});break;case"PP":u=e.dateTime({width:"medium"});break;case"PPP":u=e.dateTime({width:"long"});break;case"PPPP":default:u=e.dateTime({width:"full"});break}return u.replace("{{date}}",Hp(s,e)).replace("{{time}}",zg(l,e))},tS={p:zg,P:eS},nS=/^D+$/,rS=/^Y+$/,iS=["D","DD","YY","YYYY"];function sS(i){return nS.test(i)}function oS(i){return rS.test(i)}function lS(i,e,r){const s=aS(i,e,r);if(console.warn(s),iS.includes(i))throw new RangeError(s)}function aS(i,e,r){const s=i[0]==="Y"?"years":"days of the month";return`Use \`${i.toLowerCase()}\` instead of \`${i}\` (in \`${e}\`) for formatting ${s} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const uS=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,cS=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,dS=/^'([^]*?)'?$/,fS=/''/g,hS=/[a-zA-Z]/;function Zu(i,e,r){var x,_,w,I,b,D,L,W;const s=yl(),l=(r==null?void 0:r.locale)??s.locale??qx,u=(r==null?void 0:r.firstWeekContainsDate)??((_=(x=r==null?void 0:r.locale)==null?void 0:x.options)==null?void 0:_.firstWeekContainsDate)??s.firstWeekContainsDate??((I=(w=s.locale)==null?void 0:w.options)==null?void 0:I.firstWeekContainsDate)??1,d=(r==null?void 0:r.weekStartsOn)??((D=(b=r==null?void 0:r.locale)==null?void 0:b.options)==null?void 0:D.weekStartsOn)??s.weekStartsOn??((W=(L=s.locale)==null?void 0:L.options)==null?void 0:W.weekStartsOn)??0,h=ht(i,r==null?void 0:r.in);if(!hx(h))throw new RangeError("Invalid time value");let m=e.match(cS).map(j=>{const V=j[0];if(V==="p"||V==="P"){const te=tS[V];return te(j,l.formatLong)}return j}).join("").match(uS).map(j=>{if(j==="''")return{isToken:!1,value:"'"};const V=j[0];if(V==="'")return{isToken:!1,value:pS(j)};if(Wp[V])return{isToken:!0,value:j};if(V.match(hS))throw new RangeError("Format string contains an unescaped latin alphabet character `"+V+"`");return{isToken:!1,value:j}});l.localize.preprocessor&&(m=l.localize.preprocessor(h,m));const g={firstWeekContainsDate:u,weekStartsOn:d,locale:l};return m.map(j=>{if(!j.isToken)return j.value;const V=j.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&oS(V)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&sS(V))&&lS(V,e,String(i));const te=Wp[V[0]];return te(h,V,l.localize,g)}).join("")}function pS(i){const e=i.match(dS);return e?e[1].replace(fS,"'"):i}function $p(i,e,r){const[s,l]=Ss(r==null?void 0:r.in,i,e);return+qn(s,r)==+qn(l,r)}function Wg(i,e,r){const[s,l]=Ss(r==null?void 0:r.in,i,e);return s.getFullYear()===l.getFullYear()&&s.getMonth()===l.getMonth()}function mS(i,e,r){const[s,l]=Ss(r==null?void 0:r.in,i,e);return s.getFullYear()===l.getFullYear()}function gS(i,e,r){return Og(i,-e,r)}function Xi(i,e){if(i.one!==void 0&&e===1)return i.one;const r=e%10,s=e%100;return r===1&&s!==11?i.singularNominative.replace("{{count}}",String(e)):r>=2&&r<=4&&(s<10||s>20)?i.singularGenitive.replace("{{count}}",String(e)):i.pluralGenitive.replace("{{count}}",String(e))}function gt(i){return(e,r)=>r!=null&&r.addSuffix?r.comparison&&r.comparison>0?i.future?Xi(i.future,e):"через "+Xi(i.regular,e):i.past?Xi(i.past,e):Xi(i.regular,e)+" назад":Xi(i.regular,e)}const yS={lessThanXSeconds:gt({regular:{one:"меньше секунды",singularNominative:"меньше {{count}} секунды",singularGenitive:"меньше {{count}} секунд",pluralGenitive:"меньше {{count}} секунд"},future:{one:"меньше, чем через секунду",singularNominative:"меньше, чем через {{count}} секунду",singularGenitive:"меньше, чем через {{count}} секунды",pluralGenitive:"меньше, чем через {{count}} секунд"}}),xSeconds:gt({regular:{singularNominative:"{{count}} секунда",singularGenitive:"{{count}} секунды",pluralGenitive:"{{count}} секунд"},past:{singularNominative:"{{count}} секунду назад",singularGenitive:"{{count}} секунды назад",pluralGenitive:"{{count}} секунд назад"},future:{singularNominative:"через {{count}} секунду",singularGenitive:"через {{count}} секунды",pluralGenitive:"через {{count}} секунд"}}),halfAMinute:(i,e)=>e!=null&&e.addSuffix?e.comparison&&e.comparison>0?"через полминуты":"полминуты назад":"полминуты",lessThanXMinutes:gt({regular:{one:"меньше минуты",singularNominative:"меньше {{count}} минуты",singularGenitive:"меньше {{count}} минут",pluralGenitive:"меньше {{count}} минут"},future:{one:"меньше, чем через минуту",singularNominative:"меньше, чем через {{count}} минуту",singularGenitive:"меньше, чем через {{count}} минуты",pluralGenitive:"меньше, чем через {{count}} минут"}}),xMinutes:gt({regular:{singularNominative:"{{count}} минута",singularGenitive:"{{count}} минуты",pluralGenitive:"{{count}} минут"},past:{singularNominative:"{{count}} минуту назад",singularGenitive:"{{count}} минуты назад",pluralGenitive:"{{count}} минут назад"},future:{singularNominative:"через {{count}} минуту",singularGenitive:"через {{count}} минуты",pluralGenitive:"через {{count}} минут"}}),aboutXHours:gt({regular:{singularNominative:"около {{count}} часа",singularGenitive:"около {{count}} часов",pluralGenitive:"около {{count}} часов"},future:{singularNominative:"приблизительно через {{count}} час",singularGenitive:"приблизительно через {{count}} часа",pluralGenitive:"приблизительно через {{count}} часов"}}),xHours:gt({regular:{singularNominative:"{{count}} час",singularGenitive:"{{count}} часа",pluralGenitive:"{{count}} часов"}}),xDays:gt({regular:{singularNominative:"{{count}} день",singularGenitive:"{{count}} дня",pluralGenitive:"{{count}} дней"}}),aboutXWeeks:gt({regular:{singularNominative:"около {{count}} недели",singularGenitive:"около {{count}} недель",pluralGenitive:"около {{count}} недель"},future:{singularNominative:"приблизительно через {{count}} неделю",singularGenitive:"приблизительно через {{count}} недели",pluralGenitive:"приблизительно через {{count}} недель"}}),xWeeks:gt({regular:{singularNominative:"{{count}} неделя",singularGenitive:"{{count}} недели",pluralGenitive:"{{count}} недель"}}),aboutXMonths:gt({regular:{singularNominative:"около {{count}} месяца",singularGenitive:"около {{count}} месяцев",pluralGenitive:"около {{count}} месяцев"},future:{singularNominative:"приблизительно через {{count}} месяц",singularGenitive:"приблизительно через {{count}} месяца",pluralGenitive:"приблизительно через {{count}} месяцев"}}),xMonths:gt({regular:{singularNominative:"{{count}} месяц",singularGenitive:"{{count}} месяца",pluralGenitive:"{{count}} месяцев"}}),aboutXYears:gt({regular:{singularNominative:"около {{count}} года",singularGenitive:"около {{count}} лет",pluralGenitive:"около {{count}} лет"},future:{singularNominative:"приблизительно через {{count}} год",singularGenitive:"приблизительно через {{count}} года",pluralGenitive:"приблизительно через {{count}} лет"}}),xYears:gt({regular:{singularNominative:"{{count}} год",singularGenitive:"{{count}} года",pluralGenitive:"{{count}} лет"}}),overXYears:gt({regular:{singularNominative:"больше {{count}} года",singularGenitive:"больше {{count}} лет",pluralGenitive:"больше {{count}} лет"},future:{singularNominative:"больше, чем через {{count}} год",singularGenitive:"больше, чем через {{count}} года",pluralGenitive:"больше, чем через {{count}} лет"}}),almostXYears:gt({regular:{singularNominative:"почти {{count}} год",singularGenitive:"почти {{count}} года",pluralGenitive:"почти {{count}} лет"},future:{singularNominative:"почти через {{count}} год",singularGenitive:"почти через {{count}} года",pluralGenitive:"почти через {{count}} лет"}})},vS=(i,e,r)=>yS[i](e,r),_S={full:"EEEE, d MMMM y 'г.'",long:"d MMMM y 'г.'",medium:"d MMM y 'г.'",short:"dd.MM.y"},wS={full:"H:mm:ss zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},CS={any:"{{date}}, {{time}}"},xS={date:qr({formats:_S,defaultWidth:"full"}),time:qr({formats:wS,defaultWidth:"full"}),dateTime:qr({formats:CS,defaultWidth:"any"})},Lc=["воскресенье","понедельник","вторник","среду","четверг","пятницу","субботу"];function SS(i){const e=Lc[i];switch(i){case 0:return"'в прошлое "+e+" в' p";case 1:case 2:case 4:return"'в прошлый "+e+" в' p";case 3:case 5:case 6:return"'в прошлую "+e+" в' p"}}function Vp(i){const e=Lc[i];return i===2?"'во "+e+" в' p":"'в "+e+" в' p"}function ES(i){const e=Lc[i];switch(i){case 0:return"'в следующее "+e+" в' p";case 1:case 2:case 4:return"'в следующий "+e+" в' p";case 3:case 5:case 6:return"'в следующую "+e+" в' p"}}const kS={lastWeek:(i,e,r)=>{const s=i.getDay();return $p(i,e,r)?Vp(s):SS(s)},yesterday:"'вчера в' p",today:"'сегодня в' p",tomorrow:"'завтра в' p",nextWeek:(i,e,r)=>{const s=i.getDay();return $p(i,e,r)?Vp(s):ES(s)},other:"P"},NS=(i,e,r,s)=>{const l=kS[i];return typeof l=="function"?l(e,r,s):l},TS={narrow:["до н.э.","н.э."],abbreviated:["до н. э.","н. э."],wide:["до нашей эры","нашей эры"]},IS={narrow:["1","2","3","4"],abbreviated:["1-й кв.","2-й кв.","3-й кв.","4-й кв."],wide:["1-й квартал","2-й квартал","3-й квартал","4-й квартал"]},bS={narrow:["Я","Ф","М","А","М","И","И","А","С","О","Н","Д"],abbreviated:["янв.","фев.","март","апр.","май","июнь","июль","авг.","сент.","окт.","нояб.","дек."],wide:["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"]},PS={narrow:["Я","Ф","М","А","М","И","И","А","С","О","Н","Д"],abbreviated:["янв.","фев.","мар.","апр.","мая","июн.","июл.","авг.","сент.","окт.","нояб.","дек."],wide:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"]},RS={narrow:["В","П","В","С","Ч","П","С"],short:["вс","пн","вт","ср","чт","пт","сб"],abbreviated:["вск","пнд","втр","срд","чтв","птн","суб"],wide:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"]},MS={narrow:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утро",afternoon:"день",evening:"веч.",night:"ночь"},abbreviated:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утро",afternoon:"день",evening:"веч.",night:"ночь"},wide:{am:"ДП",pm:"ПП",midnight:"полночь",noon:"полдень",morning:"утро",afternoon:"день",evening:"вечер",night:"ночь"}},DS={narrow:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утра",afternoon:"дня",evening:"веч.",night:"ночи"},abbreviated:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утра",afternoon:"дня",evening:"веч.",night:"ночи"},wide:{am:"ДП",pm:"ПП",midnight:"полночь",noon:"полдень",morning:"утра",afternoon:"дня",evening:"вечера",night:"ночи"}},OS=(i,e)=>{const r=Number(i),s=e==null?void 0:e.unit;let l;return s==="date"?l="-е":s==="week"||s==="minute"||s==="second"?l="-я":l="-й",r+l},AS={ordinalNumber:OS,era:tn({values:TS,defaultWidth:"wide"}),quarter:tn({values:IS,defaultWidth:"wide",argumentCallback:i=>i-1}),month:tn({values:bS,defaultWidth:"wide",formattingValues:PS,defaultFormattingWidth:"wide"}),day:tn({values:RS,defaultWidth:"wide"}),dayPeriod:tn({values:MS,defaultWidth:"any",formattingValues:DS,defaultFormattingWidth:"wide"})},LS=/^(\d+)(-?(е|я|й|ое|ье|ая|ья|ый|ой|ий|ый))?/i,FS=/\d+/i,jS={narrow:/^((до )?н\.?\s?э\.?)/i,abbreviated:/^((до )?н\.?\s?э\.?)/i,wide:/^(до нашей эры|нашей эры|наша эра)/i},zS={any:[/^д/i,/^н/i]},WS={narrow:/^[1234]/i,abbreviated:/^[1234](-?[ыои]?й?)? кв.?/i,wide:/^[1234](-?[ыои]?й?)? квартал/i},BS={any:[/1/i,/2/i,/3/i,/4/i]},US={narrow:/^[яфмаисонд]/i,abbreviated:/^(янв|фев|март?|апр|ма[йя]|июн[ья]?|июл[ья]?|авг|сент?|окт|нояб?|дек)\.?/i,wide:/^(январ[ья]|феврал[ья]|марта?|апрел[ья]|ма[йя]|июн[ья]|июл[ья]|августа?|сентябр[ья]|октябр[ья]|октябр[ья]|ноябр[ья]|декабр[ья])/i},HS={narrow:[/^я/i,/^ф/i,/^м/i,/^а/i,/^м/i,/^и/i,/^и/i,/^а/i,/^с/i,/^о/i,/^н/i,/^я/i],any:[/^я/i,/^ф/i,/^мар/i,/^ап/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^ав/i,/^с/i,/^о/i,/^н/i,/^д/i]},$S={narrow:/^[впсч]/i,short:/^(вс|во|пн|по|вт|ср|чт|че|пт|пя|сб|су)\.?/i,abbreviated:/^(вск|вос|пнд|пон|втр|вто|срд|сре|чтв|чет|птн|пят|суб).?/i,wide:/^(воскресень[ея]|понедельника?|вторника?|сред[аы]|четверга?|пятниц[аы]|суббот[аы])/i},VS={narrow:[/^в/i,/^п/i,/^в/i,/^с/i,/^ч/i,/^п/i,/^с/i],any:[/^в[ос]/i,/^п[он]/i,/^в/i,/^ср/i,/^ч/i,/^п[ят]/i,/^с[уб]/i]},GS={narrow:/^([дп]п|полн\.?|полд\.?|утр[оа]|день|дня|веч\.?|ноч[ьи])/i,abbreviated:/^([дп]п|полн\.?|полд\.?|утр[оа]|день|дня|веч\.?|ноч[ьи])/i,wide:/^([дп]п|полночь|полдень|утр[оа]|день|дня|вечера?|ноч[ьи])/i},YS={any:{am:/^дп/i,pm:/^пп/i,midnight:/^полн/i,noon:/^полд/i,morning:/^у/i,afternoon:/^д[ен]/i,evening:/^в/i,night:/^н/i}},QS={ordinalNumber:Fg({matchPattern:LS,parsePattern:FS,valueCallback:i=>parseInt(i,10)}),era:nn({matchPatterns:jS,defaultMatchWidth:"wide",parsePatterns:zS,defaultParseWidth:"any"}),quarter:nn({matchPatterns:WS,defaultMatchWidth:"wide",parsePatterns:BS,defaultParseWidth:"any",valueCallback:i=>i+1}),month:nn({matchPatterns:US,defaultMatchWidth:"wide",parsePatterns:HS,defaultParseWidth:"any"}),day:nn({matchPatterns:$S,defaultMatchWidth:"wide",parsePatterns:VS,defaultParseWidth:"any"}),dayPeriod:nn({matchPatterns:GS,defaultMatchWidth:"wide",parsePatterns:YS,defaultParseWidth:"any"})},Bg={code:"ru",formatDistance:vS,formatLong:xS,formatRelative:NS,localize:AS,match:QS,options:{weekStartsOn:1,firstWeekContainsDate:1}},ec=(i,e)=>e.map(s=>{const l=i.reduce((u,d)=>{const h=e.find(g=>g.title===d.currency);if(!h)return u;const m=Number(d.amount)/h.exchangeRate*s.exchangeRate;return u+m},0);return{currency:s.title,total:l}}),Ug=i=>{const r=Lg(i,new Date);let s="";if(r===0)s="Сегодня";else if(r===1)s="Завтра";else if(r===2)s="Послезавтра";else if(r===-1)s="Вчера";else if(r===-2)s="Позавчера";else{const l=Zu(i,"dd.MM.yy",{locale:Bg});s=l.charAt(0).toUpperCase()+l.slice(1).toLowerCase()}return s};function qS(){var K,se,_e;const[i,e]=J.useState(!1),[r,s]=J.useState(!1),[l,u]=J.useState(!1),[d]=Pe("localBudget",0),[h]=Pe("localMainCurrency",""),[m]=Pe("localAccounts",[]),[g]=Pe("localCurrency",[]),[x]=Pe("localTransactions",[]),_=g.map(H=>{const ae=m.reduce((ue,ve)=>{const q=g.find(xe=>xe.title===ve.currency);return q?ue+ve.initialBalance/q.exchangeRate*H.exchangeRate:ue},0);return{currency:H.title,total:ae}}),w=g.map(H=>{const ae=x.filter(ue=>ue.transactionType==="income").reduce((ue,ve)=>{const q=g.find(xe=>xe.title===ve.currency);return q?ue+ve.amount/q.exchangeRate*H.exchangeRate:ue},0);return{currency:H.title,total:ae}}),I=g.map(H=>{const ae=x.filter(ue=>ue.transactionType==="expense").reduce((ue,ve)=>{const q=g.find(xe=>xe.title===ve.currency);return q?ue+ve.amount/q.exchangeRate*H.exchangeRate:ue},0);return{currency:H.title,total:ae}}),b=((K=_.find(H=>H.currency===h))==null?void 0:K.total)||0,D=((se=w.find(H=>H.currency===h))==null?void 0:se.total)||0,L=((_e=I.find(H=>H.currency===h))==null?void 0:_e.total)||0,W=b+D+L,j=ec(x.filter(H=>H.transactionType==="expense"),g),V=d?Math.round(j.filter(H=>H.currency===h)[0].total/d*100):0,te=j.length>0?j.filter(H=>H.currency===h)[0].total*-1:0;return y.jsxs(y.Fragment,{children:[i&&y.jsx(kt,{title:"Настройки",setModal:e,node:y.jsx(sx,{setModal:e})}),r&&y.jsx(kt,{title:"Бюджет",setModal:s,node:y.jsx(ox,{setModal:s})}),l&&y.jsx(kt,{title:"Баланс",setModal:u,node:y.jsx(lx,{mainCurrency:h,balance:W,localCurrency:g})}),y.jsxs("section",{className:"flex justify-between items-center",children:[y.jsxs("div",{className:"flex gap-4 items-center",children:[y.jsx("button",{onClick:()=>e(!0),className:"rounded-full bg-black text-white dark:bg-neutral-600 font-aptosSemiBold aspect-square w-10 h-10 flex items-center justify-center",children:"BS"}),y.jsxs("div",{onClick:()=>u(!0),className:"cursor-pointer",children:[y.jsx("p",{className:"font-aptosSemiBold text-neutral-500",children:"Баланс"}),y.jsxs("p",{className:"text-xl font-aptosBold leading-none",children:[m.length>0?W.toFixed(1):0," ",h||""]})]})]}),y.jsxs("div",{className:"flex flex-col items-end cursor-pointer",onClick:()=>s(!0),children:[y.jsxs("p",{className:"font-aptosSemiBold text-neutral-500",children:["Бюджет ",d?`${V*-1}%`:""]}),d&&y.jsxs("p",{className:"text-xl font-aptosBold leading-none",children:[te.toFixed(0)," / ",d," ",h]})]})]})]})}function Gp({title:i,color:e,amount:r,setModal:s}){const[l]=Pe("localMainCurrency","");return y.jsxs("div",{style:{backgroundColor:e},className:"rounded-lg p-3 pb-2 w-full flex justify-between items-start relative dark:text-black dark:saturate-[900%]",children:[y.jsxs("div",{children:[y.jsx("p",{className:"font-aptosSemiBold text-sm",children:i}),y.jsxs("p",{className:"mt-4 text-xl font-aptosBold",children:[r.toFixed(1)," ",y.jsx("span",{className:"font-aptosSemiBold text-lg",children:l})]})]}),y.jsx("button",{className:"btn_1 absolute top-2 right-2",onClick:()=>s(!0),children:"+"})]})}function KS({setModal:i}){const[e]=Pe("localAccounts",[]);return y.jsx(y.Fragment,{children:y.jsx("div",{className:"grid grid-cols-2 gap-2",children:e.map(r=>y.jsxs("button",{style:{backgroundColor:r.color,color:"white"},className:"btn_2",onClick:()=>i(r),children:[r.title,", ",r.currency]},r.id))})})}function XS({categories:i,setModal:e,onClose:r}){return y.jsx(y.Fragment,{children:y.jsx("div",{className:"grid grid-cols-2 gap-2",children:i.map(s=>y.jsx("button",{className:"btn_2",onClick:()=>{e&&e(s),r&&r(!1)},children:s},s))})})}function Hg(i){var e,r,s="";if(typeof i=="string"||typeof i=="number")s+=i;else if(typeof i=="object")if(Array.isArray(i)){var l=i.length;for(e=0;e<l;e++)i[e]&&(r=Hg(i[e]))&&(s&&(s+=" "),s+=r)}else for(r in i)i[r]&&(s&&(s+=" "),s+=r);return s}function JS(){for(var i,e,r=0,s="",l=arguments.length;r<l;r++)(i=arguments[r])&&(e=Hg(i))&&(s&&(s+=" "),s+=e);return s}const Fc="-",ZS=i=>{const e=tE(i),{conflictingClassGroups:r,conflictingClassGroupModifiers:s}=i;return{getClassGroupId:d=>{const h=d.split(Fc);return h[0]===""&&h.length!==1&&h.shift(),$g(h,e)||eE(d)},getConflictingClassGroupIds:(d,h)=>{const m=r[d]||[];return h&&s[d]?[...m,...s[d]]:m}}},$g=(i,e)=>{var d;if(i.length===0)return e.classGroupId;const r=i[0],s=e.nextPart.get(r),l=s?$g(i.slice(1),s):void 0;if(l)return l;if(e.validators.length===0)return;const u=i.join(Fc);return(d=e.validators.find(({validator:h})=>h(u)))==null?void 0:d.classGroupId},Yp=/^\[(.+)\]$/,eE=i=>{if(Yp.test(i)){const e=Yp.exec(i)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},tE=i=>{const{theme:e,prefix:r}=i,s={nextPart:new Map,validators:[]};return rE(Object.entries(i.classGroups),r).forEach(([u,d])=>{tc(d,s,u,e)}),s},tc=(i,e,r,s)=>{i.forEach(l=>{if(typeof l=="string"){const u=l===""?e:Qp(e,l);u.classGroupId=r;return}if(typeof l=="function"){if(nE(l)){tc(l(s),e,r,s);return}e.validators.push({validator:l,classGroupId:r});return}Object.entries(l).forEach(([u,d])=>{tc(d,Qp(e,u),r,s)})})},Qp=(i,e)=>{let r=i;return e.split(Fc).forEach(s=>{r.nextPart.has(s)||r.nextPart.set(s,{nextPart:new Map,validators:[]}),r=r.nextPart.get(s)}),r},nE=i=>i.isThemeGetter,rE=(i,e)=>e?i.map(([r,s])=>{const l=s.map(u=>typeof u=="string"?e+u:typeof u=="object"?Object.fromEntries(Object.entries(u).map(([d,h])=>[e+d,h])):u);return[r,l]}):i,iE=i=>{if(i<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,s=new Map;const l=(u,d)=>{r.set(u,d),e++,e>i&&(e=0,s=r,r=new Map)};return{get(u){let d=r.get(u);if(d!==void 0)return d;if((d=s.get(u))!==void 0)return l(u,d),d},set(u,d){r.has(u)?r.set(u,d):l(u,d)}}},Vg="!",sE=i=>{const{separator:e,experimentalParseClassName:r}=i,s=e.length===1,l=e[0],u=e.length,d=h=>{const m=[];let g=0,x=0,_;for(let L=0;L<h.length;L++){let W=h[L];if(g===0){if(W===l&&(s||h.slice(L,L+u)===e)){m.push(h.slice(x,L)),x=L+u;continue}if(W==="/"){_=L;continue}}W==="["?g++:W==="]"&&g--}const w=m.length===0?h:h.substring(x),I=w.startsWith(Vg),b=I?w.substring(1):w,D=_&&_>x?_-x:void 0;return{modifiers:m,hasImportantModifier:I,baseClassName:b,maybePostfixModifierPosition:D}};return r?h=>r({className:h,parseClassName:d}):d},oE=i=>{if(i.length<=1)return i;const e=[];let r=[];return i.forEach(s=>{s[0]==="["?(e.push(...r.sort(),s),r=[]):r.push(s)}),e.push(...r.sort()),e},lE=i=>({cache:iE(i.cacheSize),parseClassName:sE(i),...ZS(i)}),aE=/\s+/,uE=(i,e)=>{const{parseClassName:r,getClassGroupId:s,getConflictingClassGroupIds:l}=e,u=[],d=i.trim().split(aE);let h="";for(let m=d.length-1;m>=0;m-=1){const g=d[m],{modifiers:x,hasImportantModifier:_,baseClassName:w,maybePostfixModifierPosition:I}=r(g);let b=!!I,D=s(b?w.substring(0,I):w);if(!D){if(!b){h=g+(h.length>0?" "+h:h);continue}if(D=s(w),!D){h=g+(h.length>0?" "+h:h);continue}b=!1}const L=oE(x).join(":"),W=_?L+Vg:L,j=W+D;if(u.includes(j))continue;u.push(j);const V=l(D,b);for(let te=0;te<V.length;++te){const K=V[te];u.push(W+K)}h=g+(h.length>0?" "+h:h)}return h};function cE(){let i=0,e,r,s="";for(;i<arguments.length;)(e=arguments[i++])&&(r=Gg(e))&&(s&&(s+=" "),s+=r);return s}const Gg=i=>{if(typeof i=="string")return i;let e,r="";for(let s=0;s<i.length;s++)i[s]&&(e=Gg(i[s]))&&(r&&(r+=" "),r+=e);return r};function dE(i,...e){let r,s,l,u=d;function d(m){const g=e.reduce((x,_)=>_(x),i());return r=lE(g),s=r.cache.get,l=r.cache.set,u=h,h(m)}function h(m){const g=s(m);if(g)return g;const x=uE(m,r);return l(m,x),x}return function(){return u(cE.apply(null,arguments))}}const Fe=i=>{const e=r=>r[i]||[];return e.isThemeGetter=!0,e},Yg=/^\[(?:([a-z-]+):)?(.+)\]$/i,fE=/^\d+\/\d+$/,hE=new Set(["px","full","screen"]),pE=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,mE=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,gE=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,yE=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,vE=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,hn=i=>Kr(i)||hE.has(i)||fE.test(i),Wn=i=>oi(i,"length",NE),Kr=i=>!!i&&!Number.isNaN(Number(i)),Du=i=>oi(i,"number",Kr),Ji=i=>!!i&&Number.isInteger(Number(i)),_E=i=>i.endsWith("%")&&Kr(i.slice(0,-1)),le=i=>Yg.test(i),Bn=i=>pE.test(i),wE=new Set(["length","size","percentage"]),CE=i=>oi(i,wE,Qg),xE=i=>oi(i,"position",Qg),SE=new Set(["image","url"]),EE=i=>oi(i,SE,IE),kE=i=>oi(i,"",TE),Zi=()=>!0,oi=(i,e,r)=>{const s=Yg.exec(i);return s?s[1]?typeof e=="string"?s[1]===e:e.has(s[1]):r(s[2]):!1},NE=i=>mE.test(i)&&!gE.test(i),Qg=()=>!1,TE=i=>yE.test(i),IE=i=>vE.test(i),bE=()=>{const i=Fe("colors"),e=Fe("spacing"),r=Fe("blur"),s=Fe("brightness"),l=Fe("borderColor"),u=Fe("borderRadius"),d=Fe("borderSpacing"),h=Fe("borderWidth"),m=Fe("contrast"),g=Fe("grayscale"),x=Fe("hueRotate"),_=Fe("invert"),w=Fe("gap"),I=Fe("gradientColorStops"),b=Fe("gradientColorStopPositions"),D=Fe("inset"),L=Fe("margin"),W=Fe("opacity"),j=Fe("padding"),V=Fe("saturate"),te=Fe("scale"),K=Fe("sepia"),se=Fe("skew"),_e=Fe("space"),H=Fe("translate"),ae=()=>["auto","contain","none"],ue=()=>["auto","hidden","clip","visible","scroll"],ve=()=>["auto",le,e],q=()=>[le,e],xe=()=>["",hn,Wn],ze=()=>["auto",Kr,le],we=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Ne=()=>["solid","dashed","dotted","double","none"],me=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],z=()=>["start","end","center","between","around","evenly","stretch"],X=()=>["","0",le],B=()=>["auto","avoid","all","avoid-page","page","left","right","column"],E=()=>[Kr,le];return{cacheSize:500,separator:":",theme:{colors:[Zi],spacing:[hn,Wn],blur:["none","",Bn,le],brightness:E(),borderColor:[i],borderRadius:["none","","full",Bn,le],borderSpacing:q(),borderWidth:xe(),contrast:E(),grayscale:X(),hueRotate:E(),invert:X(),gap:q(),gradientColorStops:[i],gradientColorStopPositions:[_E,Wn],inset:ve(),margin:ve(),opacity:E(),padding:q(),saturate:E(),scale:E(),sepia:X(),skew:E(),space:q(),translate:q()},classGroups:{aspect:[{aspect:["auto","square","video",le]}],container:["container"],columns:[{columns:[Bn]}],"break-after":[{"break-after":B()}],"break-before":[{"break-before":B()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...we(),le]}],overflow:[{overflow:ue()}],"overflow-x":[{"overflow-x":ue()}],"overflow-y":[{"overflow-y":ue()}],overscroll:[{overscroll:ae()}],"overscroll-x":[{"overscroll-x":ae()}],"overscroll-y":[{"overscroll-y":ae()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[D]}],"inset-x":[{"inset-x":[D]}],"inset-y":[{"inset-y":[D]}],start:[{start:[D]}],end:[{end:[D]}],top:[{top:[D]}],right:[{right:[D]}],bottom:[{bottom:[D]}],left:[{left:[D]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ji,le]}],basis:[{basis:ve()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",le]}],grow:[{grow:X()}],shrink:[{shrink:X()}],order:[{order:["first","last","none",Ji,le]}],"grid-cols":[{"grid-cols":[Zi]}],"col-start-end":[{col:["auto",{span:["full",Ji,le]},le]}],"col-start":[{"col-start":ze()}],"col-end":[{"col-end":ze()}],"grid-rows":[{"grid-rows":[Zi]}],"row-start-end":[{row:["auto",{span:[Ji,le]},le]}],"row-start":[{"row-start":ze()}],"row-end":[{"row-end":ze()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",le]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",le]}],gap:[{gap:[w]}],"gap-x":[{"gap-x":[w]}],"gap-y":[{"gap-y":[w]}],"justify-content":[{justify:["normal",...z()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...z(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...z(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[j]}],px:[{px:[j]}],py:[{py:[j]}],ps:[{ps:[j]}],pe:[{pe:[j]}],pt:[{pt:[j]}],pr:[{pr:[j]}],pb:[{pb:[j]}],pl:[{pl:[j]}],m:[{m:[L]}],mx:[{mx:[L]}],my:[{my:[L]}],ms:[{ms:[L]}],me:[{me:[L]}],mt:[{mt:[L]}],mr:[{mr:[L]}],mb:[{mb:[L]}],ml:[{ml:[L]}],"space-x":[{"space-x":[_e]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[_e]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",le,e]}],"min-w":[{"min-w":[le,e,"min","max","fit"]}],"max-w":[{"max-w":[le,e,"none","full","min","max","fit","prose",{screen:[Bn]},Bn]}],h:[{h:[le,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[le,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[le,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[le,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Bn,Wn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Du]}],"font-family":[{font:[Zi]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",le]}],"line-clamp":[{"line-clamp":["none",Kr,Du]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",hn,le]}],"list-image":[{"list-image":["none",le]}],"list-style-type":[{list:["none","disc","decimal",le]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[i]}],"placeholder-opacity":[{"placeholder-opacity":[W]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[i]}],"text-opacity":[{"text-opacity":[W]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ne(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",hn,Wn]}],"underline-offset":[{"underline-offset":["auto",hn,le]}],"text-decoration-color":[{decoration:[i]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:q()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",le]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",le]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[W]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...we(),xE]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",CE]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},EE]}],"bg-color":[{bg:[i]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[I]}],"gradient-via":[{via:[I]}],"gradient-to":[{to:[I]}],rounded:[{rounded:[u]}],"rounded-s":[{"rounded-s":[u]}],"rounded-e":[{"rounded-e":[u]}],"rounded-t":[{"rounded-t":[u]}],"rounded-r":[{"rounded-r":[u]}],"rounded-b":[{"rounded-b":[u]}],"rounded-l":[{"rounded-l":[u]}],"rounded-ss":[{"rounded-ss":[u]}],"rounded-se":[{"rounded-se":[u]}],"rounded-ee":[{"rounded-ee":[u]}],"rounded-es":[{"rounded-es":[u]}],"rounded-tl":[{"rounded-tl":[u]}],"rounded-tr":[{"rounded-tr":[u]}],"rounded-br":[{"rounded-br":[u]}],"rounded-bl":[{"rounded-bl":[u]}],"border-w":[{border:[h]}],"border-w-x":[{"border-x":[h]}],"border-w-y":[{"border-y":[h]}],"border-w-s":[{"border-s":[h]}],"border-w-e":[{"border-e":[h]}],"border-w-t":[{"border-t":[h]}],"border-w-r":[{"border-r":[h]}],"border-w-b":[{"border-b":[h]}],"border-w-l":[{"border-l":[h]}],"border-opacity":[{"border-opacity":[W]}],"border-style":[{border:[...Ne(),"hidden"]}],"divide-x":[{"divide-x":[h]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[h]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[W]}],"divide-style":[{divide:Ne()}],"border-color":[{border:[l]}],"border-color-x":[{"border-x":[l]}],"border-color-y":[{"border-y":[l]}],"border-color-s":[{"border-s":[l]}],"border-color-e":[{"border-e":[l]}],"border-color-t":[{"border-t":[l]}],"border-color-r":[{"border-r":[l]}],"border-color-b":[{"border-b":[l]}],"border-color-l":[{"border-l":[l]}],"divide-color":[{divide:[l]}],"outline-style":[{outline:["",...Ne()]}],"outline-offset":[{"outline-offset":[hn,le]}],"outline-w":[{outline:[hn,Wn]}],"outline-color":[{outline:[i]}],"ring-w":[{ring:xe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[i]}],"ring-opacity":[{"ring-opacity":[W]}],"ring-offset-w":[{"ring-offset":[hn,Wn]}],"ring-offset-color":[{"ring-offset":[i]}],shadow:[{shadow:["","inner","none",Bn,kE]}],"shadow-color":[{shadow:[Zi]}],opacity:[{opacity:[W]}],"mix-blend":[{"mix-blend":[...me(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":me()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[s]}],contrast:[{contrast:[m]}],"drop-shadow":[{"drop-shadow":["","none",Bn,le]}],grayscale:[{grayscale:[g]}],"hue-rotate":[{"hue-rotate":[x]}],invert:[{invert:[_]}],saturate:[{saturate:[V]}],sepia:[{sepia:[K]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[m]}],"backdrop-grayscale":[{"backdrop-grayscale":[g]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[x]}],"backdrop-invert":[{"backdrop-invert":[_]}],"backdrop-opacity":[{"backdrop-opacity":[W]}],"backdrop-saturate":[{"backdrop-saturate":[V]}],"backdrop-sepia":[{"backdrop-sepia":[K]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[d]}],"border-spacing-x":[{"border-spacing-x":[d]}],"border-spacing-y":[{"border-spacing-y":[d]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",le]}],duration:[{duration:E()}],ease:[{ease:["linear","in","out","in-out",le]}],delay:[{delay:E()}],animate:[{animate:["none","spin","ping","pulse","bounce",le]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[te]}],"scale-x":[{"scale-x":[te]}],"scale-y":[{"scale-y":[te]}],rotate:[{rotate:[Ji,le]}],"translate-x":[{"translate-x":[H]}],"translate-y":[{"translate-y":[H]}],"skew-x":[{"skew-x":[se]}],"skew-y":[{"skew-y":[se]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",le]}],accent:[{accent:["auto",i]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",le]}],"caret-color":[{caret:[i]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":q()}],"scroll-mx":[{"scroll-mx":q()}],"scroll-my":[{"scroll-my":q()}],"scroll-ms":[{"scroll-ms":q()}],"scroll-me":[{"scroll-me":q()}],"scroll-mt":[{"scroll-mt":q()}],"scroll-mr":[{"scroll-mr":q()}],"scroll-mb":[{"scroll-mb":q()}],"scroll-ml":[{"scroll-ml":q()}],"scroll-p":[{"scroll-p":q()}],"scroll-px":[{"scroll-px":q()}],"scroll-py":[{"scroll-py":q()}],"scroll-ps":[{"scroll-ps":q()}],"scroll-pe":[{"scroll-pe":q()}],"scroll-pt":[{"scroll-pt":q()}],"scroll-pr":[{"scroll-pr":q()}],"scroll-pb":[{"scroll-pb":q()}],"scroll-pl":[{"scroll-pl":q()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",le]}],fill:[{fill:[i,"none"]}],"stroke-w":[{stroke:[hn,Wn,Du]}],stroke:[{stroke:[i,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},PE=dE(bE);function RE(...i){return PE(JS(i))}function ME({selected:i,onDateSelect:e,setModal:r}){const[s,l]=J.useState(new Date),u=new Date,d=()=>y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("button",{onClick:()=>l(gS(s,1)),className:"text-gray-500",children:y.jsx(DE,{})}),y.jsx("div",{className:"font-aptosSemiBold capitalize text-lh",children:Zu(s,"LLLL yyyy",{locale:Bg})}),y.jsx("button",{onClick:()=>l(Og(s,1)),className:"text-gray-500",children:y.jsx(OE,{})})]}),h=()=>{const _=["Пн","Вт","Ср","Чт","Пт","Сб","Вс"];return y.jsx("div",{className:"grid grid-cols-7 text-center mb-2 font-aptosSemiBold",children:_.map((w,I)=>y.jsx("div",{children:w},I))})},m=()=>{const _=mx(s),w=px(s),I=qn(_,{weekStartsOn:1}),b=yx(w,{weekStartsOn:1}),D=[];let L=[],W=I;for(;W<=b;){for(let j=0;j<7;j++){const V=W;L.push(y.jsx("div",{className:`${Ju(W,u)&&"text-lg bg-neutral-100"} rounded-full shrink-0 aspect-square flex items-center justify-center cursor-pointer leading-none m-px ${Ju(W,i??new Date)?RE("ring-2 ring-[#EA4335]/80 bg-[#EA4335]/20"):!Wg(W,_)&&"text-gray-400"}`,onClick:()=>g(V),children:Zu(W,"d")},W.toString())),W=ux(W,1)}D.push(y.jsx("div",{className:"grid grid-cols-7",children:L},W.toString())),L=[]}return y.jsx("div",{children:D})},g=_=>{e(_),r(!1)},x=()=>{const _=new Date;l(_),e(_),r(!1)};return y.jsxs("div",{className:"w-full max-w-md mx-auto",children:[d(),h(),m(),y.jsxs("div",{className:"mt-4 flex gap-2",children:[y.jsx("button",{className:"btn_2",onClick:x,children:"Сегодня"}),y.jsx("button",{disabled:!i,className:"btn_2",onClick:()=>{i&&r(!1)},children:"Установить"})]})]})}function DE(){return y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-chevron-left",children:y.jsx("path",{d:"m15 18-6-6 6-6"})})}function OE(){return y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-chevron-right",children:y.jsx("path",{d:"m9 18 6-6-6-6"})})}function nc({transactionType:i,setModal:e,editMode:r,transaction:s}){const[l,u]=J.useState(!1),[d,h]=J.useState(!1),[m,g]=J.useState(!1),[x]=Pe("localAccounts",[]),_=x.filter(we=>we.id===(s==null?void 0:s.accountId))[0],[w,I]=J.useState(r?_:null),[b,D]=J.useState(s?s.category:""),[L,W]=J.useState(s?s.description:""),[j,V]=J.useState(new Date),[te,K]=J.useState(s?s.transactionType==="income"?s.amount:-1*s.amount:""),se=we=>{I(we),u(!1)},_e=we=>{D(we),h(!1)},[H,ae]=Pe("localTransactions",[]),ue=()=>{if(w&&b){const we={id:r&&s?s.id:Kp(),category:b,accountId:w.id,currency:w.currency,description:L,amount:i==="income"?Number(te):-1*Number(te),transactionType:i,date:j},Ne=H.findIndex(me=>me.id===we.id);if(Ne>-1){const me=[...H];me[Ne]=we,ae(me),e(!1)}else ae([...H,we]),e(!1)}},ve=we=>{const Ne=H.filter(me=>me.id!==we);ae(Ne)},[q,xe]=J.useState(!1),ze=Ug(j);return y.jsxs(y.Fragment,{children:[q&&y.jsx(Wo,{title:"Удаление транзакции",dascription:"Вы действительно хотите удалить транзакцию?",onClose:()=>xe(!1),onConfirm:()=>{e(!1),s&&ve(s.id)}}),m&&y.jsx(kt,{title:"Счета",setModal:g,node:y.jsx(ME,{selected:j,onDateSelect:V,setModal:g})}),l&&y.jsx(kt,{title:"Счета",setModal:u,node:y.jsx(KS,{setModal:se})}),d&&y.jsx(kt,{title:`Категории ${i==="income"?"доходов":"расходов"}`,setModal:h,node:y.jsx(XS,{categories:i==="income"?t_:n_,setModal:_e})}),y.jsxs("div",{className:"flex gap-4",children:[y.jsx("button",{style:{backgroundColor:w?x.filter(we=>we.id===w.id)[0].color:"#F2F2F2",color:w?"white":"black"},className:"btn_2 !w-2/3",onClick:()=>u(!0),children:w?`${w.title}, ${w.currency}`:"Выберите счет"}),y.jsx("input",{type:"number",value:te,autoFocus:!0,placeholder:"Сумма",className:"input text-lg !w-1/3",onChange:we=>K(we.target.value)})]}),y.jsxs("div",{className:"mt-4 flex gap-4",children:[y.jsx("div",{className:"w-full",children:y.jsx("button",{className:"btn_2",onClick:()=>h(!0),children:b||"Категория"})}),y.jsx("button",{className:"btn_2",onClick:()=>g(!0),children:ze})]}),y.jsx("input",{type:"text",value:L,placeholder:"Описание (опционально)",className:"mt-4 p-4 bg-yellow-50 dark:bg-yellow-300/10 dark:placeholder:text-neutral-200 w-full rounded-lg placeholder:text-neutral-500",onChange:we=>W(we.target.value)}),y.jsx("div",{className:"mt-4 flex gap-4 justify-end",children:y.jsxs("div",{className:"flex gap-4 justify-end",children:[r&&y.jsx("button",{className:"btn_2 border border-[#EA4335] text-[#EA4335]",onClick:()=>xe(!0),children:"Удалить"}),y.jsx("button",{className:"btn_2",onClick:()=>{e(!1),ue()},disabled:!w||!b||!te,children:r?"Изменить":"Сохранить"})]})})]})}function AE({transactions:i}){const[e,r]=J.useState(!1),[s,l]=J.useState(!1),[u]=Pe("localCurrency",[]),[d]=Pe("localMainCurrency",""),h=ec(i.filter(g=>g.transactionType==="income"),u),m=ec(i.filter(g=>g.transactionType==="expense"),u);return y.jsxs(y.Fragment,{children:[e&&y.jsx(kt,{title:"Добавить доход",setModal:r,node:y.jsx(nc,{transactionType:"income",setModal:r})}),s&&y.jsx(kt,{title:"Внести расход",setModal:l,node:y.jsx(nc,{transactionType:"expense",setModal:l})}),y.jsxs("section",{className:"bg-white dark:bg-neutral-800 dark:text-white shadow-lg p-2 rounded-xl flex gap-2",children:[y.jsx(Gp,{title:"Доходы",color:"#dcfce7",amount:h.filter(g=>g.currency===d)[0].total,setModal:r}),y.jsx(Gp,{title:"Расходы",color:"#fee2e2",amount:m.filter(g=>g.currency===d)[0].total,setModal:l})]})]})}function LE(){return y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{d:"M3 6h18"}),y.jsx("path",{d:"M7 12h10"}),y.jsx("path",{d:"M10 18h4"})]})}function FE(){return y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{d:"m3 16 4 4 4-4"}),y.jsx("path",{d:"M7 20V4"}),y.jsx("path",{d:"M20 8h-5"}),y.jsx("path",{d:"M15 10V6.5a2.5 2.5 0 0 1 5 0V10"}),y.jsx("path",{d:"M15 14h5l-5 6h5"})]})}function jE(){return y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{d:"m3 16 4 4 4-4"}),y.jsx("path",{d:"M7 4v16"}),y.jsx("path",{d:"M15 4h5l-5 6h5"}),y.jsx("path",{d:"M15 20v-3.5a2.5 2.5 0 0 1 5 0V20"}),y.jsx("path",{d:"M20 18h-5"})]})}function zE(){return y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{d:"m14 18 4 4 4-4"}),y.jsx("path",{d:"M16 2v4"}),y.jsx("path",{d:"M18 14v8"}),y.jsx("path",{d:"M21 11.354V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h7.343"}),y.jsx("path",{d:"M3 10h18"}),y.jsx("path",{d:"M8 2v4"})]})}function WE(){return y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{d:"M12 5v14"}),y.jsx("path",{d:"m19 12-7 7-7-7"})]})}function BE(){return y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{d:"m5 12 7-7 7 7"}),y.jsx("path",{d:"M12 19V5"})]})}function UE({transaction:i}){const[e,r]=J.useState(!1),s=Ug(i.date),[l]=Pe("localAccounts",[]),u=l.filter(d=>d.id===(i==null?void 0:i.accountId))[0];return y.jsxs(y.Fragment,{children:[e&&y.jsx(kt,{title:"Транзакция",setModal:r,node:y.jsx(nc,{transactionType:i.transactionType,transaction:i,setModal:r,editMode:!0})}),y.jsxs("div",{onClick:()=>r(!0),className:"flex items-center p-3 h-[68px] overflow-hidden border-b border-neutral-200 dark:border-black last:border-none cursor-pointer",children:[y.jsx("div",{className:`${i.transactionType==="income"?"bg-[#dcfce7] dark:bg-[#34A853]":"bg-[#fee2e2] dark:bg-[#EA4335]"} aspect-square  w-10 h-10 rounded-full text-3xl leading-none flex justify-center items-center `,children:i.transactionType==="income"?y.jsx(WE,{}):y.jsx(BE,{})}),y.jsxs("div",{className:"w-full ml-4 flex flex-col justify-center",children:[y.jsxs("div",{className:"flex gap-4 justify-between items-center",children:[y.jsxs("p",{children:[i.description,i.description?`, ${s.toLocaleLowerCase()}`:s]}),y.jsxs("p",{className:`whitespace-nowrap text-right ${i.amount>0?"text-[#34A853]":"text-[#EA4335]"}  text-xl font-aptosBold`,children:[i.amount," ",y.jsx("span",{className:"text-xs",children:i.currency})]})]}),y.jsxs("div",{className:"flex gap-4 justify-between text-sm text-neutral-500 dark:text-neutral-400",children:[y.jsx("p",{children:i.category}),y.jsxs("p",{style:{backgroundColor:u.color},className:"whitespace-nowrap text-white dark:text-neutral-100 px-1.5 rounded-md",children:[u.title,", ",i.currency]})]})]})]})]})}function HE({transactions:i}){const[e,r]=J.useState(!1),[s,l]=J.useState("month"),[u,d]=J.useState("all"),[h,m]=J.useState("none"),g=new Date,w=[...i.filter(b=>s==="day"?Ju(b.date,g):s==="month"?Wg(b.date,g):s==="year"?mS(b.date,g):!0).filter(b=>u==="expense"?b.transactionType==="expense":u==="income"?b.transactionType==="income":!0)].sort((b,D)=>h==="asc"?b.amount-D.amount:h==="desc"?D.amount-b.amount:new Date(D.date).getTime()-new Date(b.date).getTime()),I=()=>{m(h==="none"?"desc":h==="desc"?"asc":"none")};return y.jsxs(y.Fragment,{children:[e&&y.jsx(kt,{title:"Фильтр",setModal:r,node:y.jsxs(y.Fragment,{children:[y.jsx("p",{children:"По дате"}),y.jsxs("div",{className:"mt-1 flex gap-2",children:[y.jsx("button",{onClick:()=>l("all"),className:`btn_2 ${s==="all"?"ring-2 ring-neutral-500":""}`,children:"Все"}),y.jsx("button",{onClick:()=>l("day"),className:`btn_2 ${s==="day"?"ring-2 ring-neutral-500":""}`,children:"Сегодня"}),y.jsx("button",{onClick:()=>l("month"),className:`btn_2 ${s==="month"?"ring-2 ring-neutral-500":""}`,children:"Месяц"}),y.jsx("button",{onClick:()=>l("year"),className:`btn_2 ${s==="year"?"ring-2 ring-neutral-500":""}`,children:"Год"})]}),y.jsx("p",{className:"mt-4",children:"По типу транзакции"}),y.jsxs("div",{className:"mt-1 flex gap-2",children:[y.jsx("button",{onClick:()=>{d("all")},className:`btn_2 ${u==="all"?"ring-2 ring-neutral-400":""}`,children:"Все"}),y.jsx("button",{onClick:()=>{d("expense")},className:`btn_2 ${u==="expense"?"ring-2 ring-neutral-400":""}`,children:"Расходы"}),y.jsx("button",{onClick:()=>{d("income")},className:`btn_2 ${u==="income"?"ring-2 ring-neutral-400":""}`,children:"Доходы"})]})]})}),y.jsxs("section",{className:"w-full",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("h3",{children:"Транзакции"}),y.jsxs("div",{className:"flex gap-4",children:[y.jsxs("button",{className:"btn_1 flex justify-center items-center",onClick:I,children:[h==="none"&&y.jsx(zE,{}),h==="asc"&&y.jsx(jE,{}),h==="desc"&&y.jsx(FE,{})]}),y.jsx("button",{className:"btn_1 flex justify-center items-center",onClick:()=>r(!0),children:y.jsx(LE,{})})]})]}),i.length>0?y.jsx("div",{className:"mt-2 bg-white dark:bg-neutral-800 shadow-lg rounded-lg",children:w.map(b=>y.jsx(UE,{transaction:b},b.id))}):y.jsx("p",{className:"text-neutral-500",children:"Добавьте первый счет"})]})]})}function $E(){const[i,e]=J.useState(navigator.onLine),[r]=J.useState(!1);return J.useEffect(()=>{const s=()=>e(!0),l=()=>e(!1);return window.addEventListener("online",s),window.addEventListener("offline",l),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",l)}},[r]),i}function VE(){const[i]=Pe("localMainCurrency",""),[e]=Pe("localTransactions",[]),[r]=Pe("localAccounts",[]),s=$E();return y.jsxs(y.Fragment,{children:[!s&&y.jsx("p",{className:"fixed left-4 top-0 text-xs",children:"Нет сети"}),y.jsxs("main",{className:"max-w-lg md:max-w-7xl mx-auto p-4 md:px-10 flex flex-col md:flex-row gap-5 md:gap-10 select-none",children:[y.jsxs("div",{className:"w-full flex flex-col gap-5",children:[y.jsx(qS,{}),y.jsx(a_,{}),i&&r.length>0&&y.jsx(AE,{transactions:e})]}),e.length>0?y.jsx("div",{className:"w-full flex flex-col gap-4",children:y.jsx(HE,{transactions:e})}):y.jsx("p",{className:"w-full text-neutral-500",children:"Транзакции отсутствуют"})]})]})}Zv.createRoot(document.getElementById("root")).render(y.jsx(VE,{}));
